<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[playwrightÊµÅÊ∞¥Ë¥¶Á¨îËÆ∞]]></title>
    <url>%2F2023%2F05%2F29%2F1%2F</url>
    <content type="text"><![CDATA[ÊúÄËøëÂú®È°πÁõÆ‰∏≠ÂºïÂÖ•‰∫ÜPlaywrightÔºåËøôÊ¨æËá™Âä®ÂåñÊµãËØïÂ∑•ÂÖ∑Áé∞Âú®Â∫îËØ•Â∑≤ÁªèÂêçÂ£∞Â§ßÂô™‰∫Ü„ÄÇÂÖ∂ÂÆûÊó©Âú®2020Âπ¥È°πÁõÆÂàöÂºÄÊ∫êÁöÑÊó∂ÂÄôÊàëÂ∞±Êé•Ëß¶Âà∞‰∫ÜÔºåÂÆÉÁõ∏ËæÉ‰∫éÁõÆÂâçÊúÄÂ∏∏Áî®ÁöÑSeleniumÂÆûÂú®ÊòØÊúâÂ§™Â§öÁöÑ‰ºòÂäø‰∫ÜÔºå‰∏çÁî®‰∏∫‰∏ãËΩΩÂêÑÁßçÁâàÊú¨ÁöÑWebDriverËÄåÁÉ¶ÊÅºÔºåÊú¨Ë∫´Â∞±Êê∫Â∏¶ÁΩëÁ´ôÂΩïÂà∂ÂäüËÉΩÔºåÊó†ÈúÄ‰∏ãËΩΩÂÖ∂‰ªñÂ∫îÁî®ÔºåËÄå‰∏îËÉåÈù†ÂæÆËΩØËøô‰πàÂº∫Â§ßÁöÑÂêéÂè∞ÔºåÊàëÁúüÁöÑÁà±‰∏çÈáäÊâãÔºåËøôÁØáÊñáÁ´†‰∏ªË¶ÅËÆ∞ÂΩï‰∏Ä‰∏ãÊàë‰∏™‰∫∫‰ΩøÁî®ÁöÑ‰∏Ä‰∫õÊäÄÂ∑ßÂíåË∏©ËøáÁöÑÂùë ÊñáÊú¨‰∏ç‰ºöÂÖ∑‰Ωì‰ªãÁªçÂ¶Ç‰Ωï‰ΩøÁî®ÔºåËøôÂùóÁöÑÊïôÁ®ãÂ§™Â§ö‰∫ÜÔºåÂ∞±‰∏çÂÜçËµòËø∞‰∫Ü ¬∂‰∏∫‰ªÄ‰πàÈÄâÊã©Playwright Áõ∏ËæÉ‰∫é SeleniumÔºåPlaywright Êúâ‰ª•‰∏ã‰ºòÂäøÔºö ÊîØÊåÅÂ§öÁßçÊµèËßàÂô®ÂíåËÆæÂ§áÔºöPlaywright ÊîØÊåÅ Chrome„ÄÅFirefox Âíå Safari Á≠âÂ§öÁßçÊµèËßàÂô®Ôºå‰πüÊîØÊåÅ Android Âíå iOS ËÆæÂ§áÔºåÂèØ‰ª•Âú®‰∏çÂêåÁöÑÂπ≥Âè∞‰∏äËøêË°åÊµãËØï„ÄÇ Êõ¥Âø´ÁöÑÊµãËØïÈÄüÂ∫¶ÔºöPlaywright ÁöÑËá™Âä®ÂåñÊµãËØïÈÄüÂ∫¶ÊØî Selenium Êõ¥Âø´ÔºåÂõ†‰∏∫ÂÆÉ‰ΩøÁî®‰∫Ü‰∏Ä‰∫õ‰ºòÂåñÊäÄÊúØÔºåÂ¶ÇÂºÇÊ≠•ÊâßË°åÊµãËØïÁî®‰æã„ÄÅÁºìÂ≠òÈ°µÈù¢Á≠â„ÄÇ Êõ¥Â•ΩÁöÑÂèØÁª¥Êä§ÊÄßÔºöPlaywright Êèê‰æõ‰∫Ü‰∏Ä‰∫õÂ∑•ÂÖ∑Âíå APIÔºåÂèØ‰ª•Â∏ÆÂä©ÂºÄÂèë‰∫∫ÂëòÁºñÂÜôÊõ¥ÁÆÄÊ¥Å„ÄÅÂèØËØªÊÄßÊõ¥È´òÁöÑÊµãËØïÁî®‰æãÔºåÂπ∂‰∏îÂèØ‰ª•ËΩªÊùæÂú∞Áª¥Êä§ÂíåÊõ¥Êñ∞Ëøô‰∫õÁî®‰æã„ÄÇ Êõ¥Â•ΩÁöÑË∞ÉËØïÂäüËÉΩÔºöPlaywright Êèê‰æõ‰∫Ü‰∏Ä‰∫õË∞ÉËØïÂ∑•ÂÖ∑ÔºåÂèØ‰ª•Â∏ÆÂä©ÂºÄÂèë‰∫∫ÂëòÂø´ÈÄüÂÆö‰ΩçÈóÆÈ¢òÔºåÂπ∂‰∏îÂèØ‰ª•Âú®ÊµãËØïÁî®‰æãÊâßË°åËøáÁ®ã‰∏≠ËøõË°åË∞ÉËØï„ÄÇ Êõ¥Â•ΩÁöÑËÉΩÂäõÔºöSeleniumÂü∫‰∫éHTTPÂçèËÆÆÔºàÂçïÂêëÈÄöËÆØÔºâÔºåPlaywrightÂü∫‰∫éWebsocketÔºàÂèåÂêëÈÄöËÆØÔºâÂèØËá™Âä®Ëé∑ÂèñÊµèËßàÂô®ÂÆûÈôÖÊÉÖÂÜµ„ÄÇ Playwright‰∏∫Ëá™Âä®Á≠âÂæÖÔºåËÄåSeleniumÈúÄË¶ÅÊâãÂä®ËÆæÁΩÆÁ≠âÂæÖÊó∂Èó¥ÔºåÊàñÂàôÁõëÂê¨ÂÖÉÁ¥†Âá∫Áé∞ ¬∂centos7ÈÉ®ÁΩ≤playwright ÊàëÊú¨Âú∞‰ΩøÁî®ÁöÑÊòØÁéØÂ¢ÉÊòØ python3.11Âíå playwright==1.33.0, ÂÆåÂÖ®Ê≤°ÊúâÈóÆÈ¢òÔºå‰ΩÜÊàëÂú®ÊµãËØïÁéØÂ¢ÉÈÉ®ÁΩ≤ÁöÑÊó∂ÂÄôÈóÆÈ¢òÂ∞±Â§ß‰∫ÜÔºåÂú®ÊµãËØïÁéØÂ¢ÉÊ†πÊú¨ÊâßË°å‰∏ç‰∫Ü„ÄÇ ÈÄöËøá cat /etc/*-release Êü•ÁúãÊàë‰ΩøÁî®ÁöÑÊµãËØïÁéØÂ¢ÉÊòØCentOS Linux release 7.2.1511 (Core)ÔºåÈÄöËøágoogle ÂèëÁé∞ playwrightÂú®centos‰∏äÈÉ®ÁΩ≤ÂÆòÊñπÊòØ‰∏çÊîØÊåÅÁöÑÔºåËØ¶ÊÉÖÂèÇËÄÉ https://github.com/microsoft/playwright/issues/9194 ÊÄª‰∏çËÉΩÊç¢Âè∞Êú∫Âô®ÂêßÔºåÔºàÂÖ∂ÂÆûÊàëÊòØËøô‰πàÊÉ≥ÁöÑÔºå‰ΩÜËµÑÊ∫êÊúâÈôê)ÔºåÊúÄÂêéÈÄöËøáÂ§ßÈáèË∏©ÂùëÔºåÊúÄÁªàÂÆûÁé∞‰∫ÜplaywrightÂú®centos7‰∏äÁöÑÈÉ®ÁΩ≤ ¬∂ÂÆâË£ÖÊØîËæÉ‰ΩéÁöÑÁâàÊú¨ 123pip install playwright==1.16.1pip install pytest-playwright==0.2.2playwright install ¬∂ÂçáÁ∫ßÈ´òÁâàÊú¨GLIBC 1.‰∏ãËΩΩËß£Âéã 12wget https://ftp.gnu.org/gnu/glibc/glibc-2.18.tar.gztar -zxvf glibc-2.18.tar.gz 2.ÁºñËØëÂÆâË£Ö 1234cd glibc-2.18 &amp;&amp; mkdir buildcd build../configure --prefix=/usr --disable-profile --enable-add-ons --with-headers=/usr/include --with-binutils=/usr/binmake &amp;&amp; make install 3.È™åËØÅ 12[lhop@bj_workspace_vm100007 ~]$ ll /lib64/libc.so.6lrwxrwxrwx 1 root root 12 May 26 16:38 /lib64/libc.so.6 -&gt; libc-2.18.so ÈÄöËøá‰∏äÈù¢‰∏§‰∏™Ê≠•È™§Â∞±ÂèØ‰ª•Âú®centos7ÈÉ®ÁΩ≤playwrightËøêË°åÁ®ãÂ∫è‰∫Ü ¬∂playwrightÂ¶Ç‰ΩïÁªïËøáÂèçÁà¨ ÈÄöËøá‰ΩøÁî®Ëá™Âä®ÂåñÊµãËØïÂ∑•ÂÖ∑ÊâìÂºÄÊµèËßàÂô®ÂíåÊ≠£Â∏∏ÊâìÂºÄÊµèËßàÂô®‰ºöÊúâÂæàÂ§ö‰∏çÂêåÁöÑÂèÇÊï∞ÈÖçÁΩÆÔºåÂõ†Ê≠§Êúâ‰∫õÁΩëÁ´ô‰ºöÈÄöËøá JavaScriptÂéªÊé¢ÊµãËøô‰∫õÁâπÂæÅÊù•Âà§Êñ≠ÊòØÂê¶Âú®‰ΩøÁî®Ëá™Âä®ÂåñÊµãËØïÂ∑•ÂÖ∑Êù•ÂÆûÁé∞ÂèçÁà¨ ¬∂Áà¨Ëô´Ê£ÄÊµã ÈÄöËøáËÆøÈóÆ https://bot.sannysoft.com/ ÂèØ‰ª•ÊòæÁ§∫ÊúâÂì™‰∫õÁâπÂæÅË¢´Ê£ÄÊµãÂá∫ ÂΩìÊàëÊ≠£Â∏∏ÊâìÂºÄÁΩëÁ´ôÊó∂ ÂΩìÊàë‰ΩøÁî®playwrightÂêØÂä®Êó∂ ¬∂Âú®linux‰∏äÊâßË°åÊúâÂ§¥Ê®°Âºè ‰ºóÊâÄÂë®Áü•ÔºåÂú®Êó†Â§¥Ê®°Âºè‰∏ãÁöÑÊÄßËÉΩÊòæÁÑ∂Áî±‰∫éÊúâÂ§¥Ê®°ÂºèÔºå‰ΩÜÊòØÊúâÊ≤°ÊúâÂú®È°πÁõÆ‰∏≠Âá∫Áé∞ËøôÁßçÊÉÖÂÜµÔºåÈÄöËøáÊúâÂ§¥Ê®°ÂºèÊâìÂºÄÁΩëÁ´ôÊ≠£Â∏∏ÊòæÁ§∫ËÄå‰ΩøÁî®Êó†Â§¥Ê®°ÂºèÂàôË¢´Âà§ÂÆö‰∏∫Áà¨Ëô´ÔºåËøôÂ∫îËØ•‰∏çÂú®Â∞ëÊï∞„ÄÇÊàë‰ª¨ÁúãÁúãÊó†Â§¥Ê®°Âºè‰∏ãÁöÑÊåáÊ†áÊòæÁ§∫ 12345678910with sync_playwright() as pw: browser = pw.chromium.launch(headless=True) context = browser.new_context( ) page = context.new_page() page.goto("https://bot.sannysoft.com/") page.screenshot(path='sannysoft.png') page.close() context.close() browser.close() ÁÆÄÁõ¥Ê≤°Ê≥ïÁúãüòÖÔºåÈÇ£Êàë‰ª¨Â∞ÜÂèÇÊï∞ËÆæÁΩÆheadless=FalseÂÜçËøêË°å‰∏Ä‰∏ãÁúãÁúãÔºå 12345678910111213playwright._impl._api_types.Error: ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó‚ïë Looks like you launched a headed browser without having a XServer running. ‚ïë‚ïë Set either 'headless: true' or use 'xvfb-run &lt;your-playwright-app&gt;' before running Playwright. ‚ïë‚ïë ‚ïë‚ïë &lt;3 Playwright Team ‚ïë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù=========================== logs ===========================&lt;launching&gt; /root/.cache/ms-playwright/webkit-1837/pw_run.sh --inspector-pipe --no-startup-window&lt;launched&gt; pid=10481[pid=10481][err] Unable to init server: Could not connect: Connection refused[pid=10481][err] [pid=10481][err] (MiniBrowser:10486): Gtk-WARNING **: 07:46:52.650: cannot open display: Âú®linux‰∏äÊâßË°åÊúâÂ§¥Ê®°ÂºèÂ•ΩÂÉèÂπ∂‰∏çÊîØÊåÅÂë¢ÔºåÊúâÊ≤°ÊúâÂäûÊ≥ïËß£ÂÜ≥Âë¢ ¬∂Xvfb ÈÄöËøágoogle ÁøªÈòÖÂà∞Ëøô‰∏™Issues https://github.com/microsoft/playwright/issues/14250 ‰∏äÈù¢‰ΩøÁî® xvfb ÂèØ‰ª•ÊúâÊïàËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò ÂæàÂ§öÂ∞è‰ºô‰º¥Â∫îËØ•ÂíåÊàë‰∏ÄÊ†∑‰∏çÁü•ÈÅìxvfbÊòØ‰ªÄ‰πàÂêßÔºåÊ≤°ÂÖ≥Á≥ªÔºåÊàëÊúâchatgpt ¬∂ÂÆâË£Ö Centos 1yum install Xvfb Ubuntu 12apt-get updateapt-get install xvfb ¬∂‰ΩøÁî® 1xvfb-run [ÊâßË°åËØ≠Âè•] ÊØîÂ¶ÇÊàë‰ª¨‰ΩøÁî®python ÊâßË°åÁöÑÊñá‰ª∂Âêç‰∏∫main.py,‰ΩøÁî® xvfb ÊâßË°åÂëΩ‰ª§Â¶Ç‰∏ãÔºö 1xvfb-run python main.py ÁªìÊûúÂ¶Ç‰∏ãÔºö Áé∞Âú®Êàë‰ª¨ÂèëÁé∞‰ΩøÁî®Ëá™Âä®ÂåñÂ∑•ÂÖ∑ÂíåÊ≠£Â∏∏ÊâìÂºÄ WebDriver ËÆæÁΩÆÁöÑÁªìÊûú‰∏ç‰∏ÄÊ†∑ÔºåÂæàÂ§öÁΩëÁ´ôÈÉΩÊòØÈÄöËøáËøô‰∏™Â±ûÊÄßÂéªÂà§Êñ≠ÊòØÂê¶Âú®‰ΩøÁî®Ëá™Âä®ÂåñÊµãËØïÂ∑•ÂÖ∑ÔºåÂõ†Ê≠§Ë¶ÅÂ¶Ç‰ΩïÊâçËÉΩÈÄÉÈÅøÊ£ÄÊµãÂë¢Ôºü ¬∂ÁªïËøáÂèçËá™Âä®Âåñ/Áà¨Ëô´Ê£ÄÊµãËá™Âä®Âåñ ÂÖ∂ÂÆûÊñπÊ≥ï‰πüÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÈÄöËøáÂú®È°µÈù¢Âä†ËΩΩ‰πãÂâçÊ≥®ÂÖ•jsËÑöÊú¨ÔºåÊäπÂéªnavigator.webdriverÁ≠âÊµèËßàÂô®Ëá™Âä®ÂåñÁâπÂæÅ ‰∏ªÊµÅÁöÑÊ°ÜÊû∂Â¶Ç playwrightÔºå selenium ÔºåPuppeteerÈÉΩÊòØÊîØÊåÅjsËÑöÊú¨Ê≥®ÂÖ•ÂäüËÉΩÁöÑ ‰ª• playwright ‰∏∫‰æã 1234567891011121314js = """Object.defineProperties(navigator, &#123;webdriver:&#123;get:()=&gt;undefined&#125;&#125;);"""with sync_playwright() as pw: browser = pw.chromium.launch(headless=False) context = browser.new_context( ) context.add_init_script(js) page = context.new_page() page.goto("https://www.apple.com") print(page.content()) page.close() context.close() browser.close() Âú®È°µÈù¢Âä†ËΩΩ‰πãÂâçÈÄöËøáadd_init_script Â∞Üwebdriver ÁΩÆÁ©∫‰ªéËÄåÈÄÉÈÅøÂèçËá™Âä®Âåñ/Áà¨Ëô´Ê£ÄÊµã ÂÖ∂ÂÆûÔºå‰∏çÂè™ÊòØwebdriverÔºåÂΩìËá™Âä®ÂåñÂ∑•ÂÖ∑ÊâìÂºÄÊµèËßàÂô®ÂêéÔºåËøò‰ºöÊúâÂæàÂ§öÂÖ∂‰ªñÁâπÂæÅÁ†ÅÔºåÂ¶ÇÔºö 12345678910111213141516171819202122232425webdriver __driver_evaluate __webdriver_evaluate __selenium_evaluate __fxdriver_evaluate __driver_unwrapped __webdriver_unwrapped __selenium_unwrapped __fxdriver_unwrapped _Selenium_IDE_Recorder _selenium calledSelenium _WEBDRIVER_ELEM_CACHE ChromeDriverw driver-evaluate webdriver-evaluate selenium-evaluate webdriverCommand webdriver-evaluate-response __webdriverFunc __webdriver_script_fn __$webdriverAsyncExecutor __lastWatirAlert __lastWatirConfirm __lastWatirPrompt ÊúâÊ≤°ÊúâÁé∞ÊàêÁöÑËÑöÊú¨ÂèØ‰ª•ÂÆûÁé∞ÂØπËøô‰∫õÁâπÂæÅÁöÑ‰øÆÊîπÂë¢ÔºüÂΩìÁÑ∂ÊúâÂï¶ÔºàÊÑüË∞¢ÈùûÂ∏∏‰ºòÁßÄÁöÑÂ∑•Á®ãÂ∏à‰πê‰∫éÂºÄÊ∫êÁöÑÁ≤æÁ•ûÔºåÂêë‰ªñ‰ª¨Â≠¶‰π†ÔºårespectÔºâ È°πÁõÆÂú∞ÂùÄ:https://github.com/berstend/puppeteer-extra/tree/master/packages/extract-stealth-evasions ‰ΩúËÄÖÊòØ‰ΩøÁî®ÂÆûÁé∞ÁöÑÊ°à‰æãÊòØÈíàÂØπpuppeteerÁöÑÔºå‰ΩÜÊòØjsÈÉΩÊòØÈÄöÁî®ÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÂÆÉ‰∏ãËΩΩ‰∏ãÊù•‰ΩøÁî® Âú∞ÂùÄÔºöhttps://gitcdn.xyz/repo/berstend/puppeteer-extra/stealth-js/stealth.min.js ÂõΩÂÜÖÔºö http://www.site-digger.com/uploads/stealth.min.js?continueFlag=67080a5e4fdfcd575cd2fed93d46a5ac ‰ª£Á†ÅÂ¶Ç‰∏ã: 1234567891011with sync_playwright() as pw: browser = pw.chromium.launch(headless=False) context = browser.new_context( ) context.add_init_script(path="stealth.min.js") page = context.new_page() page.goto("https://www.apple.com") print(page.content()) page.close() context.close() browser.close() Áé∞Âú®ÊòØÁªøÁöÑ‰∫ÜÔºåÁúüÁöÑÂæàÊúâÊïàÔºåÊó†Â§¥Ê®°Âºè‰∏ã‰πüÊòØÂÖ®ÁªøÁöÑÔºåÊ≥∞Ë£§Ëæ£ÔºåÊ≥∞Ë£§Ëæ£üòÑ ¬∂DockerËøêË°åÁöÑplaywright Ê≥®ÊÑèÔºöplaywrightÂÆòÊñπÂè™ÊîØÊåÅunbutuÔºàÊâÄ‰ª•‰ΩøÁî®debain‰πüÂèØ‰ª•Ôºâ ¬∂Ëá™ÂÆö‰πâÈïúÂÉè ÊàëËá™Â∑±ÊâãÂÜô‰∫Ü‰∏Ä‰∏™DockerfileÔºåÂü∫‰∫éÊúÄÊñ∞ÁöÑpythonÁâàÊú¨ÁöÑÂü∫Á°ÄÈïúÂÉèFROM python3.11,Â∫ïÂ±ÇÈïúÂÉèÊòØÂü∫‰∫é debainÁ≥ªÁªüÔºåÈùûÂ∏∏ËΩªÈáèÔºåÂõ†Ê≠§‰ºöÂ≠òÂú®Áº∫Â∞ë‰æùËµñÁöÑÊÉÖÂÜµ Â¶ÇÔºö 1234567891011121314151617181920212223242526[Error: ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó‚ïë Host system is missing dependencies to run browsers. ‚ïë‚ïë Please install them with the following command: ‚ïë‚ïë ‚ïë‚ïë playwright install-deps ‚ïë‚ïë ‚ïë‚ïë Alternatively, use apt: ‚ïë‚ïë apt-get install libnss3\ ‚ïë‚ïë libnspr4\ ‚ïë‚ïë libatk1.0-0\ ‚ïë‚ïë libatk-bridge2.0-0\ ‚ïë‚ïë libcups2\ ‚ïë‚ïë libdrm2\ ‚ïë‚ïë libdbus-1-3\ ‚ïë‚ïë libxkbcommon0\ ‚ïë‚ïë libatspi2.0-0\ ‚ïë‚ïë libxcomposite1\ ‚ïë‚ïë libxdamage1\ ‚ïë‚ïë libxfixes3\ ‚ïë‚ïë libxrandr2\ ‚ïë‚ïë libgbm1\ ‚ïë‚ïë libasound2 ‚ïë‚ïë ‚ïë‚ïë &lt;3 Playwright Team ‚ïë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù] Ê≤°ÂÖ≥Á≥ªÔºåÈÉΩÊòØÂ∞è‰∫ãüòÇ Dockerfile url: https://github.com/Darr-en1/awesome-docker-compose/blob/main/playwright/Dockerfile ¬∂ÂÆòÊñπÈïúÂÉè https://mcr.microsoft.com/en-us/product/playwright/python/about Âü∫Á°ÄÈïúÂÉèÊ≤°ÊúâÂÆâË£ÖplaywrightÔºåÈúÄË¶ÅÊâãÂä®ÂÆâË£ÖÔºåÂèØËÉΩÊòØËÄÉËôëÂà∞Â§ßÂÆ∂ÂØπ‰∫éÁâàÊú¨ÁöÑË¶ÅÊ±Ç‰∏ç‰∏ÄÊ†∑ ‰ΩÜÊòØÈïúÂÉèÂÜÖ webdriver Â∑≤ÁªèÊèêÂâçÂ≠òÂú®‰∫ÜÔºåÂõ†Ê≠§Êó†ÈúÄ playwright install ËØ•ÈïúÂÉèpython ÁâàÊú¨Python 3.10.6, Â¶ÇÊûúÁâàÊú¨‰∏çÂêàÈÄÇÂàôÈúÄË¶ÅÊâãÂä®‰∏ãËΩΩ ÁªèËøáÊµãËØïÂèëÁé∞ÂÆòÊñπÈïúÂÉè‰πüÊòØÈúÄË¶ÅÈÄöËøáXvfbÊâçËÉΩ‰ΩøÁî®ÊúâÂ§¥Ê®°ÂºèÁöÑÔºåÁôΩÈ´òÂÖ¥‰∏ÄÂú∫Ôºå‰ΩÜËøòÊòØÈùûÂ∏∏ÂÄºÂæó‰ΩøÁî® ÊúÄÂêéÔºåfake-useragent ÁúüÁöÑÂæàÂ•ΩÁî®Ôºåchromium ÁöÑÈÄÇÈÖçÊÄßÊòØÊúÄÂ•ΩÁöÑÔºå‰ΩÜÊòØwebkit ÊòØÊúÄÂø´ÁöÑ ÂèÇËÄÉÔºö https://yifei.me/note/2226 https://www.cnblogs.com/soymilk2019/p/17412596.html https://zhuanlan.zhihu.com/p/78368287 https://cloud.tencent.com/developer/article/1755512 https://cloud.tencent.com/developer/article/1797678]]></content>
      <categories>
        <category>playwright</category>
        <category>python</category>
        <category>Áà¨Ëô´</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>playwright</tag>
        <tag>Áà¨Ëô´</tag>
        <tag>ÂèçÁà¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ChatGPTÂæàÁâõ,ÊàëÂæàÊÖå]]></title>
    <url>%2F2023%2F01%2F05%2F1%2F</url>
    <content type="text"><![CDATA[ChatGPTÊúÄËøëÂÆûÂú®Â§™ÁÅ´‰∫ÜÔºåÁîöËá≥ÂæàÂ§öÂúàÂ§ñÁöÑÂ∞è‰ºô‰º¥ÈÉΩÁü•ÈÅì‰∫Ü„ÄÇÂÆÉÈùûÂ∏∏‰∫∫ÊÄßÂåñÁöÑÂØπËØùÊ®°ÂûãÂíåÂº∫Â§ßÁöÑ‰∏ä‰∏ãÊñáÂÖ≥ËÅî,ÁîöËá≥ËÆ©ÊàëÊÑèËØÜ‰∏çÂà∞ÊàëÊòØÂú®Âêå‰∏Ä‰∏™Êú∫Âô®‰∫∫ÂØπËØùÔºåÂÆÉÁîöËá≥ÂèØ‰ª•ÂçèÂä©ÁºñÁ®ãÔºåËÆ©Êàë‰∏ÄÂ∫¶ÊÄÄÁñëÂèØËÉΩËøòÊ≤°Á≠âÂà∞35Â≤ÅÊØï‰∏öÂ∞±Ë¶ÅÈù¢‰∏¥Ë¢´AIÊ∑òÊ±∞ÁöÑÂ∞¥Â∞¨ÂõßÂ¢É„ÄÇChatGPTÁúüÁöÑÁ•û‰πéÂÖ∂Á•ûÔºåÂèØ‰ª•Âèñ‰ª£Áé∞ÊúâÂ≤ó‰ΩçÂêó? Áü•Â∑±Áü•ÂΩºÔºåÊñπËÉΩÁôæÊàò‰∏çÊÆÜÔºåËµ∂Á¥ßÊù•ËÆ§ËØÜËÆ§ËØÜËøô‰∏™Âº∫Â§ßÂØπÊâã„ÄÇ ¬∂ChatGPTÊòØ‰ªÄ‰πà ChatGPTÊòØ‰∏ÄÁßçËá™ÁÑ∂ËØ≠Ë®ÄÁîüÊàêÊ®°ÂûãÔºåÂÆÉÂü∫‰∫éGPT-3ÊûÑÂª∫ÔºåÁî®‰∫éÂú®Ëá™ÁÑ∂ÂØπËØù‰∏≠ËøõË°åËØ≠Ë®ÄÁîüÊàê„ÄÇÂÆÉÂÖ∑ÊúâËá™ÁÑ∂ËØ≠Ë®ÄÁêÜËß£ÂíåËØ≠Ë®ÄÁîüÊàêÁöÑËÉΩÂäõÔºåËÉΩÂ§ü‰ª•‰∫∫Á±ª‰∏ÄÊ†∑ÁöÑÊñπÂºèÂõûÁ≠îÈóÆÈ¢òÂπ∂ÂèëËµ∑ÂØπËØù„ÄÇ ChatGPTÊòØ‰∏Ä‰∏™È´òÊïàÁöÑÂ∑•ÂÖ∑ÔºåÂèØ‰ª•Âú®ÊûÑÂª∫ËÅäÂ§©Êú∫Âô®‰∫∫„ÄÅÊô∫ËÉΩÂä©Êâã„ÄÅÈóÆÁ≠îÁ≥ªÁªüÁ≠âÂ∫îÁî®Á®ãÂ∫èÊó∂‰ΩøÁî®„ÄÇ ‰ª•‰∏äÊòØChatGPTËá™Â∑±ÁöÑÂõûÁ≠î„ÄÇÁÆÄÂçïÁÇπËÆ≤ÔºåChatGPTÂ∞±ÊòØ‰∏Ä‰∏™ËÅäÂ§©Êú∫Âô®‰∫∫Ôºå‰ΩÜÊòØÂÆÉÈùûÂ∏∏Êô∫ËÉΩÔºåËÉΩÂ§üÂÖ≥ËÅî‰∏ä‰∏ãÊñáÔºåÂèÇ‰∏éËá™ÁÑ∂ÂØπËØùÔºåÂπ∂ÁêÜËß£‰ªñ‰ª¨ÁöÑÊÑèÂõæÔºå‰ªéËÄå‰ΩøÂØπËØùÊõ¥Âä†ÊµÅÁïÖËá™ÁÑ∂„ÄÇ ‰ª•‰∏ãÊòØÊàëÂñúÊ¨¢ÁöÑ‰∏Ä‰∏™up‰∏ªÂØπ‰∫éChatGPTÁöÑ‰ªãÁªçÔºåÊúâÊ∂âÂèäÂü∫Êú¨ÂéüÁêÜÔºåÂèØ‰ª•Êñπ‰æøÂ§ßÂÆ∂ÁêÜËß£„ÄÇ ¬∂ChatGPTÊèí‰ª∂Êé®Ëçê Áî±‰∫éChatGPTÁöÑÂºÇÂ∏∏ÁÅ´ÁàÜÔºåÁ§æÂå∫Âü∫‰∫éChatGPTÁöÑÂ∫îÁî®Â§öÂ¶ÇÈõ®ÂêéÊò•Á¨ãÔºåÂú®Ê≠§ÊàëÂ∞±Êé®ËçêÂá†‰∏™ÊúâÊÑèÊÄùÁöÑÊèí‰ª∂„ÄÇ‰ΩÜÂâçÊèêÊòØÈúÄË¶ÅÊã•Êúâ‰∏Ä‰∏™OpenAIÁöÑË¥¶Âè∑ÔºåOpenAIÊ≤°Êúâ‰∏≠ÂõΩÂºÄÊîæÊ≥®ÂÜåÔºåÊ≥®ÂÜå‰∏ÄËà¨ÈÉΩ‰ºöÊèêÁ§∫OpenAI‚Äôs services are not available in your country„ÄÇ ¬∂ÂâçÊúüÂáÜÂ§á ÂÆâÂÖ®‰∏äÁΩëÔºåÊúÄÂ•ΩÊòØÁæéÂõΩIPÔºåÈ¶ôÊ∏ØÊ≤°Áî®ÔºåÈúÄÂºÄÂêØÂÖ®Â±Ä‰ª£ÁêÜ Â§ñÂõΩÈÇÆÁÆ± Êúâ‰∏Ä‰∏™ËÉΩÊî∂Âà∞È™åËØÅÁ†ÅÁöÑÂ§ñÂõΩÊâãÊú∫Âè∑Á†ÅÔºåÂèØ‰ª•ÂâçÂæÄ https://sms-activate.org/cn Ë¥≠‰π∞‰∏Ä‰∏™ËôöÊãüË¥¶Âè∑Áî®‰∫éÊé•È™åËØÅÁ†ÅÔºåÊ≥®ÊÑèËøôÊòØÊî∂Ë¥πÁöÑÔºå‰ΩÜ‰πüÂæà‰æøÂÆúÔºåËôöÊãüË¥¶Âè∑ÂÖÖ0.2ÁæéÂÖÉÂ∞±Ë∂≥Â§üË¥≠‰π∞‰∏ÄÊ¨°Âç∞Â∫¶Âè∑Á†Å Â¶ÇÊûúÂºÄÂêØ‰ª£ÁêÜÂêéËøò‰ºöÂá∫Áé∞ OpenAI‚Äôs services are not available in your country Âú®ÁΩëÈ°µÁöÑÊêúÁ¥¢Ê†èËæìÂÖ•javascript:window.localStorage.removeItem(Object.keys(window.localStorage).find(i=&gt;i.startsWith('@@auth0spajs')))ÁÑ∂ÂêéÂà∑Êñ∞Âç≥ÂèØ Ê≥®‚ö†Ô∏èÔºö javascript: Ë¶ÅÊâãÂä®ËæìÂÖ• Êó†Ê≥ïÂ§çÂà∂ ¬∂Êé®Ëçê ÊêúÁ¥¢ÂºïÊìéÊèí‰ª∂Ôºöhttps://github.com/wong2/chat-gpt-google-extension ÂΩì‰Ω†Âú®ÊêúÁ¥¢ÂºïÊìéÊêúÁ¥¢Êó∂ÔºåÂ±èÂπïÁöÑÂè≥‰æßÂàô‰ºöÊòæÁ§∫ChatGPTÂØπ‰∫éËøô‰∏™ÊêúÁ¥¢ÈóÆÈ¢òÁöÑÂõûÁ≠îÔºå‰Ω†ÂèØ‰ª•ÂêåÊêúÁ¥¢ÂºïÊìéËøõË°åÂØπÊØîÔºå‰ªéËÄåÊâæÂà∞Êõ¥ÂêàÈÄÇÁöÑÁ≠îÊ°à„ÄÇ ÊñáÁ´†ÊëòË¶ÅÁîüÊàêÊèí‰ª∂Ôºöhttps://github.com/clmnin/summarize.site Êèí‰ª∂‰ºöÂØπÊñáÁ´†ËøõË°åÁÆÄË¶ÅÊ¶ÇÊã¨ÔºåÊñπÈù¢‰Ω†Âø´ÈÄü‰∫ÜËß£ÊñáÁ´†‰∏ªË¶ÅÂÜÖÂÆπ ‰ª£Á†ÅÈîôËØØËß£ÈáäÊèí‰ª∂Ôºöhttps://github.com/shobrook/stackexplain ‰ΩøÁî® ChatGPT Ëß£Èáä‰ª£Á†ÅÁöÑÈîôËØØÊ∂àÊÅØÔºå‰æø‰∫éÈóÆÈ¢òÊéíÊü• ¬∂‰∏™‰∫∫ÂæÆ‰ø°Êé•ÂÖ•ChatGPT ÊúÄÂêéÔºåÂÆûÁé∞‰∏™‰∫∫ÂæÆ‰ø°Êé•ÂÖ• ChatGPT ¬∂Êé•ÂÖ•ÂâçÊèê ÁôªÂΩï openaiÔºöbeta.openai.com/login/ÔºåÁÑ∂ÂêéÁÇπÂáªÈ°µÈù¢Âè≥‰∏äËßíÁöÑÂ§¥ÂÉèÔºåËøõÂÖ• View API keysÔºå ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁßòÈí•ÔºåÁî®‰∫éÂíå openai ËÆ§ËØÅÂíå‰∫§‰∫í„ÄÇ ¬∂ÂÆâË£ÖÈÉ®ÁΩ≤ ‰∏ãËΩΩÊ∫ê‰ª£Á†ÅÂπ∂‰∏ãËΩΩ‰æùËµñ 123git clone https://github.com/djun/wechatbot.gitcd wechatbot go mod tidy Ê∑ªÂä†ËΩØËøûÊé•Âπ∂Ôºå‰øÆÊîπÈÖçÁΩÆ 12ln -s config.dev.json config.jsonvim config.dev.json Â∞ÜÂàöÂàöÁîüÊàêÁöÑÁßòÈí•ÂÜôÂÖ•Âà∞config.dev.json ÁöÑapi_key‰∏≠ ËøêË°å‰∏ªÁ®ãÂ∫è 1go run main.go ËøôÊó∂‰ºöÈ°µÈù¢‰ºöÂºπÂá∫‰∫åÁª¥Á†Å Êâ´Á†ÅÂêé‰Ω†ÁöÑÂæÆ‰ø°Â∞±ÂèòÊàê‰∫ÜChatGPT‰∫Ü„ÄÇ ËøôÊòØÊúÄÁªàÁöÑÊïàÊûúÔºåÂçïËÅäÁõ¥Êé•Âèë‰ø°ÊÅØÂç≥ÂèØÊé•Êî∂Âà∞ChatGPTÁöÑÂõûÂ§ç ¬∂ÂØπ‰∫éChatGPTÁöÑÊÄùËÄÉ ChatGPT Á°ÆÂÆûÂæàÂéâÂÆ≥ÔºåÂÆÉÂèØ‰ª•ÂÜôÈÇÆ‰ª∂„ÄÅÁ®øÂ≠ê„ÄÅÁºñÂÜôÁÆÄÂçï‰ª£Á†Å„ÄÅÂèÇ‰∏éÂÜÖÂÆπÂàõ‰ΩúÁ≠âÁ≠âÔºåÁõ∏‰ø°Âú®Êú™Êù•‰∫∫Â∑•Êô∫ËÉΩËÇØÂÆö‰ºöÊõø‰ª£‰∏ÄÈÉ®ÂàÜÁÆÄÂçïÈáçÂ§çÁöÑÂ∑•‰ΩúÔºåËøô‰πüÊòØÁßëÊäÄËøõÊ≠•ÁöÑÁªìÊûú„ÄÇ ÈÇ£Êàë‰ª¨Â∫îËØ•ÊãÖÂøÉÂêóÔºüÂ§ßÂèØ‰∏çÂøÖ„ÄÇ‰∫∫Á±ª‰πãÊâÄ‰ª•ÂèØ‰ª•Âú®È£üÁâ©ÈìæÁöÑÈ°∂Á´ØÔºåÂõ†‰∏∫Êàë‰ª¨Êã•ÊúâÊô∫ÊÖß‰ª•ÂèäÂñÑ‰∫éÂ≠¶‰π†ÔºåÂπ∂ÂÖ∑Â§áÂàõÈÄ†ÂäõÂíåÊÉ≥Ë±°Âäõ„ÄÇAIÊõø‰ª£ÁöÑÊòØËÉΩÂäõÔºåÊ±ΩËΩ¶‰πãÊâÄ‰ª•Êõ¥Â§üÊõø‰ª£È©¨ËΩ¶ÔºåÊòØÂõ†‰∏∫ÂÆÉË∑ëÂæóÂø´Ëøò‰∏çÂÅúÊ≠á„ÄÇAIÁöÑÂ≠òÂú®‰πüÂøÖÁÑ∂ÊòØÊé®Âä®‰∫∫Á±ªÁöÑËøõÊ≠•„ÄÇÂõ†Ê≠§Êàë‰ª¨Â∫îËØ•‰øùÊåÅÂºÄÊîæÔºå‰∏çÊñ≠ÊèêÂçáËá™Â∑±ÁöÑÊ†∏ÂøÉÁ´û‰∫âÂäõÔºåËÆ©Ëøô‰∫õÂ∑•ÂÖ∑Êõ¥Â•ΩÁöÑÊúçÂä°‰∫éÊàë‰ª¨„ÄÇ Â∑•ÂÖ∑‰∏ç‰ºöÊõø‰ª£‰∫∫ÔºåÂΩìÁÑ∂ÔºåÂâçÊèê‰Ω†‰∏çÊòØ‰∏Ä‰∏™Â∑•ÂÖ∑‰∫∫„ÄÇ ÂèÇËÄÉ https://readdevdocs.com/blog/makemoney/‰∏≠ÂõΩÂå∫Ê≥®ÂÜåOpenAIË¥¶Âè∑ËØïÁî®ChatGPTÊåáÂçó.html#ÂâçÊúüÂáÜÂ§á]]></content>
      <categories>
        <category>ChatGPT</category>
      </categories>
      <tags>
        <tag>ChatGPT</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[go error ÊúÄ‰Ω≥ÂÆûË∑µ]]></title>
    <url>%2F2022%2F06%2F10%2F1%2F</url>
    <content type="text"><![CDATA[ÊúâÂà´‰∫éÂÖ∂‰ªñËØ≠Ë®ÄÈîôËØØÂíåÂºÇÂ∏∏ÁöÑÊ¶ÇÂøµÊ®°Á≥äÔºåGoËØ≠Ë®ÄÁõ¥Êé•‰ªéËØ≠Ê≥ïÂ±ÇÈù¢Êèê‰æõÂå∫ÂàÜÈîôËØØÂíåÂºÇÂ∏∏ÁöÑÊú∫Âà∂„ÄÇÈîôËØØÈÄöÂ∏∏ÊòØËâØÊÄßÁöÑÔºåÁ®ãÂ∫è‰∏≠ÂèØËÉΩÂá∫Áé∞ÁöÑÈóÆÈ¢òÔºåÂõ†Ê≠§ÈîôËØØÂ§ÑÁêÜ‰πüË¢´ËßÜ‰∏∫‰∏öÂä°ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇËÄåÂºÇÂ∏∏Âàô‰Ωú‰∏∫ÊÑèÊñô‰πãÂ§ñÁöÑÂ≠òÂú®ËÄåÂá∫Áé∞ÔºåÈÄöÂ∏∏ÊòØÊØÅÁÅ≠ÊÄßÁöÑÔºåÁõ¥Êé•ÂØºËá¥Á®ãÂ∫èÁöÑÂ¥©Ê∫É„ÄÇÊú¨ÊñáÂ∞Ü‰ªéÂ§öÊñπÈù¢Áª¥Â∫¶‰ªãÁªçgolang ÁöÑ error ÔºåÂÆûÈôÖÂ∫îÁî®ÂíåÊúÄ‰Ω≥ÂÆûË∑µÔºåÁõ∏‰ø°ÁúãÂÆåËøôÊñáÁ´†ÂêéÔºå‰Ω†ÂØπ golang‰∏≠ error ËÉΩÊúâ‰∏Ä‰∏™ÂÖ®Èù¢ÁöÑÁêÜËß£„ÄÇ ¬∂golang error ËÆæËÆ°ÁêÜÂøµ Go Error ÁöÑËÆæËÆ°Âì≤Â≠¶‰∏ªË¶ÅÊúâ‰∏§ÁÇπÔºö Â§ÑÁêÜÊâÄÊúâÊΩúÂú®ÁöÑÈîôËØØ Errors Are Value ¬∂Â§ÑÁêÜÊâÄÊúâÊΩúÂú®ÁöÑÈîôËØØ Go ‰ªéÊúÄÂàùËÆæËÆ°Ëµ∑Â∞±Á°ÆÂÆö‰∫Ü‰∏Ä‰∏™ÂéüÂàôÔºöÁ®ãÂ∫è‰∏≠ÁöÑÊâÄÊúâÊΩúÂú®ÁöÑÈîôËØØÈÉΩÂøÖÈ°ªË¢´ÊòéÁ°ÆÂú∞Â§ÑÁêÜ„ÄÇÂÅáÂ¶ÇÊåâÁÖßjavaÁöÑ try catch ÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂ËÆæËÆ°Ôºö 12345678func CopyFile(src, dst string) throws error &#123; r := os.Open(src) defer r.Close() w := os.Create(dst) io.Copy(w, r) w.Close()&#125; os.Open os.Create io.Copy ÈÉΩÂèØËÉΩÂ§±Ë¥•ÂºïÂèëÈîôËØØÔºåÂΩìÈîôËØØÂèëÁîüÊó∂‰ºöÊäõÂá∫ÈîôËØØ throws error Ôºå‰∏çÂêåÁöÑÈîôËØØÂ§ÑÁêÜÁöÑÈÄªËæë‰πü‰∏çÂ§™‰∏ÄÊ†∑ÔºåÊàë‰ª¨Âπ∂‰∏çËÉΩÁõ¥Êé•Áü•ÈÅìÂÖ∑‰ΩìÂì™‰∏™ÂáΩÊï∞Âá∫ÈîôÔºåÂõ†Ê≠§ÈúÄË¶Å‰æùÊ¨°ÂÅöÂá∫Áõ∏Â∫îÁöÑÂ§ÑÁêÜÔºåÂ±û‰∫éÈöêÊô¶Âú∞Â§ÑÁêÜÈîôËØØÁöÑÊñπÊ≥ï„ÄÇgolang Â∏åÊúõÈÅøÂÖçËøôÁßçÊÉÖÂÜµ, ÂÆÉÂ∏åÊúõÊ∏ÖÊ•öÂú∞Â§ÑÁêÜÈîôËØØÔºàerrorÔºâÔºåËÄå‰∏çÊòØÊääÂÆÉÂΩì‰ΩúÂºÇÂ∏∏ÔºàexceptionÔºâ„ÄÇÂõ†Ê≠§golang ËÆæËÆ°ÂéüÂàô‰∏ãÁöÑ‰ª£Á†ÅÈïøËøôÊ†∑Ôºö 1234567891011121314151617181920212223func CopyFile(src, dst string) error &#123; r, err := os.Open(src) if err != nil &#123; return fmt.Errorf("copy %s %s: %v", src, dst, err) &#125; defer r.Close() w, err := os.Create(dst) if err != nil &#123; return fmt.Errorf("copy %s %s: %v", src, dst, err) &#125; if _, err := io.Copy(w, r); err != nil &#123; w.Close() os.Remove(dst) return fmt.Errorf("copy %s %s: %v", src, dst, err) &#125; if err := w.Close(); err != il &#123; os.Remove(dst) return fmt.Errorf("copy %s %s: %v", src, dst, err) &#125;&#125; golang‰ºöÂØπÊØè‰∏Ä‰∏™Â≠òÂú®ÁöÑÊΩúÂú®ÈîôËØØÈÉΩÂÅöÊ£ÄÊü•ÂíåÂ§ÑÁêÜÔºå‰ΩøÁ®ãÂ∫èÊõ¥Âä†ÂÅ•Â£Æ„ÄÇ‰∏•Ê†ºÁöÑÂ∞ÜerrorÂíåexcepitonÂå∫Âà´ÂºÄÊù•„ÄÇ ‰ΩÜËøô‰πü‰ºöÂ∏¶Êù•‰∏Ä‰∏™ÈóÆÈ¢òÔºöÂç≥‰ª£Á†Å‰∏≠ÈáçÂ§çÂá∫Áé∞ÂæàÂ§öÊ¨° if err != nil ÔºåÂèØËØªÊÄßËæÉÂ∑ÆÔºåÊòØ ÊØè‰∏Ä‰∏™ Gopher Êå•‰πã‰∏çÂéªÁöÑÂøÉÁóÖ„ÄÇ ¬∂Errors Are Values Errors Are Values ÈòêËø∞ error ÊòØÂèØ‰ª•Ë¢´ËµãÂÄºÔºåÂç≥ÈÄöËøá‰ª£Á†ÅÊù•Ëá™ÂÆö‰πâ error „ÄÇ ¬∂errorÊé•Âè£ golangËØ≠Ë®ÄÂØπÈîôËØØÁöÑËÆæËÆ°ÈùûÂ∏∏ÁÆÄÊ¥ÅÔºåÂéüÁîüÂÆûÁé∞Â¶Ç‰∏ãÔºö 1234567891011121314// New returns an error that formats as the given text.// Each call to New returns a distinct error value even if the text is identical.func New(text string) error &#123; return &amp;errorString&#123;text&#125;&#125;// errorString is a trivial implementation of error.type errorString struct &#123; s string&#125;func (e *errorString) Error() string &#123; return e.s&#125; ÂØπ‰∫éÂºÄÂèëËÄÖÊù•ËØ¥ÔºåÂäüËÉΩÊòØÊòéÊòæ‰∏çË∂≥ÁöÑÔºåÊØîÂ¶ÇÊàë‰ª¨ÈúÄË¶ÅÁü•ÈÅìÂá∫ÈîôÁöÑÊõ¥Â§ö‰ø°ÊÅØÔºåÂú®‰ªÄ‰πàÊñá‰ª∂ÁöÑÔºåÂì™‰∏ÄË°å‰ª£Á†ÅÁ≠âÁ≠â„ÄÇÊÄé‰πàÂäûÂë¢ÔºüËøôÊ≠£ÊòØgolangËÆæËÆ°ÁöÑÁ≤æÂ¶ô‰πãÂ§Ñ„ÄÇ golang ‰∏≠ÁöÑ error ÊòØÂÖ∂ÂÜÖÁΩÆÁöÑ‰∏Ä‰∏™Êé•Âè£Á±ªÂûãÔºåÂè™Â£∞Êòé‰∫Ü‰∏Ä‰∏™ÊñπÊ≥ï ErrorÔºåÂè™Ë¶ÅÂÆûÁé∞‰∫ÜËøô‰∏™ÊñπÊ≥ïÔºåÂ∞±ÊòØÂÆûÁé∞‰∫ÜerrorÔºåÈÄöËøáËá™ÂÆö‰πâ Error ‰ΩøÂæóÊàë‰ª¨Âú®Â§ÑÁêÜÈîôËØØÊó∂ÊúâÂæàÂ§ßÁöÑÂèëÊå•Á©∫Èó¥„ÄÇËøôÊòØ‰æøÊòØ Errors Are Values ÁöÑÂü∫Á°Ä„ÄÇ 12345// The error built-in interface type is the conventional interface for// representing an error condition, with the nil value representing no error.type error interface &#123; Error() string&#125; ¬∂Errors Are Values ÂÆûË∑µ if err != nil ‰∏ÄÁõ¥Ë¢´ËØüÁóÖÂú®‰ª£Á†Å‰∏≠Âá∫Áé∞Â§™Â§öÊ¨°ÔºåÂèØËØªÊÄßÂæàÂ∑Æ„ÄÇ‰ΩÜÂêàÁêÜÁöÑËÆæËÆ°ÊòØÂèØ‰ª•ÈÅøÂÖçËøôÁßçÊÉÖÂÜµÁöÑ„ÄÇÈÄöËøáÂ∞Üerror Â∞ÅË£ÖÁöÑÊñπÂºèÔºåÂ∞±ÂèØ‰ª•ÈÅøÂÖçÈáçÂ§çÁöÑif err != nil„ÄÇ ¬∂ÈîôËØØÂ§ÑÁêÜ‰ºòÂåñ ÂáèÂ∞ëif err != nil ÊôÆÈÄöÂÜôÊ≥ïÔºö 1234567891011121314151617181920212223func count(r io.Reader) (int, error) &#123; var ( br = bufio.NewReader(r) lines int err error ) for &#123; // ËØªÂèñÂà∞Êç¢Ë°åÁ¨¶Â∞±ËØ¥ÊòéÊòØ‰∏ÄË°å _, err = br.ReadString('\n') lines++ if err != nil &#123; break &#125; &#125; // ÂΩìÈîôËØØÊòØ EOF ÁöÑÊó∂ÂÄôËØ¥ÊòéÊñá‰ª∂ËØªÂèñÂÆåÊØï‰∫Ü if err != io.EOF &#123; return 0, err &#125; return lines, err&#125; ÊúâÊïàËÆæËÆ°ÂáèÂ∞ë if err != nil ÁöÑËÆæËÆ°ÊñπÂºèÔºö 123456789101112func count2(r io.Reader) (int, error) &#123; var ( sc = bufio.NewScanner(r) lines int ) for sc.Scan() &#123; lines++ &#125; return lines, sc.Err()&#125; ¬∂gorm ‰ºòÁßÄÊ°à‰æã ÂÆòÊñπÊ†áÂáÜÂ∫ìÂèäÂæàÂ§ö‰ºòÁßÄÁöÑÂºÄÊ∫êÂ∫ì(gormÔºågo-redis)Â∞±ÈááÁî®‰∫ÜËøôÁßçÊñπÂºèÔºå‰ª•gorm‰∏æ‰æãÔºö ÂÅáËÆæÊúâ‰ª•‰∏ãÂú∫ÊôØÔºåÁî®Êà∑Ë¥≠‰π∞‰∏Ä‰ª∂ÂïÜÂìÅÔºåÊï∞ÊçÆÂ∫ìÁîüÊàê‰∏§Êù°Êï∞ÊçÆÔºåÂêëËÆ¢ÂçïË°®ÊèíÂÖ•‰∏ÄÊù°Êï∞ÊçÆÔºåÂπ∂‰∏îË¥¶Êà∑Ë°®ÂØπÁî®Êà∑ÁöÑ‰ΩôÈ¢ùËøõË°åÊõ¥Êñ∞(ÊöÇ‰∏çËÄÉËôë‰∫ãÁâ©ÂíåÂÖàÂêéÈ°∫Â∫è)ÔºåÂ¶ÇÊûúËÆ¢ÂçïË°®ÊèíÂÖ•Â§±Ë¥•Âàô‰∏çËøõË°åÂêéÁª≠Êìç‰Ωú„ÄÇ Á¨îËÄÖÈÄöËøá‰∏§Ê¨°ÊèíÂÖ•Ê®°ÊãüËØ•Âú∫ÊôØÔºå‰∏ÄËà¨ÁöÑ‰ª£Á†ÅÁºñÂÜôÂ¶Ç‰∏ãÔºö 123456789101112func test(db *gorm.DB) error &#123; if ret := db.Model(&amp;wemediaModel.TWeMediaRegion&#123;&#125;).Create(map[string]interface&#123;&#125;&#123; "order": "test001", &#125;); ret.Error != nil &#123; return ret.Error &#125; db = db.Model(&amp;wemediaModel.TWeMediaRegion&#123;&#125;).Create(map[string]interface&#123;&#125;&#123; "owner": "test_darr_en1", &#125;) return db.Error&#125; Âõ†‰∏∫Ë°®Ê≤°ÊúâorderÔºåownerÂ≠óÊÆµÔºåÊâÄ‰ª•‰ºöÊä•Èîô 1232022/06/13 18:13:52 /Users/tiger/cmy-project/gocms/test/main.go:13 Error 1054: Unknown column 'order' in 'field list'[82.561ms] [rows:0] INSERT INTO `t_we_media_region` (`order`) VALUES ('test001')Error 1054: Unknown column 'order' in 'field list' Â¶ÇÊûúÊèíÂÖ•Ê¨°Êï∞Â¢ûÂ§öÔºåÂ∞±‰ºöÂèòÂæóÂçÅÂàÜÁ¥ØËµòÔºågorm ÊîØÊåÅ‰ª•‰∏ãÂÜôÊ≥ïÔºö 12345678910func test(db *gorm.DB) error &#123; db = db.Model(&amp;wemediaModel.TWeMediaRegion&#123;&#125;).Create(map[string]interface&#123;&#125;&#123; "order": "test001", &#125;) db = db.Model(&amp;wemediaModel.TWeMediaRegion&#123;&#125;).Create(map[string]interface&#123;&#125;&#123; "owner": "test_darr_en1", &#125;) return db.Error&#125; ÂêåÊ†∑Êä•ÈîôÔºåÁ¨¨‰∫åÊù°sqlÂπ∂Êú™ÊâßË°å 1234562022/06/13 18:19:17 /Users/tiger/cmy-project/gocms/test/main.go:24 Error 1054: Unknown column 'order' in 'field list'[62.527ms] [rows:0] INSERT INTO `t_we_media_region` (`order`) VALUES ('test001')2022/06/13 18:19:17 /Users/tiger/cmy-project/gocms/test/main.go:28 Error 1054: Unknown column 'order' in 'field list'; invalid transaction[4.774ms] [rows:0] Error 1054: Unknown column 'order' in 'field list'; invalid transaction ¬∂Ê∫êÁ†ÅÂàÜÊûê 12345678// DB GORM DB definitiontype DB struct &#123; *Config Error error // Â∞Ü error Â∞ÅË£ÖÂà∞DBÂØπË±°‰∏≠ RowsAffected int64 Statement *Statement clone int&#125; Gorm ÁöÑ db ÂØπË±°Â∞ÅË£Ö‰∫ÜËøûÊé•ÈÖçÁΩÆÔºåÈîôËØØÔºåÊâßË°åËØ≠Âè•‰ª•Âèä ËøîÂõûÁªìÊûú„ÄÇÂΩìÊâßË°åÊó∂Âá∫ÈîôÂàôË∞ÉÁî® AddError Â∞ÜÈîôËØØËµãÂÄºÁªô db.Error„ÄÇ ÂêåÊó∂ÔºåCreate Âú®ÊâßË°åsql‰πãÂâç‰ºöÂà§Êñ≠ dbÂØπË±°ÊòØÂê¶Â≠òÂú®Error,Â≠òÂú®Âàô‰∏çÊâßË°å 123456789101112131415161718192021func Create(config *Config) func(db *gorm.DB) &#123; if config.WithReturning &#123; return CreateWithReturning &#125; return func(db *gorm.DB) &#123; if db.Error != nil &#123; // Âú®ÊâßË°åsql‰πãÂâç‰ºöÂà§Êñ≠ dbÂØπË±°ÊòØÂê¶Â≠òÂú®Error,Â≠òÂú®Âàô‰∏çÊâßË°å return &#125; ... // Áï• if !db.DryRun &amp;&amp; db.Error == nil &#123; result, err := db.Statement.ConnPool.ExecContext(db.Statement.Context, db.Statement.SQL.String(), db.Statement.Vars...) if err != nil &#123; // ÂΩìÊâßË°åÊó∂Âá∫ÈîôÂàôË∞ÉÁî® AddError Â∞ÜÈîôËØØËµãÂÄºÁªô db.Error db.AddError(err) return &#125; &#125; ... // Áï• &#125;&#125; ÊâßË°åCreate ËøîÂõûÁöÑdb Êó∂ÈÄöËøádb.getInstance() Êã∑Ë¥ùÁöÑÂâØÊú¨ÔºåÂõ†Ê≠§‰πü‰ºöÂåÖÂê´ÂâçdbÂØπË±°ÁöÑError,Âõ†Ê≠§ÂΩìÂèëÁé∞if db.Error != nil,Âàô‰∏çÂêë‰∏ãÊâßË°å„ÄÇ 123456789101112131415161718192021222324func (db *DB) getInstance() *DB &#123; if db.clone &gt; 0 &#123; tx := &amp;DB&#123;Config: db.Config, Error: db.Error&#125; // Â§çÂà∂ÂéüdbÂØπË±°ÁöÑÊï∞ÊçÆ if db.clone == 1 &#123; // clone with new statement tx.Statement = &amp;Statement&#123; DB: tx, ConnPool: db.Statement.ConnPool, Context: db.Statement.Context, Clauses: map[string]clause.Clause&#123;&#125;, Vars: make([]interface&#123;&#125;, 0, 8), &#125; &#125; else &#123; // with clone statement tx.Statement = db.Statement.clone() tx.Statement.DB = tx &#125; return tx &#125; return db&#125; ËøôÁßçÂØπÈîôËØØÁöÑÂ§ÑÁêÜÊñπÂºè‰ºòÂåñ‰∫ÜÂéüÊúâÁöÑÈáçÂ§çÂà§Êñ≠ÁöÑÈÄªËæëÔºå‰πüÊòØErrors Are Values ËÆæËÆ°ÁöÑ‰∏ÄÁßç‰ΩìÁé∞„ÄÇ ¬∂golang error ‰ΩøÁî® Ê†áÂáÜÂ∫ì errors.New Âíå fmt.Errorf ÂáΩÊï∞Áî®‰∫éÂàõÂª∫ÂÆûÁé∞ error Êé•Âè£ÁöÑÈîôËØØÂØπË±°„ÄÇËøîÂõûerrors.errorStringÁöÑÂÆû‰æãÔºö 12err1 := errors.New("error")err2 = fmt.Errorf("%s", "fmt error") ¬∂golang1.13 ‰ª•ÂâçÁöÑerror Ê≠§Êó∂ÁöÑ error Âè™ËÉΩËá™Â∏¶‰∏Ä‰∏≤ÊñáÊú¨,ÂèØ‰ª•Áî®‰∫éÂÆö‰πâ‰∏Ä‰∫õÂåÖÁ∫ßÂà´ÁöÑÈîôËØØÂèòÈáèÔºåÁÑ∂ÂêéÂú®Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÂ§ñÈÉ®ÂåÖÂèØ‰ª•Áõ¥Êé•ÂØπÊØîÂèòÈáèËøõË°åÂà§ÂÆöÔºåÂú®Ê†áÂáÜÂ∫ìÂΩì‰∏≠Â§ßÈáèÁöÑ‰ΩøÁî®‰∫ÜËøôÁßçÊñπÂºè 1234ErrDivByZero := errors.New("division by zero")if err == ErrDivByZero &#123; //...&#125; Â¶ÇÊûúÊàë‰ª¨ÊÉ≥ÁªôerrorÂ¢ûÂä†‰∏Ä‰∫õÈôÑÂä†ÊñáÊú¨ÔºåÈÄöÂ∏∏Â¶Ç‰∏ãÔºö 1newErr = fmt.Errorf("new error:%v", ErrDivByZero) ‰ΩÜÊòØÈÄöËøáfmt.ErrorfÂáΩÊï∞ÔºåÊòØÂü∫‰∫éÂ∑≤ÁªèÂ≠òÂú®ÁöÑerrÂÜçÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑnewErrÔºåÊàë‰ª¨Â∞Ü‰∏¢Â§±‰∫ÜÂéüÊù•ÁöÑerrÔºåÂ§±ÂéªËøôÂ±ÇÂÖ≥ËÅî„ÄÇ 1234567891011121314var ErrDivByZero = errors.New("division by zero")func div(x, y int) (int, error) &#123; if y == 0 &#123; return 0, ErrDivByZero &#125; return x / y, nil&#125;func main() &#123; _, err := div(10, 0) newErr:= fmt.Errorf("div ÈîôËØØÔºö%s error", err) fmt.Println(err == ErrDivByZero) // true fmt.Println(newErr == ErrDivByZero) // false&#125; ÈÄöÂ∏∏Âè™ËÉΩÈÄöËøáÂ≠óÁ¨¶‰∏≤ÊØîËæÉÂÆûÁé∞Ôºö 1234567891011121314var ErrDivByZero = errors.New("division by zero")func div(x, y int) (int, error) &#123; if y == 0 &#123; return 0, ErrDivByZero &#125; return x / y, nil&#125;func main() &#123; _, err := div(10, 0) newErr:= fmt.Errorf("div ÈîôËØØÔºö%s error", err) fmt.Println(strings.Contains(err.Error(), ErrDivByZero.Error())) // true fmt.Println(strings.Contains(newErr.Error(), ErrDivByZero.Error())) // true&#125; ‰ΩÜËøôÊ†∑ÊòæÁÑ∂ÈÄ†Êàê‰∫ÜÊõ¥È´òÁöÑËÄ¶ÂêàÂ∫¶Ôºå‰∏çÂà©‰∫éÊâ©Â±ïÊÄßÔºåÊòØ‰∏™ÂæàÂ§±Ë¥•ÁöÑÂÆûÁé∞ÊñπÂºè„ÄÇ ¬∂Â∞ÅË£Ö 123456789101112131415func main() &#123; newErr := NewError&#123;err, "ÊâßË°åÂá∫ÈîôÔºö"&#125; fmt.Println(newErr.err == ErrDivByZero) // true&#125;var ErrDivByZero = errors.New("division by zero")type NewError struct &#123; err error msg string&#125;func (e *NewError) Error() string &#123; return e.msg + e.err.Error() &#125; Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂ∞ÜÂéüÊúâÁöÑerror Â∞ÅË£ÖÂú®Êñ∞ÁöÑÁªìÊûÑ‰Ωì‰∏ãÔºå‰ªéËÄå‰øùËØÅ‰∏ç‰∏¢Â§±ÂéüÊú¨errorÂ¢ûÂä†Êñ∞ÁöÑÁâπÊÄß„ÄÇÂú®ÁßçÊñπÂºèÂØπ‰∫éÊèêÂçáerror ÁúüÁöÑÂæàÊúâÁî®ÔºåÊòØ Errors Are ValuesÁöÑÂÆûÁé∞„ÄÇ‰ΩÜÊòæÁÑ∂ÂØπ‰∫éËøΩÂä†ÊèèËø∞ÁöÑÂÆûÁé∞‰∏äÊòæÂæóËøáÈáç‰∫ÜÔºå‰æùÊóß‰∏çÁêÜÊÉ≥. ¬∂Wrapping Error golang 1.13 ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜError WrappingÔºåÂç≥ ErrorÂµåÂ•ó„ÄÇÂèØ‰ª•ÂÆûÁé∞‰∏Ä‰∏™ errorÂµåÂ•óÂè¶‰∏Ä‰∏™errorÔºåÁîüÊàê‰∏Ä‰∏™errorÈîôËØØË∑üË∏™ÈìæÔºå‰πüÂèØ‰ª•ÁêÜËß£‰∏∫ÈîôËØØÂ†ÜÊ†à‰ø°ÊÅØÔºåËøΩÊ∫ØÊ†πÊú¨ÂéüÂõ†Âú®Âì™Èáå„ÄÇ ¬∂fmt.ErrorfÊâ©Â±ï golang Âπ∂Ê≤°ÊúâÊèê‰æõ‰ªÄ‰πàWrapÂáΩÊï∞ÔºåËÄåÊòØÊâ©Â±ï‰∫Üfmt.ErrorfÂáΩÊï∞ÔºåÂä†‰∫Ü‰∏Ä‰∏™%wÂÆûÁé∞ Wrapping Error„ÄÇ 12baseError := errors.New("base error")wrapError := fmt.Errorf("Wrap error: %w", e) ÈòÖËØªÊ∫êÁ†Å 123456789101112131415161718192021222324252627func Errorf(format string, a ...interface&#123;&#125;) error &#123; p := newPrinter() p.wrapErrs = true p.doPrintf(format, a) // Â¶ÇÊûú‰ΩøÁî® %w, Âàô ‰ºöÂ∞Ü ‰º†ÈÄíÁöÑ error ËµãÂÄºÁªô wrappedErrÔºåÊúÄÂêéÂÆû‰æãÂåñÊàêwrapError s := string(p.buf) var err error if p.wrappedErr == nil &#123; err = errors.New(s) &#125; else &#123; err = &amp;wrapError&#123;s, p.wrappedErr&#125; &#125; p.free() return err&#125;type wrapError struct &#123; msg string err error&#125;func (e *wrapError) Error() string &#123; return e.msg&#125;func (e *wrapError) Unwrap() error &#123; // wrapError ÂÆûÁé∞‰∫ÜUnwrapÔºåÁî®‰∫éËøîÂõûË¢´ÂµåÂ•óÁöÑerror return e.err&#125; ¬∂Unwrap ÂáΩÊï∞ ‰º¥ÈöèÁùÄWrapping ErrorÔºågolang1.13 ‰πüÂºïÂÖ•‰∫ÜUnwrapÊú∫Âà∂Ëé∑ÂèñË¢´ÂµåÂ•ó error 123func main() &#123; fmt.Println(errors.Unwrap(wrapError) == baseError) // true&#125; ÈòÖËØªÊ∫êÁ†Å 123456789101112func Unwrap(err error) error &#123; // Á±ªÂûãÂåÖÂê´‰∏Ä‰∏™ËøîÂõûÈîôËØØÁöÑ Unwrap ÊñπÊ≥ï,Âç≥‰∏∫ Wrapping Error u, ok := err.(interface &#123; Unwrap() error &#125;) // Âê¶ÂàôÔºåUnwrap ËøîÂõû nil if !ok &#123; return nil &#125; // Ë∞ÉÁî®Wrapping Error ÁöÑ UnwrapÊñπÊ≥ïËøîÂõûË¢´ÂµåÂ•óÁöÑerrorÔºåË∞ÉÁî®‰∏ÄÊ¨° Unwrap ÂáΩÊï∞Âè™ËÉΩËøîÂõûÊúÄÂ§ñÈù¢ÁöÑ‰∏ÄÂ±Ç error return u.Unwrap()&#125; ¬∂IsÂáΩÊï∞ ‰∏äÈù¢ÊâÄÊúâÁöÑÂà§Êñ≠ÈÉΩÊòØ ==, ‰ΩÜÊòØError ÂµåÂ•óÂêéÂà§Êñ≠ÈúÄË¶ÅËøõË°å UnwrapÂ∏¶Êù•‰∫ÜÂ§çÊùÇÊÄßÔºå‰∏îÈíàÂØπÂ§öÂ±ÇÂµåÂ•óÈúÄË¶ÅÂ§öÊ¨° Unwrap„ÄÇÂÆòÊñπ‰∫éÊòØÊèê‰æõ‰∫Üerrors.IsÂáΩÊï∞Âä†‰ª•ÊîØÊåÅ„ÄÇ Ê∫êÁ†ÅÔºö 123456789101112131415161718192021func Is(err, target error) bool &#123; if target == nil &#123; return err == target &#125; isComparable := reflectlite.TypeOf(target).Comparable() // forÂæ™ÁéØÔºåUnwrap ÊãÜËß£Â§öÂ±ÇÂµåÂ•ó for &#123; if isComparable &amp;&amp; err == target &#123; return true &#125; // Ëá™ÂÆö‰πâerrorÂ¶ÇÊûúÂÆûÁé∞ IsÊñπÊ≥ïÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞Ëá™Â∑±ÁöÑÊØîËæÉÈÄªËæë if x, ok := err.(interface&#123; Is(error) bool &#125;); ok &amp;&amp; x.Is(target) &#123; return true &#125; // UnwrapÈÄöËøá ÊãÜËß£‰∏ÄÂ±ÇÂµåÂ•óÔºåËøîÂõûË¢´ÂµåÂ•óÁöÑerror if err = Unwrap(err); err == nil &#123; return false &#125; &#125;&#125; ¬∂AsÂáΩÊï∞ Âú®golang1.13‰πãÂâçÊ≤°Êúâwrapping errorÔºåÊääerrorËΩ¨‰∏∫ÁâπÂÆöerrorÔºåÈÄöËøáÁ±ªÂûãÊñ≠Ë®ÄÂÆûÁé∞ÔºåÂåÖÊã¨type assertion ÊàñËÄÖ type switchÔºö 1234567891011// type assertionif newErr, ok := err.(*ErrDivByZero); ok &#123; ...&#125;// type switchswitch newErr := err.(type) &#123; case *Err1: ... case *Err2: ...&#125; ‰ΩÜÂÄòËã•error Âá∫Áé∞ÂµåÂ•óÔºå ËøôÁßçÊñπÂºèÂ∞±‰∏çËÉΩÁî®‰∫ÜÔºåÊâÄ‰ª•golang ‰∏∫Êàë‰ª¨Âú®errorsÂåÖÈáåÊèê‰æõ‰∫ÜAsÂáΩÊï∞ÂÆûÁé∞Á±ªÂûãËΩ¨Âåñ„ÄÇ ‰ΩøÁî®Ôºö 1234var divByZero *ErrDivByZeroif errors.As(err, &amp;divByZero) &#123; ...&#125; Ê∫êÁ†Å: 123456789101112131415161718192021222324252627282930313233func As(err error, target interface&#123;&#125;) bool &#123; if target == nil &#123; panic("errors: target cannot be nil") &#125; val := reflectlite.ValueOf(target) typ := val.Type() // targetÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÈùûnilÊåáÈíà if typ.Kind() != reflectlite.Ptr || val.IsNil() &#123; panic("errors: target must be a non-nil pointer") &#125; // targetÊòØ‰∏Ä‰∏™Êé•Âè£ÊàñËÄÖÂÆûÁé∞‰∫ÜerrorÊé•Âè£ if e := typ.Elem(); e.Kind() != reflectlite.Interface &amp;&amp; !e.Implements(errorType) &#123; panic("errors: *target must be interface or implement error") &#125; targetType := typ.Elem() for err != nil &#123; //Á±ªÂûãÊñ≠Ë®ÄÁöÑÂèçÂ∞ÑÂÜôÊ≥ïÔºåÂèçÂ∞ÑÂà§Êñ≠ÊòØÂê¶ÂèØË¢´Ëµã‰∫àÔºåÂ¶ÇÊûúÂèØ‰ª•Â∞±ËµãÂÄºÂπ∂‰∏îËøîÂõûtrue if reflectlite.TypeOf(err).AssignableTo(targetType) &#123; val.Elem().Set(reflectlite.ValueOf(err)) return true &#125; // Ëá™ÂÆö‰πâerrorÂ¶ÇÊûúÂÆûÁé∞ AsÊñπÊ≥ïÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞Ëá™Â∑±ÁöÑÊØîËæÉÈÄªËæë if x, ok := err.(interface&#123; As(interface&#123;&#125;) bool &#125;); ok &amp;&amp; x.As(target) &#123; return true &#125; // forÂæ™ÁéØÔºåUnwrap ÊãÜËß£Â§öÂ±ÇÂµåÂ•ó err = Unwrap(err) &#125; return false&#125; ¬∂github.com/pkg/errors Ê†áÂáÜÂ∫ìÁöÑ error ÊòØ ÈÄöËøá errorString ÂÆûÁé∞ÁöÑÔºåÈùûÂ∏∏Âü∫Á°ÄÔºåÂÄòËã•Êàë‰ª¨ÈúÄË¶ÅÈôÑÂä†‰∏Ä‰∫õÂÖ∂‰ªñ‰ø°ÊÅØÔºàÊØîÂ¶ÇÂ†ÜÊ†à‰ø°ÊÅØÔºâÂ¶Ç‰ΩïÂÆûÁé∞Âë¢Ôºü Âú®errorString ‰∏≠Âä†ÂÖ•Áî®‰∫éÂ≠òÂÇ®Â†ÜÊ†à‰ø°ÊÅØÁöÑstackÂ≠óÊÆµÔºåÂÆû‰æãÂåñerror Êó∂ÔºåÂ∞ÜË∞ÉÁî®ÁöÑÂ†ÜÊ†à‰ø°ÊÅØÂ≠òÂÇ®Âú®Ëøô‰∏™Â≠óÊÆµÈáå„ÄÇÔºå 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869// Ê†áÂáÜÂ∫ì fmt ÂåÖ Êé•Âè£„ÄÇÂÆûÁé∞ÊéßÂà∂Áä∂ÊÄÅÂíåÁ¨¶ÊñáÁöÑËß£ÈáäÊñπÂºèÔºåÁî®‰∫éÂÜôÂÖ•ÁîüÊàêÁöÑÊ†ºÂºèÂåñÊñáÊú¨„ÄÇÂπ∂‰∏îÂèØ‰ª•Ë∞ÉÁî® Sprint(f) Êàñ Fprint(f) Á≠âÊù•ÁîüÊàêÂÆÉÁöÑËæìÂá∫„ÄÇ// %v ÂÄºÁöÑÈªòËÆ§Ê†ºÂºèË°®Á§∫„ÄÇÂΩìËæìÂá∫ÁªìÊûÑ‰ΩìÊó∂ÔºåÊâ©Â±ïÊ†áÂøóÔºà%+vÔºâ‰ºöÊ∑ªÂä†Â≠óÊÆµÂêç// %#v ÂÄºÁöÑGoËØ≠Ê≥ïË°®Á§∫// %T ÂÄºÁöÑÁ±ªÂûãÁöÑGoËØ≠Ê≥ïË°®Á§∫type Formatter interface &#123; Format(f State, verb rune)&#125;// ÂÆö‰πâÁªìÊûÑ‰ΩìËÆ∞ÂΩïÁ®ãÂ∫èËÆ°Êï∞Âô®ÁöÑÂ†ÜÊ†àtype stack []uintptr// ÂÆûÁé∞ Formatter interfacefunc (s *stack) Format(st fmt.State, verb rune) &#123; switch verb &#123; case 'v': switch &#123; case st.Flag('+'): for _, pc := range *s &#123; f := Frame(pc) fmt.Fprintf(st, "\n%+v", f) &#125; &#125; &#125;&#125;// Ëé∑ÂèñÂΩìÂâçÂ†ÜÊ†àËµãÂÄºÁªô stackfunc callers() *stack &#123; const depth = 32 var pcs [depth]uintptr n := runtime.Callers(3, pcs[:]) var st stack = pcs[0:n] return &amp;st&#125;// ËÆ∞ÂΩï stackÁöÑ error structtype fundamental struct &#123; msg string *stack&#125;// ÂÆûÁé∞ error interfacefunc (f *fundamental) Error() string &#123; return f.msg &#125;// ÂÆûÁé∞ Formatter interfaceÔºåÂèØ‰ª•ÈÄöËøáfmt.PrintfÂáΩÊï∞ËæìÂá∫ÂØπÂ∫îÁöÑÈîôËØØ‰ø°ÊÅØ// %s,%v ËæìÂá∫ÈîôËØØ‰ø°ÊÅØÔºå‰∏çÂåÖÂê´Â†ÜÊ†à// %+v ËæìÂá∫ÈîôËØØ‰ø°ÊÅØÂíåÂ†ÜÊ†àfunc (f *fundamental) Format(s fmt.State, verb rune) &#123; switch verb &#123; case 'v': if s.Flag('+') &#123; io.WriteString(s, f.msg) f.stack.Format(s, verb) return &#125; fallthrough case 's': io.WriteString(s, f.msg) case 'q': fmt.Fprintf(s, "%q", f.msg) &#125;&#125;// ÈÄöËøánew ËøîÂõûÊê∫Â∏¶ stack ÁöÑ errorfunc New(message string) error &#123; return &amp;fundamental&#123; msg: message, stack: callers(), &#125;&#125; ÊòØ‰∏çÊòØ‰πü‰∏çÈöæÔºåÂèÇÁÖßËøôÁßçÊñπÂºèÂèØ‰ª•ÂÆûÁé∞Ëá™ÂÆö‰πâÊâ©Â±ï„ÄÇ ‰ª•‰∏äÁöÑ‰ª£Á†ÅÂÖ∂ÂÆûÈÉΩ‰∏çÊòØÊàëÂÜôÁöÑÔºåÊàëÂè™ÊòØÂ∞Ü github.com/pkg/errorsÁöÑÂÆûÁé∞ÂéüÂ∞Å‰∏çÂä®ÁöÑcopy‰∫Ü‰∏Ä‰ªΩÔºåÂÆÉÂäüËÉΩÈùûÂ∏∏Âº∫Â§ßÔºåÂõ†Ê≠§Â§ßÂÆ∂ÂèØ‰ª•Áî®ÂÆÉÊù•Êõø‰ª£Âü∫Á°ÄÂ∫ìÁöÑ error„ÄÇ ¬∂web error ÂºÄÂèëÊúÄ‰Ω≥ÂÆûË∑µ - gin-errors webÂºÄÂèë‰∏ÄÂÆöÁ¶ª‰∏çÂºÄHTTPÁä∂ÊÄÅÁ†ÅÔºå‰∏çÂêåÁöÑHTTPÁä∂ÊÄÅÁ†ÅÈÄöÂ∏∏Ë°®Á§∫ÁöÑÂê´‰πâ‰πü‰∏çÂ§™‰∏ÄÊ†∑Ôºå‰ΩÜÈÉΩÊòØÈÄöÁî®ÁöÑË°®ËææÊñπÂºèÔºåÂπ∂‰∏çËÉΩÁõ¥Êé•ÂèçÂ∫î‰∏öÂä°‰∏äÁöÑÈóÆÈ¢ò„ÄÇÂΩì‰∏öÂä°Â§çÊùÇÂêéÔºåÈÄöÂ∏∏ÈúÄË¶ÅËÆæÁΩÆÈîôËØØÁ†ÅÊù•Ê†áËØÜapiËØ∑Ê±ÇÁöÑÈóÆÈ¢òÔºå‰ºòÂåñÈóÆÈ¢òÊéíÊü•‰ª•Âèä‰∏éË∞ÉÁî®ÊñπÁöÑ‰∫§‰∫í„ÄÇ ÂΩì‰∏öÂä°‰∏≠ÊäõÂá∫ÈîôËØØÔºåËá™ÂÆö‰πâÂºÇÂ∏∏ËÉΩÂåÖÂê´ËØ•ÈîôËØØ‰ø°ÊÅØÔºå‰∏∫ÈóÆÈ¢òÊéíÊü•Êèê‰æõ‰æùÊçÆ„ÄÇ ‰∏öÂä°ÁöÑÈîôËØØÔºåËÉΩÂ§ü‰ª•Â†ÜÊ†à‰ø°ÊÅØ‰øùÂ≠òÔºåÊèêÈ´òÈóÆÈ¢òÊéíÊü•ÁöÑÊïàÁéá„ÄÇ Âõ†Ê≠§ÊàëËßâÂæó‰∏Ä‰∏™Â•ΩÁöÑËá™ÂÆö‰πâerrorÈúÄË¶ÅÂÖ∑Â§á‰ª•‰∏ãÁâπÊÄßÔºö ÂåÖÂê´ÈîôËØØÁ†Å Êä•ÈîôÈîôËØØÁöÑÂ†ÜÊ†à‰ø°ÊÅØ Â¶ÇÊûúÊòØÂÖ∂‰ªñÈîôËØØÂºïÂèëÁöÑÔºåÂêåÊó∂Êê∫Â∏¶ÂéüÁîüÈîôËØØÁöÑ‰ø°ÊÅØ ¬∂Ëá™ÂÆö‰πâerrorÂÆûÁé∞ ¬∂error ÂÆö‰πâ È¶ñÂÖàÊàë‰ª¨ÈúÄË¶ÅÂÆö‰πâÈîôËØØÁ†ÅÔºåÈîôËØØÁ†Å‰πüÂ∫îËØ•‰øùÂ≠òÊèèËø∞‰ø°ÊÅØmessageÔºåÈÄöÂ∏∏ÂÆûÁé∞ÊñπÂºèÊòØÈÄöËøá map Áª¥Êä§ÈîôËØØÁ†Å‰∏émessageÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºåËøôÈáåÊàë‰ª¨ÊòØÁî® stringer ÂÆûÁé∞ÔºåÂÆÉÂèØ‰ª•ÈÄöËøáÊ≥®Èáä Ëá™Âä®ÁîüÊàêstruct ÁöÑ StringÔºå‰ª£Á†ÅÂíå message ÂÜôÂú®‰∏ÄËµ∑ÔºåÁª¥Êä§ÂíåÊü•ÈòÖÈÉΩÊõ¥Âä†Êñπ‰æø„ÄÇ stringerÁöÑ‰ΩøÁî®Ëá™Ë°åÊü•ÈòÖ„ÄÇ ‰∏ãËΩΩstringerÔºö 1go get golang.org/x/tools/cmd/stringer ÂÆö‰πâÈîôËØØÁ†Å 123456789101112type errCode int64 // ÈîôËØØÁ†Å// ÂÆö‰πâerrorCo// ÊâßË°å go generate ÁîüÊàê String ÊñπÊ≥ï//go:generate stringer -type errCode -linecommentconst ( ServerError errCode = 10101 // ÊúçÂä°Âô®ÂÜÖÈÉ®ÈîôËØØ TooManyRequests errCode = 10102 // ËØ∑Ê±ÇÂ§™Â§ö ParamBindError errCode = 10103 // ÂèÇÊï∞‰ø°ÊÅØÊúâËØØ MySQLNoQueryError errCode = 20505 // Êü•ËØ¢Êï∞ÊçÆÂ∫ìÊó†ÁªìÊûú MySQLNoFieldError errCode = 20506 // Êü•ËØ¢Êï∞ÊçÆÂ∫ìÂ≠óÊÆµ‰∏çÂ≠òÂú®) ÈÄöËøástringerÁîüÊàê String ÂáΩÊï∞ 123456789101112131415161718192021222324252627282930313233343536373839// Code generated by "stringer -type errCode -linecomment"; DO NOT EDIT.package errorsimport "strconv"func _() &#123; // An "invalid array index" compiler error signifies that the constant values have changed. // Re-run the stringer command to generate them again. var x [1]struct&#123;&#125; _ = x[ServerError-10101] _ = x[TooManyRequests-10102] _ = x[ParamBindError-10103] _ = x[MySQLNoQueryError-20505] _ = x[MySQLNoFieldError-20506]&#125;const ( _errCode_name_0 = "ÊúçÂä°Âô®ÂÜÖÈÉ®ÈîôËØØËØ∑Ê±ÇÂ§™Â§öÂèÇÊï∞‰ø°ÊÅØÊúâËØØ" _errCode_name_1 = "Êü•ËØ¢Êï∞ÊçÆÂ∫ìÊó†ÁªìÊûúÊü•ËØ¢Êï∞ÊçÆÂ∫ìÂ≠óÊÆµ‰∏çÂ≠òÂú®")var ( _errCode_index_0 = [...]uint8&#123;0, 21, 33, 51&#125; _errCode_index_1 = [...]uint8&#123;0, 24, 54&#125;)func (i errCode) String() string &#123; switch &#123; case 10101 &lt;= i &amp;&amp; i &lt;= 10103: i -= 10101 return _errCode_name_0[_errCode_index_0[i]:_errCode_index_0[i+1]] case 20505 &lt;= i &amp;&amp; i &lt;= 20506: i -= 20505 return _errCode_name_1[_errCode_index_1[i]:_errCode_index_1[i+1]] default: return "errCode(" + strconv.FormatInt(int64(i), 10) + ")" &#125;&#125; ÂÆö‰πâËá™ÂÆö‰πâerror , ÂÖ∂ÂåÖÂê´‰∫ÜerrCode Âíå ÂéüÊú¨ÁöÑ errorÔºåËøôÊ†∑Êàë‰ª¨Â∞±Êã•Êúâ‰∫ÜÈîôËØØÁ†ÅÔºåÂπ∂‰∏îËøòÊê∫Â∏¶ÂéüÁîüÈîôËØØ‰ø°ÊÅØ 123456789101112type customError struct &#123; Code errCode `json:"code"` // ‰∏öÂä°Á†Å Err error&#125;func (e *customError) Error() string &#123; errMsg := "" if e.Err != nil &#123; errMsg = e.Err.Error() &#125; return fmt.Sprintf("code: %d, message: %s, error: %s ", e.Code, e.Code.String(), errMsg)&#125; ÂΩìÁÑ∂Êàë‰ª¨ËøòÈúÄË¶ÅÂæóÂà∞ÈîôËØØÁöÑÂ†ÜÊ†à‰ø°ÊÅØÔºåËøôÊó∂github.com/pkg/errors‰æøÊ¥æ‰∏äÁî®Âú∫‰∫Ü 1234567891011func (i errCode) WrapWithMessage(err error, message string) error &#123; // ‰∏∫ customError Ê∑ªÂä† stack Âπ∂ÈôÑÂä†‰ø°ÊÅØ return errors.Wrap(&amp;customError&#123; Code: i, Err: err, &#125;, message)&#125;func (i errCode) Wrap(err error) error &#123; // ‰∏∫customError Ê∑ªÂä† stack return errors.Wrap(&amp;customError&#123; Code: i, Err: err, &#125;, "")&#125; Áî±Ê≠§Êàë‰ª¨ÁöÑËá™ÂÆö‰πâerror ÂàôÂü∫Êú¨ÂÆûÁé∞ ¬∂responseÂÆö‰πâ Êé•‰∏ãÊù•ÂØπÊé•Âè£ÁöÑËøîÂõûÊ†ºÂºèËøõË°åÂÆö‰πâ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849type Response struct &#123; Data interface&#123;&#125; `json:"data,omitempty"` // ËøîÂõûÁªìÊûú ErrMsg string `json:"err_msg,omitempty"` // ÈîôËØØ‰ø°ÊÅØ ErrCode errCode `json:"err_code,omitempty"` // ÈîôËØØÁä∂ÊÄÅÁ†Å IsSuccess bool `json:"is_success"` // ËØ∑Ê±ÇÁªìÊûú&#125;const ( Fail = false SUCCESS = true)// Result ÈÄöÁî®ËøîÂõûÊ†ºÂºèfunc Result(httpCode int, data interface&#123;&#125;, errCode errCode, ErrMsg string, isSuccess bool, c *gin.Context) &#123; c.JSON(httpCode, Response&#123; data, ErrMsg, errCode, isSuccess, &#125;)&#125;// ResultWithErrCode ÈÄöÁî®ËøîÂõûÊ†ºÂºè Êê∫Â∏¶errCodefunc ResultWithErrCode(httpCode int, data interface&#123;&#125;, errCode errCode, isSuccess bool, c *gin.Context) &#123; Result(httpCode, data, errCode, errCode.String(), isSuccess, c)&#125;// ParamBindErrorResult ÂèÇÊï∞ÁªëÂÆöÂºÇÂ∏∏ËøîÂõûfunc ParamBindErrorResult(ErrMsg string, c *gin.Context) &#123; c.JSON(http.StatusBadRequest, Response&#123; ErrMsg: ErrMsg, ErrCode: ParamBindError, &#125;)&#125;func ResultOk(data interface&#123;&#125;, c *gin.Context) &#123; c.JSON(http.StatusOK, Response&#123; Data: data, IsSuccess: SUCCESS, &#125;)&#125;func ResultFail(httpCode int, errCode errCode, c *gin.Context) &#123; c.JSON(httpCode, Response&#123; ErrMsg: errCode.String(), ErrCode: errCode, IsSuccess: Fail, &#125;)&#125; ¬∂error Áªü‰∏ÄÂ§ÑÁêÜ Âú®golang ‰∏≠ÔºåÂáΩÊï∞Âêåpython‰∏ÄÊ†∑Ë¢´ËßÜ‰∏∫‰∏ÄÁ≠âÂÖ¨Ê∞ëÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Â∞ÜÈîôËØØÂ§ÑÁêÜËøõË°åÁªü‰∏ÄÁöÑÂ∞ÅË£Ö 123456789101112131415161718192021222324252627func IsValidationError(err error) bool &#123; _, ok := err.(validator.ValidationErrors) return ok&#125;func ErrWrapper(handler func(g *gin.Context) (interface&#123;&#125;, error)) func(*gin.Context) &#123; return func(context *gin.Context) &#123; data, err := handler(context) if err != nil &#123; var customErr = new(customError) if errors2.As(err, &amp;customErr) &#123; ResultFail(http.StatusBadRequest, customErr.Code, context) &#125; else if IsValidationError(err) &#123; ParamBindErrorResult(err.Error(), context) &#125; else &#123; ResultFail(http.StatusInternalServerError, ServerError, context) &#125; // Ëá™Ë°åÊõ¥ÊîπÊàêÁâπÂÆöÁöÑlog log.Printf("url: %s ,erorr: %+v", context.Request.URL, err) &#125; else &#123; ResultOk(data, context) &#125; &#125;&#125; ¬∂demo Êàë‰ª¨ÂèØ‰ª•Â∞ÜËá™ÂÆö‰πâerror Â∫îÁî®‰∫égin Ê°ÜÊû∂‰∏≠ÔºåËøôÈáåÊèê‰æõ‰∏Ä‰ªΩÊàëÂÜôÁöÑdemoÔºå‰ªÖ‰æõÂèÇËÄÉÔºö gin-errors-demo ¬∂tips ÊúÄËøëÔºågolang Á§æÂå∫ÊúâÂèëËµ∑‰∫Ü‰∏Ä‰∏™Êñ∞ÊèêÊ°à ÂæàÂ§öÊó∂ÂÄôÊàë‰ª¨Âú®Êî∂Âà∞ÈîôËØØ‰ø°ÊÅØÊó∂ÔºåËøîÂõûÂ†ÜÊ†àÂπ∂Êèê‰æõÂÖ∂‰ªñ‰ø°ÊÅØÔºà‰æãÂ¶ÇÔºö‰∏öÂä°Áä∂ÊÄÅÁ†ÅÔºâÊó∂ÔºåÂ∞±Âè™ËÉΩÂêëÊàë‰ª¨ÂâçÈù¢ÂÆö‰πâÁöÑcustomErrorÈÇ£Ê†∑Â∞ÜÂéüÁîüerror ÂåÖÂê´ËøõÂéª„ÄÇ Êñ∞ÊèêÊ°àÊòØÂ∏åÊúõÂú®Ê†áÂáÜÂ∫ì errors ‰∏≠ÂÆûÁé∞‰∏Ä‰∏™Êõ¥ÁÆÄÂçïÁöÑÂáΩÊï∞Êù•ËææÂà∞ËøôÁßçÊïàÊûúÔºåÊîØÊåÅÂ∞Ü‰ªª‰ΩïÈîôËØØ‰∏é‰ªª‰ΩïÂÖ∂‰ªñÈîôËØØÂåÖË£ÖÂú®‰∏ÄËµ∑Ôºå‰ªéËÄå‰ΩøÂÆÉ‰ª¨ÂΩ¢Êàê‰∏Ä‰∏™Êñ∞ÁöÑÂåÖË£ÖÈîôËØØÂàóË°®„ÄÇ Â¶Ç‰∏ã‰ª£Á†Å 12// With returns an error that wraps err with other. func With(err, other error) error Ëøô‰∏™Ë¢´ÂåÖË£πËµ∑Êù•ÁöÑÈîôËØØÁ±ª‰ºº‰∫éÈìæË°®ÔºåÂèØ‰ª•Â§çÁî® errors.Unwrap Êù•ÈÅçÂéÜÂàóË°®„ÄÇËÄåÁ±ªÈìæË°®Â≠òÂÇ®ÔºåÂ∞±ÊúâÂÖàÂêéÈ°∫Â∫èÁöÑÈóÆÈ¢ò„ÄÇ Âú® With ÂáΩÊï∞‰∏≠Ôºåother ÂèÇÊï∞ÁöÑÈîôËØØÂ∞Ü‰ºöÊîæÂú®ÂåÖË£ÖÈîôËØØÂàóË°®ÁöÑÂ§¥ÈÉ®„ÄÇÂ¶ÇÊûúÂú®Ë∞ÉÁî® With ÂáΩÊï∞Êó∂ÊòØ With(b-&gt;a, d-&gt;c)ÔºåÂëàÁé∞Âú®ÂÜÖÁöÑÈîôËØØÂàóË°®ÊòØÔºöd-&gt;c-&gt;b-&gt;a„ÄÇ errors.With(err, other).Error()Ôºö other.Error() + &quot;: &quot; + err.Error() Â¶ÇÊûúÂú®‰∏ç‰πÖÁöÑÂ∞ÜÊù•ÔºåËøô‰∏™ÊèêÊ°àÁúüËøõÂÖ•‰∫Ügolang ÁöÑÂéüÁîüÂ∫ìÔºåÊàë‰ª¨ÁöÑËá™ÂÆö‰πâÈîôËØØÂÆûÁé∞Â∞±Êõ¥ÁÆÄÂçï‰∫ÜÔºåÂÆÉËÆ©errorÂÆûÁé∞Âè™ÈúÄË¶ÅËÄÉËôëËá™Ë∫´ÁöÑÈÄªËæëÂç≥ÂèØÔºå‰ª•‰∏ã‰∏∫ÂÖ∑‰ΩìÂÆûÁé∞ 123456789type errCode int64func (i *errCode) Error() string &#123; return fmt.Sprintf("code: %d, message: %s ", e, e.String())&#125;func (i errCode) Wrap(err error) error &#123; return errors.Wrap(errors.With(i, err))&#125; ‰ª•‰∏äÂ∞±ÊòØÊàëÂØπ go error ÁöÑÁêÜËß£ÔºåÂ∏åÊúõÂØπÂ§ßÂÆ∂ËÉΩÊúâÂêØÂèë ÂèÇËÄÉËµÑÊñô Go Error ÁöÑËÆæËÆ°Âì≤Â≠¶ Â¶Ç‰Ωï‰ºòÈõÖÁöÑ Golang ÈîôËØØÂ§ÑÁêÜ[Ëá™ÂÆö‰πâÂºÇÂ∏∏] GoÈîôËØØÂ§ÑÁêÜÊúÄ‰Ω≥ÂÆûË∑µ GoËØ≠Ë®Ä(golang)ÁöÑÈîôËØØ(error)Â§ÑÁêÜÁöÑÊé®ËçêÊñπÊ°à GoËØ≠Ë®Ä(golang)Êñ∞ÂèëÂ∏ÉÁöÑ1.13‰∏≠ÁöÑError WrappingÊ∑±Â∫¶ÂàÜÊûê È™öÁàÜ‰∫Ü‚Ä¶ Go ÈîôËØØÂ§ÑÁêÜ‰∏≠ÂÜçÂ•ó‰∏™Â®ÉÔºåËÉΩËß£ÂÜ≥ÁÉ¶ÊÅº‰∏çÔºü ÊúÄ‰Ω≥ÂÆûË∑µ‰πãGolangÈîôËØØÂ§ÑÁêÜ]]></content>
      <categories>
        <category>golang</category>
      </categories>
      <tags>
        <tag>Ê∫êÁ†Å</tag>
        <tag>golang</tag>
        <tag>error</tag>
        <tag>design</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macÂçáÁ∫ßË∏©ÂùëÂÆûÂΩï]]></title>
    <url>%2F2022%2F04%2F15%2F1%2F</url>
    <content type="text"><![CDATA[Êò®Â§©Âú®ÂÆ∂ÁúãËßÜÈ¢ëÔºåÂ´åÁîµËÑëÂ±èÂπïÂ§™Â∞èÔºåÂ•à‰ΩïÊ≤°ÊúâÊòæÁ§∫Â±èÔºå‰∫éÊòØÊãøÂá∫Ëá™Â∑±ÁöÑipadÂΩì‰ΩúÂâØÂ±èÔºåÂèØÊÄé‰πàÈÉΩËøû‰∏ç‰∏äÔºåemo‰∏≠‰∏ãÊÑèËØÜÁúãÂà∞mac ÁöÑÁ≥ªÁªüÂÅèÂ•ΩËÆæÁΩÆÈáåÊèêÈÜíÊàëmacÂçáÁ∫ßÔºåÊàë‰∏™‰∫∫ÂØπ‰∫éËΩØ‰ª∂ÁâàÊú¨ÂçáÁ∫ß‰∏ÄÁõ¥ÊòØÈùûÂ∏∏ÁÉ≠Ë°∑ÁöÑÔºåÂØπÊñ∞‰∫ãÁâ©ÁöÑÊé•ÂèóÁ®ãÂ∫¶‰πüÊòØÈùûÂ∏∏È´òÁöÑÔºå‰∫éÊòØ‰πéÂ∞±Â∞Ümac ËøõË°å‰∫ÜÁâàÊú¨ÂçáÁ∫ßÔºå‰ΩÜ‰ΩÜ‰ΩÜÊòØÂë¢ÔºüËøòÁúüÂèëÁé∞‰∫Ü‰∏ÄÂ†ÜÂùëÔºåËÄÅÊ≥™Á∫µÊ®™ÂëÄÔºåÂ∏åÊúõÂ§ßÂÆ∂‰πüËÉΩÂºï‰ª•‰∏∫ÊàíÂêßÔºÅüò≠üò≠ ‰ª•‰∏ãÊòØÂçáÁ∫ßÂêéÁöÑÊú∫Âô®Ê¶ÇËßà ¬∂Cannot Run GIt MacOSÂçáÁ∫ßÂêéÔºåÊàëÊâìÂºÄgoland ÂèëÁé∞ git ÁöÑÊñá‰ª∂È¢úËâ≤Ê†áËÆ∞Ê∂àÂ§±ÔºåÂêåÊó∂Âè≥‰∏ãËßíÂá∫Áé∞ÈîôËØØÂºπÊ°ÜÔºö Âú®ÊéßÂà∂Âè∞ËæìÂÖ•git --versionÔºå‰πüÊòØÊä•ÈîôÔºö 1xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun ¬∂Ëß£ÂÜ≥ 1xcode-select --install Ê≠§Êó∂‰ºöÂá∫Áé∞ÂºπÊ°Ü ÁÇπÂáª‚ÄúÂÆâË£Ö‚ÄùÔºåÊ†πÊçÆÊèêÁ§∫ÂÆâË£ÖÂç≥ÂèØ„ÄÇ 12git --versiongit version 2.30.1 (Apple Git-130) ÊâìÂºÄgoland,ËøòÊòØ‰∏çË°åÂëÄÔºåÊÄé‰πàÂäûÂë¢Ôºü ÈáçÊñ∞ÈÖçÁΩÆ‰∏Ä‰∏ãgit Âêß 12 which git/usr/bin/git ÂØπgolandÈÖçÁΩÆ ÈáçÂêØ‰∏Ä‰∏ãgoland,ok‰∫ÜÔºåÁªà‰∫éÂèàÂèØ‰ª•gggggit ‰∫Ü„ÄÇ ¬∂/usr/bin/python: bad interpreter ÂÖ¨Âè∏Ë∑≥ÊùøÊú∫ÊØèÊ¨°ÁôªÈôÜÈÉΩÈúÄË¶Å‰ΩøÁî®Âä®ÊÄÅÂØÜÈí•ÔºåÈÄöËøáÂÆÅÁõæ‰ª§ÁâåÈÖçÁΩÆÔºåËøûÊé•ÂèòÂæóÈùûÂ∏∏ÁπÅÁêêÔºåÂõ†Ê≠§ÊàëÈÄöËøá‰ΩøÁî®ITerm profiles ÈÖçÁΩÆËÑöÊú¨ÂÆûÁé∞‰∫ÜËá™Âä®Ëé∑ÂèñÂØÜÈí•‰∏ÄÈîÆÁôªÂΩïÔºå‰ΩÜÊòØÂçáÁ∫ßÂêé‰ΩøÁî®‰∏ç‰∫ÜÔºåÂá∫Áé∞‰ª•‰∏ãÈîôËØØ ÊàëÁ¨¨‰∏ÄÊ≠•ÂéªÁúãÁúã /usr/bin/python ÊòØÂê¶Â≠òÂú®,ÂèëÁé∞ÊûúÁÑ∂‰∏çÂ≠òÂú®‰∫ÜÔºåËæìÂÖ•pythonÂ§±Ë¥• Âè™ËÉΩËæìÂÖ•python3Ôºåpython2 ‰πüÂ§±Êïà‰∫ÜÔºåÊÄé‰πàÂõû‰∫ãÂë¢Ôºü Âú®macOS Monterey 12.3 ÁöÑ beta ÂèëË°åËØ¥Êòé‰∏≠ÔºåApple Â£∞ÊòéÁõÆÂΩï /usr/bin/Python Â∞ÜË¢´ÂÆåÂÖ®Âà†Èô§„ÄÇ Â§©ÂùëÂëÄÔºåÂ§©ÂùëÂëÄ brew Âπ∂Êú™ÊâæÂà∞ python2ÁöÑÂåÖÔºåÁúãÊù•python2ÊòØÂΩªÂ∫ïË¢´macÊîæÂºÉ‰∫Üüò≠ ‰∏çËøáÔºåÊÉ≥ÊÉ≥‰πüÂæàÊ≠£Â∏∏Ôºåpython3 2008ÈóÆ‰∏ñÔºå‰ΩÜÊòØpython2Ôºåpython3 Âú®ÂæàÈïø‰∏ÄÊÆµÊó∂Èó¥ÂÖ±Â≠òÔºå Á§æÂå∫‰∏ÄÁõ¥È•±Âèó‰∏§‰∏™Â§ßÁâàÊú¨ÁöÑÊëßÊÆãÔºåÂÆòÊñπÊ≠£ÂºèÂÆ£Â∏ÉÔºåPython2Â∞Ü‰∫é2020Âπ¥1Êúà1Êó•ÂÅúÊ≠¢Êõ¥Êñ∞ÂíåÁª¥Êä§„ÄÇ‰∫∫ÊÄªË¶ÅÂêëÂâçÁúãÁöÑÔºåpython‰πüÂú®ÂêëÊõ¥Â•ΩÁöÑÊñπÂêëÂèëÂ±ïÔºåÂåÖË¢±ÊòØËØ•Âç∏‰∏ÄÂç∏‰∫ÜÔºåÁü≠ÊúüÈòµÁóõÊâçËÉΩÁùÄÊÄ•Êõ¥ÈïøÁöÑÊú∫ÈÅá„ÄÇ Python ÊòØÊàëÂ∑•‰ΩúÂêé‰∏ÄÁõ¥‰ΩøÁî®ÁöÑËØ≠Ë®ÄÔºåËôΩÁÑ∂Â≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºåÂæóÁõä‰∫éÂÆÉÁöÑÁÅµÊ¥ªÔºå‰æøÊç∑Ôºå‰∏ÄÁõ¥ÊòØÊàëÈùûÂ∏∏ÂñúÊ¨¢ÁöÑ‰∏ÄÈó®ËØ≠Ë®Ä„ÄÇ‰πüÂ∏åÊúõÊï¥‰∏™Á§æÂå∫Ê¨£Ê¨£ÂêëËç£ÔºåËì¨ÂãÉÂèëÂ±ï„ÄÇ ‰∫∫ÁîüËã¶Áü≠ÔºåÊàëÁî®python„ÄÇ respectÔºÅÔºÅÔºÅÔºÅÔºÅ]]></content>
      <categories>
        <category>ÊùÇË∞à</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>ÊùÇË∞à</tag>
        <tag>mac</tag>
        <tag>Monterey</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂæÆÊúçÂä°]]></title>
    <url>%2F2022%2F04%2F09%2F1%2F</url>
    <content type="text"><![CDATA[Âçï‰ΩìÊû∂ÊûÑÈöèÁùÄ‰∏öÂä°‰ΩìÈáèÁöÑÂ¢ûÂ§ßÔºåÂ∫îÁî®‰ºöÂèòÂæóË∂äÂèëÂ§çÊùÇÔºåÂç≥‰æøÂÜÖÈÉ®Ê®°ÂùóËÆæËÆ°ÁöÑÈùûÂ∏∏Ê∏ÖÊô∞Ôºå‰ΩÜ‰πü‰ºöÈÄ†ÊàêÂèØÈù†ÊÄßÈôç‰ΩéÔºåÊúçÂä°ÂêØÂä®ÊÖ¢ÔºåÂçïÊ®°ÂùóÊó†Ê≥ïÊ∞¥Âπ≥Êâ©Â±ïÔºåÊâ©Â±ïÊÄßÂ∑ÆÁ≠â‰∏ÄÁ≥ªÂàóÈóÆÈ¢òÔºåÊ≠§Êó∂Êàë‰ª¨ÈúÄË¶ÅÂØπÂÖ∂ËøõË°åÊãÜÂàÜ„ÄÇ‰ΩÜÊòØ‰ªéÊ®°ÂùóÁõ¥Êé•Â∫îÁî®ÂÜÖË∞ÉÁî®ÂèòÊõ¥ÊàêÊúçÂä°‰πãÂâçÁöÑË∞ÉÁî®ÂäøÂøÖ‰ºöÁÖßÊàêÊñ∞ÈóÆÈ¢òÔºåÂ¶ÇÊµãËØïÁöÑ‰æùËµñÔºåÈÉ®ÁΩ≤ÁöÑÂ§çÊùÇÂ∫¶ÔºåÈÄö‰ø°ÁöÑÊó∂Âª∂ÔºåÂ¶Ç‰ΩïÂéªÊúâÊïàËß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢òÂë¢ÔºåÂæÆÊúçÂä°Êû∂ÊûÑÁî±Ê≠§ËÄåÁîü„ÄÇ ¬∂ÂæÆÊúçÂä°Ê¶ÇËßà ¬∂SOA SOAÔºàService Oriented ArchitectureÔºâÈù¢ÂêëÊúçÂä°ÁöÑÊû∂ÊûÑÔºåÊòØÂØπÂçï‰ΩìÂ∫îÁî®ÁöÑ‰∏ÄÁßçËÆæËÆ°‰ºòÂåñ„ÄÇÂú®SOAÊû∂ÊûÑ‰∏≠ÔºåÊúçÂä°Ë¢´ÊãÜÂàÜÊàêÂ§ö‰∏™ÊúçÂä°Ôºå ÊúçÂä°‰πãÈó¥ÈÄöËøáÁõ∏‰∫í‰æùËµñÊàñËÄÖÈÄöËøáÈÄö‰ø°Êú∫Âà∂ÔºåÊù•ÂÆåÊàêÁõ∏‰∫íÈÄö‰ø°ÁöÑÔºåÊúÄÁªàÊèê‰æõ‰∏ÄÁ≥ªÂàóÁöÑÂäüËÉΩ„ÄÇ ¬∂ESB ESBÔºàEnterprise Service BusÔºâ‰ºÅ‰∏öÊúçÂä°ÊÄªÁ∫øÔºåÂÉè‰∏ÄÊ†πÁÆ°ÈÅìÔºåÁî®Êù•ËøûÊé•ÂêÑ‰∏™ËäÇÁÇπÔºåËÆ©‰∏çÂêåÁöÑÊúçÂä°‰∫íËÅî‰∫íÈÄö„ÄÇESBÊòØ‰∏ÄÁßçÂú®ÊùæÊï£ËÄ¶ÂêàÁöÑÊúçÂä°ÂíåÂ∫îÁî®‰πãÈó¥Ê†áÂáÜÁöÑÈõÜÊàêÊñπÂºè„ÄÇESBÊòØÂú®SOAÊû∂ÊûÑ‰∏≠ÂÆûÁé∞ÊúçÂä°Èó¥Êô∫ËÉΩÂåñÈõÜÊàê‰∏éÁÆ°ÁêÜÁöÑ‰∏≠‰ªã„ÄÇ ¬∂ÂæÆÊúçÂä° ÂæÆÊúçÂä°ÊòØSOA ÁöÑÊúÄ‰Ω≥ÂÆûË∑µÔºåÂæÆÊúçÂä°Êû∂ÊûÑÊõ¥Âº∫Ë∞ÉÁöÑ‰∏Ä‰∏™ÊòØ‰∏öÂä°ÈúÄË¶ÅÂΩªÂ∫ïÁöÑÁªÑ‰ª∂ÂåñÂíåÊúçÂä°ÂåñÔºå‰øùËØÅ‰∫ÜÊúçÂä°ÁöÑÂçï‰∏ÄËÅåË¥£„ÄÇÂæÆÊúçÂä°ÊòØÂéª‰∏≠ÂøÉÂåñÁöÑÔºåÂéªÊéâESB‰ºÅ‰∏öÊÄªÁ∫øÔºåÂÆûÁé∞ÁúüÊ≠£ÁöÑÁªÑ‰ª∂Âåñ„ÄÇÂêåÊó∂ÂæÆÊúçÂä°ÊîØÊåÅÊåÅÁª≠ÈõÜÊàêÂíåÊåÅÁª≠‰∫§‰ªòÔºåÂÆûÁé∞ËΩªÊùæÈÉ®ÁΩ≤„ÄÇ ¬∂ÂæÆÊúçÂä°‰ºòÁÇπ ÈÄªËæëÊ∏ÖÊô∞ Áî±‰∫éÂæÆÊúçÂä°ÁöÑÂçï‰∏ÄËÅåË¥£„ÄÇÂæÆÊúçÂä°ÁöÑ‰∏öÂä°ÊòéÁ°ÆÔºåÂú®ÈÄªËæë‰∏äÂèòÂæóÊ∏ÖÊô∞ËÄåÁÆÄÂçïÔºå‰ªéËÄåÊèêÂçáÂæÆÊúçÂä°ÁöÑÂèØÁª¥Êä§ÊÄßÔºåÂΩìÂØπ‰∏Ä‰∏™ÂæÆÊúçÂä°ËøõË°å‰øÆÊîπÊó∂ÔºåËÉΩÂ§üÊõ¥ÂÆπÊòìÂàÜÊûêÂà∞Ëøô‰∏™‰øÆÊîπÂà∞Â∫ï‰ºö‰∫ßÁîü‰ªÄ‰πàÂΩ±ÂìçÔºå‰ªéËÄåÈÄöËøáÂÆåÂ§áÁöÑÊµãËØï‰øùËØÅ‰øÆÊîπË¥®Èáè„ÄÇ ÁÆÄÂåñÈÉ®ÁΩ≤ Âú®‰∏Ä‰∏™ÂçïÂùóÁ≥ªÁªü‰∏≠ÔºåÂè™Ë¶Å‰øÆÊîπ‰∫Ü‰∏ÄË°å‰ª£Á†ÅÔºåÂ∞±ÈúÄË¶ÅÂØπÊï¥‰∏™Á≥ªÁªüËøõË°åÈáçÊñ∞ÁöÑÊûÑÂª∫„ÄÅÊµãËØïÔºåÁÑ∂ÂêéÂ∞ÜÊï¥‰∏™Á≥ªÁªüËøõË°åÈÉ®ÁΩ≤„ÄÇËÄåÂæÆÊúçÂä°ÂàôÂèØ‰ª•ÂØπ‰∏Ä‰∏™ÂæÆÊúçÂä°ËøõË°åÈÉ®ÁΩ≤ÔºåÂèØ‰ª•Êõ¥È¢ëÁπÅÁöÑÂéªÊõ¥ÊîπÊàë‰ª¨ÁöÑËΩØ‰ª∂ÔºåÈÄöËøáÂæà‰ΩéÁöÑÈõÜÊàêÊàêÊú¨ÔºåÂø´ÈÄüÁöÑÂèëÂ∏ÉÊñ∞ÁöÑÂäüËÉΩ„ÄÇ ÂèØÊâ©Â±ï ÈááÁî®ÂæÆÊúçÂä°ÁöÑÁ≥ªÁªüÁõ∏ÂØπÂçïÂùóÁ≥ªÁªüÂèØ‰ª•ÈíàÂØπÂçï‰∏Ä‰∏öÂä°Ê®°ÂùóËøõË°åÊ®™ÂêëÊâ©Â±ïÔºåÂÖ∑Â§áÊõ¥Â•ΩÁöÑÂèØÊâ©Â±ïÊÄß„ÄÇ ÁÅµÊ¥ªÁªÑÂêà Âú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÔºåÂèØ‰ª•ÈÄöËøáÁªÑÂêàÂ∑≤ÊúâÁöÑÂæÆÊúçÂä°‰ª•ËææÂà∞ÂäüËÉΩÈáçÁî®ÁöÑÁõÆÁöÑ„ÄÇ ÊäÄÊúØÂºÇÊûÑ Âú®‰∏Ä‰∏™Â§ßÂûãÁ≥ªÁªü‰∏≠Ôºå‰∏çÂêåÁöÑÂäüËÉΩÂÖ∑Êúâ‰∏çÂêåÁöÑÁâπÁÇπÔºåÂπ∂‰∏î‰∏çÂêåÁöÑÂõ¢ÈòüÂèØËÉΩÂÖ∑Â§á‰∏çÂêåÁöÑÊäÄÊúØËÉΩÂäõ„ÄÇÂõ†‰∏∫ÂæÆÊúçÂä°Èó¥ÊùæËÄ¶ÂêàÔºå‰∏çÂêåÁöÑÂæÆÊúçÂä°ÂèØ‰ª•ÈÄâÊã©‰∏çÂêåÁöÑÊäÄÊúØÊ†àËøõË°åÂºÄÂèë„ÄÇ È´òÂèØÈù† ÂæÆÊúçÂä°Èó¥Áã¨Á´ãÈÉ®ÁΩ≤Ôºå‰∏Ä‰∏™ÂæÆÊúçÂä°ÁöÑÂºÇÂ∏∏‰∏ç‰ºöÂØºËá¥ÂÖ∂ÂÆÉÂæÆÊúçÂä°ÂêåÊó∂ÂºÇÂ∏∏„ÄÇÈÄöËøáÈöîÁ¶ª„ÄÅËûçÊñ≠Á≠âÊäÄÊúØÂèØ‰ª•ÈÅøÂÖçÊûÅÂ§ßÁöÑÊèêÂçáÂæÆÊúçÂä°ÁöÑÂèØÈù†ÊÄß„ÄÇ Âéª‰∏≠ÂøÉÂåñ ÊØè‰∏™ÊúçÂä°Áã¨‰∫´Ëá™Ë∫´ÁöÑÊï∞ÊçÆÂ≠òÂÇ®ËÆæÊñΩÔºàÁºìÂ≠òÔºåÊï∞ÊçÆÂ∫ìÁ≠âÔºâÔºå‰∏çÂÉè‰º†ÁªüÂ∫îÁî®ÂÖ±‰∫´‰∏Ä‰∏™ÁºìÂ≠òÂíåÊï∞ÊçÆÂ∫ìÔºåËøôÊ†∑ÊúâÂà©‰∫éÊúçÂä°ÁöÑÁã¨Á´ãÊÄßÔºåÈöîÁ¶ªÁõ∏ÂÖ≥Âπ≤Êâ∞„ÄÇ ¬∂‰∏∫ÊúçÂä°Áº∫ÁÇπ Â§çÊùÇÂ∫¶È´ò ÂæÆÊúçÂä°Èó¥ÈÄöËøáREST„ÄÅRPCÁ≠âÂΩ¢Âºè‰∫§‰∫íÔºåÂøÖÈ°ªË¶ÅÂÜô‰ª£Á†ÅÊù•Â§ÑÁêÜÊ∂àÊÅØ‰º†ÈÄí‰∏≠ÈÄüÂ∫¶ËøáÊÖ¢ÊàñËÄÖÊúçÂä°‰∏çÂèØÁî®Á≠âÂ±ÄÈÉ®Â§±ÊïàÈóÆÈ¢ò„ÄÇÂêåÊó∂ÂæÆÊúçÂä°Èó¥ÁöÑ‰∫ãÂä°ÊÄßÊìç‰ΩúÂèòÂ§çÊùÇ„ÄÇÂõ†‰∏∫‰∏çÂêåÁöÑÂæÆÊúçÂä°ÈááÁî®‰∫Ü‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÔºåÂ∞ÜÊó†Ê≥ïÂà©Áî®Êï∞ÊçÆÂ∫ìÊú¨Ë∫´ÁöÑ‰∫ãÂä°Êú∫Âà∂‰øùËØÅ‰∏ÄËá¥ÊÄßÔºåÈúÄË¶ÅÂºïÂÖ•‰∫åÈò∂ÊÆµÊèê‰∫§Á≠âÊäÄÊúØ„ÄÇ ËøêÁª¥Â§çÊùÇ Âú®ÈááÁî®ÂæÆÊúçÂä°Êû∂ÊûÑÊó∂ÔºåÁ≥ªÁªüÁî±Â§ö‰∏™Áã¨Á´ãËøêË°åÁöÑÂæÆÊúçÂä°ÊûÑÊàêÔºåÈúÄË¶Å‰∏Ä‰∏™ËÆæËÆ°ËâØÂ•ΩÁöÑÁõëÊéßÁ≥ªÁªüÂØπÂêÑ‰∏™ÂæÆÊúçÂä°ÁöÑËøêË°åÁä∂ÊÄÅËøõË°åÁõëÊéß„ÄÇËøêÁª¥‰∫∫ÂëòÈúÄË¶ÅÂØπÁ≥ªÁªüÊúâÁªÜËá¥ÁöÑ‰∫ÜËß£ÊâçÂØπÂ§üÊõ¥Â•ΩÁöÑËøêÁª¥Á≥ªÁªü„ÄÇ ÂΩ±ÂìçÊÄßËÉΩ ÊúçÂä°Èó¥ÁΩëÁªúÈÄö‰ø°‰πü‰ºöÂØπÊÄßËÉΩ‰∫ßÁîüÂΩ±Âìç„ÄÇ ÊµãËØïÈöæÂ∫¶Â§ß Âü∫‰∫éÂæÆÊúçÂä°Êû∂ÊûÑÁöÑÂ∫îÁî®ÊµãËØï‰πü‰ºöÂèòÂæóÁπÅÁêêÔºåÈúÄË¶ÅÂØπÂÖ∂‰ªñÊúçÂä°mock,ÁîöËá≥ÁÖßÊàê‰ª£Á†Å‰æµÂÖ•„ÄÇ ¬∂ÂæÆÊúçÂä°ËÆæËÆ° ¬∂ÂæÆÊúçÂä°ÂàíÂàÜ ÂæÆÊúçÂä°Êû∂ÊûÑÊó∂ÈÅáÂà∞ÁöÑÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢òÂ∞±ÊòØÂ¶Ç‰ΩïÂàíÂàÜÊúçÂä°ÁöÑËæπÁïå„ÄÇÂú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÈÄöÂ∏∏‰ºöÈááÁî®‰∏§Áßç‰∏çÂêåÁöÑÊñπÂºèÂàíÂàÜÊúçÂä°ËæπÁïåÔºåÂç≥ÈÄöËøá‰∏öÂä°ËÅåËÉΩÔºàBusiness CapabilityÔºâÊàñÊòØ DDD ÁöÑÈôêÁïå‰∏ä‰∏ãÊñáÔºàBounded ContextÔºâ„ÄÇ Business Capability Áî±ÂÖ¨Âè∏ÂÜÖÈÉ®‰∏çÂêåÈÉ®Èó®Êèê‰æõÁöÑËÅåËÉΩ„ÄÇ‰æãÂ¶ÇÂÆ¢Êà∑ÊúçÂä°ÈÉ®Èó®Êèê‰æõÂÆ¢Êà∑ÊúçÂä°ÁöÑËÅåËÉΩÔºåË¥¢Âä°ÈÉ®Èó®Êèê‰æõË¥¢Âä°Áõ∏ÂÖ≥ÁöÑËÅåËÉΩ„ÄÇ Bounded Context ÈôêÁïå‰∏ä‰∏ãÊñáÊòØ DDD ‰∏≠Áî®Êù•ÂàíÂàÜ‰∏çÂêå‰∏öÂä°ËæπÁïåÁöÑÂÖÉÁ¥†ÔºåËøôÈáå‰∏öÂä°ËæπÁïåÁöÑÂê´‰πâÊòØ‚ÄúËß£ÂÜ≥‰∏çÂêå‰∏öÂä°ÈóÆÈ¢ò‚ÄùÁöÑÈóÆÈ¢òÂüüÂíåÂØπÂ∫îÁöÑËß£ÂÜ≥ÊñπÊ°àÂüüÔºå‰∏∫‰∫ÜËß£ÂÜ≥ÊüêÁßçÁ±ªÂûãÁöÑ‰∏öÂä°ÈóÆÈ¢òÔºåË¥¥ËøëÈ¢ÜÂüüÁü•ËØÜÔºå‰πüÂ∞±ÊòØ‰∏öÂä°„ÄÇ ¬∂API Gateway ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠Ôºå‰∏Ä‰∏™Â§ßÂûãÂ∫îÁî®Ë¢´ÊãÜÂàÜÊàêÂ§ö‰∏™Â∞èÊúçÂä°ÔºåÂ¶ÇÊûúÂØπÂ§ñÁõ¥Êé•Êö¥Èú≤‰∫Ü‰∏ÄÊâπÂæÆÊúçÂä°Ôºå‰ºöÂá∫Áé∞‰ª•‰∏ãÈóÆÈ¢òÔºö ÂÆ¢Êà∑Á´ØÂà∞ÂæÆÊúçÂä°Áõ¥Êé•ÈÄö‰ø°ÔºåÂº∫ËÄ¶Âêà„ÄÇ ÈúÄË¶ÅÂ§öÊ¨°ËØ∑Ê±ÇÔºåÂÆ¢Êà∑Á´ØËÅöÂêàÊï∞ÊçÆÔºåÂ∑•‰ΩúÈáèÂ∑®Â§ßÔºåÂª∂ËøüÈ´ò„ÄÇ Áªü‰∏ÄÈÄªËæëÊó†Ê≥ïÊî∂ÊïõÔºåÊØîÂ¶ÇÂÆâÂÖ®ËÆ§ËØÅ„ÄÅÊµÅÈáèÊéßÂà∂„ÄÇ Èù¢Âêë‚ÄúÁ´Ø‚ÄùÁöÑAPI ÈÄÇÈÖçÔºåËÄ¶ÂêàÂà∞‰∫ÜÂÜÖÈÉ®ÊúçÂä°„ÄÇ ÊâÄÊúâÂæÆÊúçÂä°ÂØπÂ§ñÊö¥Èú≤ÔºåÂºïÂèëÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ APIÁΩëÂÖ≥Âàô‰Ωú‰∏∫Áªü‰∏ÄÁöÑÂçèËÆÆÂá∫Âè£ÔºåËøûÊé•ÂÜÖÈÉ®ÂæÆÊúçÂä°ÔºåÂèØÁªü‰∏ÄÂÅöÂàáÈù¢‰ªªÂä°ÔºåÈÅøÂÖçÊØè‰∏™ÂæÆÊúçÂä°Ëá™Â∑±ÂºÄÂèëÔºåÊèêÂçáÊïàÁéáÔºå‰ΩøÁ≥ªÁªüÊõ¥Âä†Ê†áÂáÜÂåñÔºåÈöêËóèÁ≥ªÁªüÊû∂ÊûÑÂÆûÁé∞ÁöÑÁªÜËäÇ,Êõ¥Â•ΩÂú∞ÂÆûÁé∞Èâ¥ÊùÉÔºåÊèêÈ´òÁ≥ªÁªüÁöÑÂÆâÂÖ®ÊÄß„ÄÇ ¬∂BFF Âú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÔºåÊØè‰∏Ä‰∏™ÊúçÂä°ÈÅµÂæ™Âçï‰∏ÄËÅåË¥£ÔºåÊèê‰æõÊõ¥Âä†ÁªÜÁ≤íÂ∫¶ÁöÑÊé•Âè£Ôºå‰∏öÂä°ÂèòÂæóÂæàÊ∏ÖÊô∞Ôºå‰ΩÜ‰∏Ä‰∏™ÈúÄÊ±ÇÂèØËÉΩ‰ºö‰º¥ÈöèÂ§ö‰∏™ÂæÆÊúçÂä°ÁöÑË∞ÉÁî®ÔºåÂ∞±ÂõûÂá∫Áé∞ËÅöÂêàË£ÅÂâ™ÁöÑÊÉÖÂÜµ„ÄÇÂú®Â§çÊùÇÁöÑÂ§öÁªàÁ´ØÁöÑÂú∫ÊôØ‰∏ãÔºåÂæÄÂæÄ‰º¥ÈöèÁùÄAppÂÆ¢Êà∑Á´ØÈúÄË¶ÅÂºÄÂèëÂ§ßÈáèÁöÑËÅöÂêàË£ÅÂâ™ÁöÑÈÄªËæëÔºåÂÆ¢Êà∑Á´ØÂæàÈáç‰∏îÈáçÂ§çÂä≥Âä®„ÄÇÂíåÊúçÂä°Á´ØËÄ¶ÂêàÂèòÈ´òÔºå‰∏ÄÁÇπÊîπÂä®ÔºåÁÖßÊàêÈ¢ëÁπÅÂèëÁâàÊú¨„ÄÇ Â¶ÇÊûúËÉΩËÆ©Â§öÁªàÁ´ØÈÉΩËÉΩÊúÄÈ´òÊïàÊúÄÂø´Êç∑ÁöÑÂÆåÊàêÈù¢ÂêëÁî®Êà∑Âú∫ÊôØÁöÑ È´òÊïàÁ†îÂèëÔºåÊúÄÂ•ΩÊòØÊèê‰æõÁªü‰∏ÄÁöÑÈù¢ÂêëÊüê‰∏Ä‰∏™‰∏öÂä°Âú∫ÊôØÁöÑÊé•Âè£„ÄÇËøôÁßçÈÄªËæëÂΩìÁÑ∂‰∏çËÉΩÂÆûÁé∞Âú®Êüê‰∏Ä‰∏™ÂæÆÊúçÂä°‰∏ãÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú® ÂæÆÊúçÂä°ÂíåÔºåÁΩëÂÖ≥Â±ÇÂä†ÂÖ•BFF(Backend For FrontendÔºåÊåá‰∏∫ÂâçÁ´ØÂ∫îÁî®ÂºÄÂèëÁöÑÂêéÁ´ØÊúçÂä°),‰ªéËÄåËß£ÂÜ≥ËøôÁ±ªÈóÆÈ¢ò„ÄÇ ¬∂APIÁΩëÂÖ≥ÈÄâÂûã ¬∂ÊúçÂä°Ë∞ÉÁî® Âú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÔºåÈÄöÂ∏∏Â≠òÂú®Â§ö‰∏™ÊúçÂä°‰πãÈó¥ÁöÑËøúÁ®ãË∞ÉÁî®ÁöÑÈúÄÊ±Ç„ÄÇÁõÆÂâç‰∏ªÊµÅÁöÑËøúÁ®ãË∞ÉÁî®ÊäÄÊúØÊúâÂü∫‰∫é HTTP ÁöÑ RESTful Êé•Âè£ÂíåÂü∫‰∫é TCP ÁöÑ RPC ÂçèËÆÆ„ÄÇ‰ª•‰∏ä‰∏§ÁßçÈÉΩÂ±û‰∫éÂêåÊ≠•ÈÄö‰ø°ÔºåËøòÊúâÂü∫‰∫éÈòüÂàóÊ®°ÂºèÁöÑÂºÇÊ≠•ÈÄö‰ø°„ÄÇ ¬∂HTTP HTTPÊú¨Ë∫´Â∞±ÊòØ‰∏ÄÁßçÁΩëÁªú‰º†ËæìÂçèËÆÆÔºåÂü∫‰∫éTCPÔºå‰ΩÜÊòØÂú®Ëøô‰πã‰∏äÂÅö‰∫Ü‰øÆÊîπÔºåËßÑÂÆö‰∫ÜÁΩëÁªú‰º†ËæìÁöÑËØ∑Ê±ÇÊ†ºÂºè„ÄÅÂìçÂ∫îÊ†ºÂºè„ÄÅËµÑÊ∫êÂÆö‰ΩçÂíåÊìç‰ΩúÁöÑÊñπÂºèÁ≠â„ÄÇÁé∞Âú®ÂÆ¢Êà∑Á´ØÊµèËßàÂô®‰∏éÊúçÂä°Á´ØÈÄö‰ø°Âü∫Êú¨ÈÉΩÊòØÈááÁî®HttpÂçèËÆÆ„ÄÇÂΩìÁÑ∂‰πüÂèØ‰ª•Áî®Êù•ËøõË°åËøúÁ®ãÊúçÂä°Ë∞ÉÁî®„ÄÇÁé∞Âú®ÁÉ≠Èó®ÁöÑRestÈ£éÊ†ºÔºåÂ∞±ÊòØÈÄöËøáhttpÂçèËÆÆÊù•ÂÆûÁé∞„ÄÇHttpÊ†ºÂºèÊõ¥Ê†áÂáÜÔºåÊõ¥ÈÄöÁî®Ôºå‰ΩÜÊ∂àÊÅØ‰ºöÊõ¥ËáÉËÇøÔºåÊÄßËÉΩÊõ¥Â∑Æ„ÄÇ ¬∂RPC RPC‚ÄîRemote Produce CallÔºàËøúÁ®ãËøáÁ®ãË∞ÉÁî®ÔºâÔºå‰∏ªË¶ÅÊòØÈÄöËøáËá™ÂÆö‰πâÈÄö‰ø°ËßÑÂàôÔºåËá™ÂÆö‰πâÊï∞ÊçÆÊ†ºÂºèÊù•ÂÆûÁé∞ÈÄö‰ø°„ÄÇÊï∞ÊçÆÂú®ÁΩëË∑Ø‰∏≠‰º†ËæìÈúÄË¶ÅËøõË°åÂ∫èÂàóÂåñÔºåÊâÄ‰ª•ËøòÈúÄË¶ÅÁ∫¶ÂÆöÁªü‰∏ÄÁöÑÂ∫èÂàóÂåñÁöÑÊñπÂºè„ÄÇËøôÁßçÈÄö‰ø°ÂΩ¢ÂºèÂèØ‰ª•Èôç‰ΩéÈÄö‰ø°ËøáÁ®ã‰∏≠ÁöÑ‰∫§‰∫íÊï∞ÊçÆ‰º†ËæìÂÜÖÂÆπÂ§ßÂ∞èÔºå‰ªéËÄåÊèêÈ´òÈÄö‰ø°Êï∞ÊçÆ‰º†ËæìÊïàÁéá„ÄÇÁé∞ÊúâÁöÑRPCÊ°ÜÊû∂‰∏ÄËà¨ÊòØÂü∫‰∫éÂéüÁîüTCPÂçèËÆÆÈÄö‰ø°„ÄÇ ¬∂Ê≥®ÂÜå‰∏≠ÂøÉ Âú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÔºåÊúçÂä°‰πãÈó¥ÈúÄË¶ÅËøõË°åÈÄö‰ø°Ôºå‰∏ÄËà¨Â∞±ÊòØÊúçÂä°Â∞ÜÊé•Âè£Êö¥Èú≤ÔºåÁÑ∂ÂêéÂÖ∂‰ªñÁöÑÊúçÂä°ÈÄöËøáip Áõ¥Êé•ËøõË°åËØ∑Ê±ÇÔºåÂΩìÊ∞¥Âπ≥Êâ©Â±ïÊó∂ÔºåÊúâÈúÄË¶ÅÊâãÂä®Â∞ÜÊúçÂä°ÁöÑip ÂÜôÂÖ•Âà∞Ë∞ÉÁî®ÊñπÈÖçÁΩÆ‰∏≠„ÄÇÂú® k8s‰∏ãÔºåÊúçÂä°ipÂä®ÊÄÅÂàÜÈÖç‰πü‰ºöËÆ©ËøôÁßçÊñπÂºèÈöæ‰ª•Áª¥ÊåÅ„ÄÇ ÂΩìÁÑ∂ÔºåÊàë‰ª¨ÂèØ‰ª•Âú®ÊúçÂä°‰∏äÂ±ÇÂä†ÂÖ•nginxÂÅöÂèçÂêë‰ª£ÁêÜÔºåÊö¥Èú≤Áªü‰∏ÄÁöÑÂüüÂêçÔºå‰ΩÜÊòØ‰πüÂú®ÊúçÂä°Ë∞ÉÁî®‰πãÈó¥Â¢ûÂä†‰∫Ü‰∏ÄÂ±ÇÔºå Âπ∂Êú™ËææÂà∞Âå∫‰∏≠ÂøÉÂåñÁöÑÁõÆÁöÑ„ÄÇÂõ†Ê≠§Êàë‰ª¨ÈúÄË¶ÅÂºïÂÖ•Ê≥®ÂÜå‰∏≠ÂøÉ„ÄÇ Ê≥®ÂÜå‰∏≠ÂøÉÂÖ∑Â§á‰∏Ä‰∏ãÂäüËÉΩÔºö **ÊúçÂä°Ê≥®ÂÜåÔºö**ÊúçÂä°Êèê‰æõÊñπÂêëÊ≥®ÂÜå‰∏≠ÂøÉËøõË°åÊ≥®ÂÜåÔºåÊ≥®ÂÜåÊó∂Êèê‰æõÁöÑ‰ø°ÊÅØ‰∏ªË¶ÅÂåÖÊã¨ÊúçÂä°Êèê‰æõÊñπIP„ÄÅÁ´ØÂè£‰ª•Âèä‰∏ä‰∏ãÊñáÁ≠âÊúçÂä°Ë∑ØÁî±‰ø°ÊÅØ„ÄÇ **ÊúçÂä°ÂèëÁé∞Ôºö**ÊúçÂä°ÂèëÁé∞‰∏ªË¶ÅÂÆûÁé∞ÊúçÂä°Ê∂àË¥πÊñπÂèØ‰ª•ÈÄöËøáÊ≥®ÂÜå‰∏≠ÂøÉÂØªÊâæÂà∞ÊúçÂä°Êèê‰æõÊñπÁöÑË∞ÉÁî®Ë∑ØÁî±‰ø°ÊÅØ„ÄÇ **ÂÅ•Â∫∑Ê£ÄÊµãÔºö**ÊúçÂä°ÂÅ•Â∫∑Ê£ÄÊµãÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜÁ°Æ‰øùÊ≥®ÂÜåÂà∞Ê≥®ÂÜå‰∏≠ÂøÉÁöÑÊúçÂä°ËäÇÁÇπÊòØÂèØ‰ª•Ë¢´Ê≠£Â∏∏Ë∞ÉÁî®ÁöÑÔºåÈÅøÂÖçÂùèÊ≠ªÊó†ÊïàËäÇÁÇπÂØºËá¥ÁöÑË∞ÉÁî®ËµÑÊ∫êÊµ™Ë¥πÁ≠âÈóÆÈ¢ò„ÄÇÊ≥®ÂÜå‰∏≠ÂøÉÂú®Ê£ÄÊµãÂà∞ËäÇÁÇπÂºÇÂ∏∏ÂêéÂèØ‰ª•ÂØπÊúçÂä°ËäÇÁÇπËøõË°åÂèäÊó∂ÂâîÈô§„ÄÇ È´òÂèØÁî®ÔºöÊ≥®ÂÜå‰∏≠ÂøÉÈúÄ‰øùËØÅÊúçÂä°ÁöÑÂèØÁî®ÊÄßÔºåCAP Ë¥üËΩΩÂùáË°°ÔºöÂæÆÊúçÂä°Â§öÂÆû‰æã‰∏ã‰øùËØÅÁΩëÁªúËØ∑Ê±ÇË¢´ÂùáÊëäÂà∞‰∏çÂêåÁöÑÊú∫Âô®‰∏äÔºå ÈÅøÂÖçÈõÜÁæ§‰∏≠ÈÉ®ÂàÜÊúçÂä°Âô®ÂéãÂäõËøáÂ§ßÔºåËÄåÂè¶‰∏Ä‰∫õÊúçÂä°Âô®ÊØîËæÉÁ©∫Èó≤ÁöÑÊÉÖÂÜµ„ÄÇ ¬∂Ê≥®ÂÜå‰∏≠ÂøÉÈÄâÂûã ¬∂ÈìæË∑ØËøΩË∏™ Âú®ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏ãÔºåÊúçÂä°ÊåâÁÖß‰∏çÂêåÁöÑÁª¥Â∫¶ËøõË°åÊãÜÂàÜÔºå‰∏ÄÊ¨°ËØ∑Ê±ÇÂæÄÂæÄÈúÄË¶ÅÊ∂âÂèäÂà∞Â§ö‰∏™ÊúçÂä°„ÄÇ‰∫íËÅîÁΩëÂ∫îÁî®ÊûÑÂª∫Âú®‰∏çÂêåÁöÑËΩØ‰ª∂Ê®°ÂùóÈõÜ‰∏äÔºåËøô‰∫õËΩØ‰ª∂Ê®°ÂùóÔºåÊúâÂèØËÉΩÊòØÁî±‰∏çÂêåÁöÑÂõ¢ÈòüÂºÄÂèë„ÄÅÂèØËÉΩ‰ΩøÁî®‰∏çÂêåÁöÑÁºñÁ®ãËØ≠Ë®ÄÊù•ÂÆûÁé∞„ÄÅÊúâÂèØËÉΩÂ∏ÉÂú®‰∫ÜÂá†ÂçÉÂè∞ÊúçÂä°Âô®ÔºåÊ®™Ë∑®Â§ö‰∏™‰∏çÂêåÁöÑÊï∞ÊçÆ‰∏≠ÂøÉ„ÄÇÂõ†Ê≠§ÔºåÂ∞±ÈúÄË¶ÅÂØπ‰∏ÄÊ¨°ËØ∑Ê±ÇÊ∂âÂèäÁöÑÂ§ö‰∏™ÊúçÂä°ÈìæË∑ØËøõË°åÊó•ÂøóËÆ∞ÂΩïÔºåÊÄßËÉΩÁõëÊéßÁ≠âÁ≠â„ÄÇÂçïÁ∫ØÁöÑÁêÜËß£ÈìæË∑ØËøΩË∏™ÔºåÂ∞±ÊòØÊåá‰∏ÄÊ¨°‰ªªÂä°ÁöÑÂºÄÂßãÂà∞ÁªìÊùüÔºåÊúüÈó¥Ë∞ÉÁî®ÁöÑÊâÄÊúâÁ≥ªÁªüÂèäËÄóÊó∂ÔºàÊó∂Èó¥Ë∑®Â∫¶ÔºâÈÉΩÂèØ‰ª•ÂÆåÊï¥ËÆ∞ÂΩï‰∏ãÊù•„ÄÇ ÈìæË∑ØË∑üË∏™‰∏ªË¶ÅÂäüËÉΩÔºö ÊïÖÈöúÂø´ÈÄüÂÆö‰ΩçÔºöÂèØ‰ª•ÈÄöËøáË∞ÉÁî®ÈìæÁªìÂêà‰∏öÂä°Êó•ÂøóÂø´ÈÄüÂÆö‰ΩçÈîôËØØ‰ø°ÊÅØ„ÄÇ ÈìæË∑ØÊÄßËÉΩÂèØËßÜÂåñÔºöÂêÑ‰∏™Èò∂ÊÆµÈìæË∑ØËÄóÊó∂„ÄÅÊúçÂä°‰æùËµñÂÖ≥Á≥ªÂèØ‰ª•ÈÄöËøáÂèØËßÜÂåñÁïåÈù¢Â±ïÁé∞Âá∫Êù•„ÄÇ ÈìæË∑ØÂàÜÊûêÔºöÈÄöËøáÂàÜÊûêÈìæË∑ØËÄóÊó∂„ÄÅÊúçÂä°‰æùËµñÂÖ≥Á≥ªÂèØ‰ª•ÂæóÂà∞Áî®Êà∑ÁöÑË°å‰∏∫Ë∑ØÂæÑÔºåÊ±áÊÄªÂàÜÊûêÂ∫îÁî®Âú®ÂæàÂ§ö‰∏öÂä°Âú∫ÊôØ„ÄÇ ¬∂ÈìæË∑ØËøΩË∏™ÈÄâÂûã ¬∂ÈÖçÁΩÆ‰∏≠ÂøÉ ÈÄöÂ∏∏ÊúçÂä°ÁöÑÈÖçÁΩÆÈÉΩÊòØË∑üÈöèÊúçÂä°‰ª£Á†ÅÁöÑËøë‰ª£ÈÖçÁΩÆ„ÄÇËøôÁßçÂÅöÊ≥ïËôΩÁÑ∂ÁÆÄÂçïÔºå‰ΩÜÂ¶ÇÊûúÂèÇÊï∞ÈúÄË¶Å‰øÆÊîπÔºåÂ∞±ÈùûÂ∏∏ÁöÑ‰∏çÁÅµÊ¥ªÔºåÁîöËá≥ÈúÄË¶ÅÈáçÂêØËøêË°å‰∏≠ÁöÑÈ°πÁõÆÊâçËÉΩÁîüÊïà„ÄÇÈÖçÁΩÆÊú™ËÉΩÈõÜ‰∏≠ÁÆ°ÁêÜÔºå‰πüÁº∫‰πèÁªü‰∏ÄÊ†áÂáÜÔºåÂêåÊó∂ÈÖçÁΩÆÁº∫‰πèÂÆâÂÖ®ÂÆ°ËÆ°ÂíåÁâàÊú¨ÊéßÂà∂ÂäüËÉΩ„ÄÇ ‰∏Ä‰∏™ÂêàÊ†ºÁöÑÈÖçÁΩÆ‰∏≠ÂøÉÈúÄË¶ÅÊª°Ë∂≥‰∏Ä‰∏ãÂäüËÉΩÔºö ÂØπÈÖçÁΩÆÈ°πÁöÑËØªÂèñÂíå‰øÆÊîπÊèê‰æõÁÆÄÂçïÊòìÁî®ÁöÑAPIÂíåÊìç‰ΩúÁïåÈù¢ Ê∑ªÂä†Êñ∞ÈÖçÁΩÆË¶ÅÂ§üÁÆÄÂçï„ÄÅÁõ¥Êé•„ÄÅÊñπ‰æø ÊîØÊåÅ‰∏çÂêåÁÆ°ÁêÜÂëòÂØπÈÖçÁΩÆÁöÑ‰øÆÊîπÁöÑ‰∏çÂêåÊùÉÈôêÔºå‰ª•ÊääÊéßÈ£éÈô© ÂèØ‰ª•Êü•ÁúãÈÖçÁΩÆ‰øÆÊîπÁöÑÂéÜÂè≤ËÆ∞ÂΩïÔºå‰ª•‰æøÂõûÊªö ‰∏çÂêåÈÉ®ÁΩ≤ÁéØÂ¢ÉÁõ∏‰∫íÈöîÁ¶ªÔºå‰∫í‰∏çÂΩ±Âìç ¬∂ÈÖçÁΩÆ‰∏≠ÂøÉÈÄâÂûã ÂèÇËÄÉ SOAÊû∂ÊûÑÂíåÂæÆÊúçÂä°Êû∂ÊûÑÁöÑÂå∫Âà´ ‰ªÄ‰πàÊòØESBÔºü ÂæÆÊúçÂä°Êû∂ÊûÑ‰∏≠ÁöÑBFFÂà∞Â∫ïÊòØÂï•Ôºü ÂæÆÊúçÂä°Êû∂ÊûÑÁîüÊÄÅ‰ΩìÁ≥ª ÂæÆÊúçÂä°Ê≤ªÁêÜÔºöÁÜîÊñ≠„ÄÅÈôçÁ∫ßÂíåÈôêÊµÅ ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏∫‰ªÄ‰πàÈúÄË¶ÅÈìæË∑ØËøΩË∏™Ôºü ÂæÆÊúçÂä°]]></content>
      <categories>
        <category>Êû∂ÊûÑ</category>
      </categories>
      <tags>
        <tag>ÂæÆÊúçÂä°</tag>
        <tag>Êû∂ÊûÑ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kafka docker ÂÆâË£Ö]]></title>
    <url>%2F2022%2F04%2F07%2F1%2F</url>
    <content type="text"><![CDATA[ÊÉ≥Âú®Êú¨Âú∞Êê≠Âª∫kafkaÈõÜÁæ§ÔºåÈúÄË¶Å‰øùËØÅzookeeperÁöÑÈ´òÂèØÁî®ÔºåÊï¥‰∏™ÊúçÂä°Êê≠Âª∫ËøáÁ®ãÊØîËæÉËÄóÊó∂Ôºå‰∏îÂç∏ËΩΩ‰πüËæÉ‰∏∫È∫ªÁÉ¶ÔºåÂ¶Ç‰ΩïÂø´ÈÄüÊê≠Âª∫Êï¥‰∏™kafkaÈõÜÁæ§Âë¢ÔºåËØï‰∏ÄËØïdockerÂêßÔºÅ ¬∂Docker-compose ÁºñÂÜôdocker-compose.yaml 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788version: '3.1'services: zoo1: image: zookeeper:3.5.7 restart: always hostname: zoo1 container_name: zoo1 ports: - "2181:2181" environment: ZOO_MY_ID: 1 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888 zoo2: image: zookeeper:3.5.7 restart: always hostname: zoo2 container_name: zoo2 ports: - "2182:2181" environment: ZOO_MY_ID: 2 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888 zoo3: image: zookeeper:3.5.7 restart: always hostname: zoo3 container_name: zoo3 ports: - "2183:2181" environment: ZOO_MY_ID: 3 ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888 kafka1: image: wurstmeister/kafka restart: always hostname: kafka1 container_name: kafka1 ports: - "9092:9092" environment: KAFKA_ADVERTISED_HOST_NAME: kafka1 KAFKA_LISTENERS: PLAINTEXT://kafka1:9092 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka1:9092 KAFKA_ADVERTISED_PORT: 9092 KAFKA_ZOOKEEPER_CONNECT: zoo1:2181,zoo2:2181,zoo3:2181 depends_on: - zoo1 - zoo2 - zoo3 kafka2: image: wurstmeister/kafka restart: always hostname: kafka2 container_name: kafka2 ports: - "9093:9093" environment: KAFKA_ADVERTISED_HOST_NAME: kafka2 KAFKA_LISTENERS: PLAINTEXT://kafka2:9093 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka2:9093 KAFKA_ADVERTISED_PORT: 9093 KAFKA_ZOOKEEPER_CONNECT: zoo1:2181,zoo2:2181,zoo3:2181 depends_on: - zoo1 - zoo2 - zoo3 kafka3: image: wurstmeister/kafka restart: always hostname: kafka3 container_name: kafka3 ports: - "9094:9094" environment: KAFKA_ADVERTISED_HOST_NAME: kafka3 KAFKA_LISTENERS: PLAINTEXT://kafka3:9094 KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka3:9094 KAFKA_ADVERTISED_PORT: 9094 KAFKA_ZOOKEEPER_CONNECT: zoo1:2181,zoo2:2181,zoo3:2181 depends_on: - zoo1 - zoo2 - zoo3 ÊâßË°ådocker-composeÂëΩ‰ª§ ¬∂ÊµãËØï kafka1ÂàõÂª∫ topic Âêëtopic ÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØ ÊâìÂºÄ‰∏Ä‰∏™Êñ∞ÁöÑÊéßÂà∂Âè∞ÔºåËøõÂÖ•kafka2Ôºå ‰ªéËµ∑ÂßãÂÅèÁßªÈáèÂºÄÂßãÁõëÂê¨ Êàë‰ª¨ÂèëÁé∞ÔºåÊ∂àÊÅØ‰ªékafka1 ÂêåÊ≠•Ëá≥kafka2‰∫ÜÔºå‰∏Ä‰∏™kafkaÈõÜÁæ§Â∑≤ÁªèÊê≠Âª∫ÂÆåÊàêÔºåÊòØ‰∏çÊòØÂæàÁÆÄÂçï„ÄÇ]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>Ê∫êÁ†Å</tag>
        <tag>test</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonÂÜÖÈÉ®Â∫ì‰æùËµñÁÆ°ÁêÜ]]></title>
    <url>%2F2022%2F02%2F18%2F1%2F</url>
    <content type="text"><![CDATA[ÂÖ¨Âè∏gitlab ‰∏äÁª¥Êä§‰∫Ü‰∏Ä‰∫õPythonÂÜÖÈÉ®Â∫ìÔºåÊúÄËøëÂá∫Áé∞‰∫Ü‰∏Ä‰∫õÂ∞èÊØõÁóÖÔºåËß£ÂÜ≥ÁöÑÂêåÊó∂ÂÄüÊ≠§Ê¢≥ÁêÜ‰∏Ä‰∏ã„ÄÇ ¬∂ÂÜÖÈÉ®Â∫ì‰æùËµñÊ≠£Á°ÆÂÜôÊ≥ï ÂÖ¨Âè∏ÊúÄËøëÂØπgitlab ÊúçÂä°ËøõË°åÂçáÁ∫ßÔºåÁî±Ê≠§ÂØºËá¥‰∫ÜÂÜÖÈÉ®Â∫ì‰∏ãËΩΩÂ§±Ë¥•„ÄÇ‰πãÂâçÂú®requirements.txt Â£∞ÊòéÁöÑÈìæÊé•Â¶Ç‰∏ãÔºö ÁªèÊéíÊü•ÂèëÁé∞gitlab ÁâàÊú¨ÂçáÁ∫ßÂêéÔºåÈìæÊé•Âú∞ÂùÄÂèëÁîü‰∫ÜÂèòÂåñÔºåÊñ∞ÁöÑÂú∞ÂùÄÂ¶Ç‰∏ãÔºö ‰∫ÜËß£ÂêéÂèëÁé∞ÔºåÂÖ∂ÂÆû pip Â∞±ÊòØÂ∞Ü gitlab ‰ªìÂ∫ìÁöÑ‰ª£Á†Å‰ª•ÂéãÁº©Êñá‰ª∂ÁöÑÂΩ¢Âºè‰∏ãËΩΩ‰∏ãÊù•Âπ∂Ëß£ÂéãÊâßË°åsetup ÁîüÊàêpython ËøêË°åÁéØÂ¢ÉÁöÑ‰æùËµñÂ∫ì„ÄÇ Ëøô‰πàÂÜôËøòÊòØÁõ¥Êé•Ëé∑Âèñtar ÂåÖÁöÑÂú∞ÂùÄÔºåÈÄÇÈÖçÊÄßÂ§™Â∑ÆÔºå‰∏çÁü•ÈÅìÈÇ£Â§©ÈìæÊé•ÂèàÊîπÊéâ‰∫ÜÔºåÈÇ£‰πàÊúâ‰ªÄ‰πàÂ•ΩÁöÑÊñπÊ°àÂêó ÂÖ∂ÂÆûgit ÊúâÊèê‰æõËé∑Âèñ‰æùËµñÂ∫ìÁöÑÊé•Âè£ÔºåÈÄöËøáË∞ÉÁî®‰ª•‰∏ãÈìæÊé•ÂÆûÁé∞‰æùËµñÂ∫ìÁöÑ‰∏ãËΩΩÔºö ¬∂ÁâàÊú¨ÁÆ°ÁêÜ ‰πãÂâçÂÖ¨Âè∏ÂÜÖÈÉ®‰æùËµñÂ∫ìÊòØÊãâÂèñÊüê‰∏Ä‰∏™ÂàÜÊîØÔºåÂÄòËã•ÈááÂèñËøôÁßçÊñπÊ°à‰ºöÂá∫Áé∞‰ª•‰∏ã‰∏§‰∏™ÈóÆÈ¢òÔºö ÂΩìÂ∫ïÂ±Ç‰æùËµñÂ∫ìÂçáÁ∫ßÂêéÔºå‰∏äÂ±ÇÊâÄÊúâÂ∫ìÈÉΩÈúÄË¶ÅÂÅöÈÄÇÈÖçÔºåÂê¶Âàô‰ºöÂá∫Áé∞Êó†Ê≥ïËøêË°åÁöÑÊÉÖÂÜµ ÂΩìÈÉ®ÁΩ≤Âê¶ÁâàÊú¨ÂõûÈÄÄÊó∂Ôºå‰æùËµñÊó†Ê≥ïÂõûÈÄÄËá≥‰∏ä‰∏Ä‰∏™ÁâàÊú¨ Âõ†Ê≠§Êàë‰ª¨ÈááÂèñ‰ª•‰∏ãÊñπÊ°àÔºö Âü∫‰∫émaster Êâìtag ËøõË°åÁâàÊú¨ÊéßÂà∂„ÄÇÂΩìÊñ∞ÁöÑÁâπÊÄßÊõ¥Êñ∞Âà∞master ,Êàë‰ª¨‰ºöÂØπÂÖ∂ËøõË°åÊâìtagÔºåÂ£∞ÊòéÁâàÊú¨„ÄÇ Â¶Ç(v1.0.0),Âõ†Ê≠§Êàë‰ª¨Âè™ÈúÄË¶ÅÂú® ‰∏öÂä°Â∫ì‰∏≠‰øÆÊîπ‰æùËµñÂç≥ÂèØÔºåÂ¶ÇÔºö ËÄåÂÖ∂‰ªñ‰∏äÂ±ÇÂ∫ìÂàôÊåâÈúÄ‰øÆÊîπÔºå‰πüÂèØ‰ª•Ëß£ÂÜ≥‰∏äÈù¢Âá∫Áé∞ÁöÑÈóÆÈ¢ò„ÄÇ ¬∂other Ê≠£Â∏∏ÊÉÖÂÜµÂ∞±Ê≤°Âï•ÈóÆÈ¢ò‰∫ÜÔºå‰ΩÜÊòØÊú¨‰∫∫Âú®ÊµãËØïÁéØÂ¢ÉËøõË°åÈÉ®ÁΩ≤Êó∂ÔºåÂèëÁé∞ÊÉÖÂÜµÂπ∂‰∏ç‰πêËßÇÔºåÊâßË°å‰ª•‰∏ãÂëΩ‰ª§(-q ÊéßÂà∂Âè∞ËØ¶ÁªÜÊâìÂç∞ËæìÂá∫)Ôºö Âá∫Áé∞ÈîôËØØÔºö fatal: HTTP request failed Êü•ÈòÖÂêéÂèëÁé∞ÔºåÂõ†‰∏∫ÂΩìÂâçÊú∫Âô®Centos ÁâàÊú¨Ëøá‰ΩéÔºåÂè™ÊúâCento6.5ÔºåËá™Â∏¶ÁöÑÁöÑgit ÁâàÊú¨ 1.7.1 ÔºåÂπ∂‰∏çÊîØÊåÅÊ≠§Ê†ºÂºèÔºåÂõ†Ê≠§ÈúÄË¶ÅÂØπgit ËøõË°åÂçáÁ∫ß„ÄÇ ¬∂ÂçáÁ∫ßgit 1.ÂÆâË£Ö‰æùËµñ 12sudo yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel asciidocsudo yum install gcc perl-ExtUtils-MakeMaker 2.Âç∏ËΩΩgit 1sudo yum remove git ‰∏ãËΩΩÂπ∂ÂÆâË£ÖÈ´òÁâàÊú¨git 1234wget https://github.com/git/git/archive/v2.2.1.tar.gztar zxvf v2.2.1.tar.gzcd git-2.2.1make prefix=/usr/local/git all 4.Ê∑ªÂä†Ëá≥ÁéØÂ¢ÉÂèòÈáè Âõ†‰∏∫ÊòØÈùûrootÁî®Êà∑‰ΩøÁî®gitÔºåÂàôÈúÄË¶ÅÈÖçÁΩÆ‰∏ãËØ•Áî®Êà∑‰∏ãÁöÑÁéØÂ¢ÉÂèòÈáèÔºö 12echo "export PATH=$PATH:/usr/local/git/bin" &gt;&gt; ~/.bashrcsource ~/.bashrc Ëá≥Ê≠§Ôºågit ÂçáÁ∫ßÂÆåÊàêÔºåÂèØ‰ª•ÈÄöËøágit --version Êü•ÁúãÁâàÊú¨ ÂÜçÊ¨°ÊâßË°å‰∏ãËΩΩÂëΩ‰ª§Ôºå‰ªçÊóßÂá∫Áé∞ÈîôËØØÔºåSSL connect errorÔºåÂè™ÊòØÁî±‰∫éÊó†Ê≥ïÂú®ÊúçÂä°Âô®‰ΩøÁî®curlÂëΩ‰ª§ËÆøÈóÆhttpsÂüüÂêç,nssÁâàÊú¨ÊúâÁÇπÊóß‰∫ÜÔºåËøôËØ•Ê≠ªÁöÑËÄÅÊú∫Âô®üò≠Ôºö ¬∂Êõ¥Êñ∞nss ÊâßË°åÊõ¥Êñ∞nssÂëΩ‰ª§Ôºö 1yum update -y nss curl libcurl ÂèàÂèàÂèàÂá∫Áé∞ÈóÆÈ¢òÂï¶üò£Cannot find a valid baseurl for repo: base ÈúÄË¶ÅÊõ¥Êñ∞yum ÁöÑ‰∏ãËΩΩÊ∫ê„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ ¬∂Êõ¥Êç¢yumÊ∫ê Â§á‰ªΩÂéüyumÊ∫ê 1mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup ‰∏ãËΩΩÈïúÂÉèÊ∫ê 123#ÈòøÈáå‰∫ëcentos7ÁöÑyumÊ∫êÔºöhttp://mirrors.aliyun.com/repo/Centos-7.repo#ÈòøÈáå‰∫ëcentos6ÁöÑyumÊ∫êÔºöhttp://mirrors.aliyun.com/repo/Centos-6.repowget -O /etc/yum.repos.d/Centos-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo Êç£ÈºìÂçäÂ§©ÂèëÁé∞ÈòøÈáåÊ∫ê‰∏çÂú®ÊîØÊåÅcentos6 ÈïúÂÉèÊ∫ê‰∫ÜÔºå‰ΩøÁî®Ê∏ÖÂçéÁöÑÂêß„ÄÇ ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§ÊõøÊç¢ÈïúÂÉèÊ∫êÔºö 1sed -i 's#vault.centos.org#mirrors.tuna.tsinghua.edu.cn/centos-vault#g' /etc/yum.repos.d/CentOS-Base.repo 3.ÈáçÊñ∞ÁîüÊàêÁºìÂ≠ò 1234#Ê∏ÖÈô§ÁºìÂ≠òyum clean all#ÈáçÊñ∞ÁîüÊàêÁºìÂ≠òyum makecache Êõ¥Êñ∞nss 1yum update -y nss curl libcurl ‰∏ãËΩΩ‰æùËµñ ÂèÇËÄÉÔºö centos6‰ΩøÁî®gitÂëΩ‰ª§Êó∂fatal: HTTP request failedËß£ÂÜ≥ÊñπÊ≥ï CentOS 6ÈïúÂÉèÊ∫êÊõ¥Êç¢ÊñπÊ≥ï git ‰ΩøÁî®Êä•ÈîôSSL connect error]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆ∞‰∏ÄÊ¨°ÈóÆÈ¢òËß£ÂÜ≥ËøáÁ®ã]]></title>
    <url>%2F2021%2F09%2F22%2F1%2F</url>
    <content type="text"><![CDATA[ÊµãËØïÁéØÂ¢ÉÊúçÂä°Âô®Â∑≤ÁªèÊåÇËΩΩ‰∫ÜÂ§ö‰∏™ÂàÜÂå∫ÔºåÂèØËøòÊòØÂá∫Áé∞‰∫ÜÁ£ÅÁõòÁ©∫Èó¥‰∏çË∂≥ÁöÑË≠¶ÂëäÔºÅÈÇ£Â∞±Êù•ÁúãÁúãÂà∞Â∫ïÊòØÂì™‰∫õÁ≥ªÁªüËµÑÊ∫êÂç†Áî®ËøáÂ§ßÂêß„ÄÇ ¬∂Êü•ÁúãÁ£ÅÁõòÂàÜÂ∏É ÊâßË°åcat /etc/issueÊü•ÁúãÁ≥ªÁªüÁâàÊú¨Ôºö linux‰∏≠Â∏∏ËßÅÁöÑÊúâExt2„ÄÅExt3„ÄÅExt4„ÄÅLinux swap„ÄÅproc„ÄÅsysfs„ÄÅtmpfsÁ≠âÔºåÈÄöËøámountÂëΩÂêçÊü•ÁúãÂΩìÂâçÂ∑≤ÊåÇËΩΩÁöÑÊñá‰ª∂Á≥ªÁªü: ÈÄöËøálsblkÊü•ÁúãÂΩìÂâçÁ£ÅÁõòÊÉÖÂÜµ: ÂèØ‰ª•ÁúãÂà∞Ê†πÁõÆÂΩïÊåÇËΩΩÁöÑÂÜÖÂ≠òÁ©∫Èó¥Âè™Êúâ20G,Â§ßÈÉ®ÂàÜÁ©∫Èó¥ÈõÜ‰∏≠Âú® /data0Âíå/data2„ÄÇÂíã‰ª¨ÈÄödf -lh Êü•ÁúãÊñá‰ª∂Á≥ªÁªüÊÉÖÂÜµ: ÈóÆÈ¢òÊâæÂà∞‰∫ÜÔºåÊ†πÁõÆÂΩïÂá†‰πéÂ∑≤ÁªèÂç†Êª°Ôºå‰ΩÜÊòØÊõ¥ÁõÆÂΩïÁöÑÂÜÖÂÆπÂèØ‰∏çÂ•ΩÂà†Èô§ÔºåÁé©ÊÑèÂà†Èîô‰∫ÜÔºåÊûÅÊúâÂèØËÉΩÂØºËá¥ÊúçÂä°ËøêË°åÂá∫Áé∞ÈóÆÈ¢òÔºåÁîöËá≥ÂΩ±ÂìçÊï¥‰∏™ÊúçÂä°Âô®ÁöÑÊ≠£Â∏∏ËøêËΩ¨„ÄÇ ÈÄöËøáÂàÜÊûêÂèëÁé∞‰∏Ä‰∏ã‰∏§ÁÇπ‰ºòÂåñÂèØ‰ª•ÊúâÊïàÁöÑÂáèÂ∞ëÂÜÖÂ≠òÂç†Áî®Ôºö - ËøÅÁßªÊúçÂä°Âô®Êó•ÂøóÊñá‰ª∂ - go-pathËøÅÁßª ¬∂‰æùËµñÂ∫ìËøÅÁßª ¬∂GOPATH ÈÉ®Èó®ÊúÄËøëÂºÄÂßãÊÖ¢ÊÖ¢ÂºïÂÖ•go‰Ωú‰∏∫ÂºÄÂèëËØ≠Ë®ÄÔºå‰ΩÜÊòØgo Moules ÈóÆ‰∏ñ‰πãÂâç goÁöÑÈ°πÁõÆ‰æùËµñÁÆ°ÁêÜÂπ∂‰∏çÂÉèpython ‰∏ÄÊ†∑ÁÆÄÂçï„ÄÇ GOPATHÁõÆÂΩï‰∏ã‰∏ÄÂÖ±ÂåÖÂê´‰∫Ü‰∏â‰∏™Â≠êÁõÆÂΩïÔºåÂàÜÂà´ÊòØÔºö binÔºöÂ≠òÂÇ®ÊâÄÁºñËØëÁîüÊàêÁöÑ‰∫åËøõÂà∂Êñá‰ª∂„ÄÇ pkgÔºöÂ≠òÂÇ®È¢ÑÁºñËØëÁöÑÁõÆÊ†áÊñá‰ª∂Ôºå‰ª•Âä†Âø´Á®ãÂ∫èÁöÑÂêéÁª≠ÁºñËØëÈÄüÂ∫¶„ÄÇ srcÔºöÂ≠òÂÇ®ÊâÄÊúâ.goÊñá‰ª∂ÊàñÊ∫ê‰ª£Á†Å„ÄÇÂú®ÁºñÂÜô Go Â∫îÁî®Á®ãÂ∫èÔºåÁ®ãÂ∫èÂåÖÂíåÂ∫ìÊó∂Ôºå‰∏ÄËà¨‰ºö‰ª•$GOPATH/src/github.com/foo/barÁöÑË∑ØÂæÑËøõË°åÂ≠òÊîæ„ÄÇ Âõ†Ê≠§Âú®‰ΩøÁî® GOPATH Ê®°Âºè‰∏ãÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÂ∫îÁî®‰ª£Á†ÅÂ≠òÊîæÂú®Âõ∫ÂÆöÁöÑ$GOPATH/srcÁõÆÂΩï‰∏ãÔºåÂπ∂‰∏îÂ¶ÇÊûúÊâßË°ågo getÊù•ÊãâÂèñÂ§ñÈÉ®‰æùËµñ‰ºöËá™Âä®‰∏ãËΩΩÂπ∂ÂÆâË£ÖÂà∞$GOPATHÁõÆÂΩï‰∏ã„ÄÇ Âú® GOPATH ÁöÑ $GOPATH/src ‰∏ãËøõË°å .go Êñá‰ª∂ÊàñÊ∫ê‰ª£Á†ÅÁöÑÂ≠òÂÇ®ÔºåÊàë‰ª¨ÂèØ‰ª•Áß∞ÂÖ∂‰∏∫ GOPATH ÁöÑÊ®°Âºè, GOPATH Ê®°Âºè‰∏ãÊ≤°ÊúâÁâàÊú¨ÊéßÂà∂ÁöÑÊ¶ÇÂøµ ¬∂Go Modules ¬∂go mod Go modules ÂëΩ‰ª§Ôºö ÂëΩ‰ª§ ‰ΩúÁî® go mod init ÁîüÊàê go.mod Êñá‰ª∂ go mod download ‰∏ãËΩΩ go.mod Êñá‰ª∂‰∏≠ÊåáÊòéÁöÑÊâÄÊúâ‰æùËµñ go mod tidy Êï¥ÁêÜÁé∞ÊúâÁöÑ‰æùËµñ go mod graph Êü•ÁúãÁé∞ÊúâÁöÑ‰æùËµñÁªìÊûÑ go mod edit ÁºñËæë go.mod Êñá‰ª∂ go mod vendor ÂØºÂá∫È°πÁõÆÊâÄÊúâÁöÑ‰æùËµñÂà∞vendorÁõÆÂΩï go mod verify Ê†°È™å‰∏Ä‰∏™Ê®°ÂùóÊòØÂê¶Ë¢´ÁØ°ÊîπËøá go mod why Êü•Áúã‰∏∫‰ªÄ‰πàÈúÄË¶Å‰æùËµñÊüêÊ®°Âùó ¬∂GO111MODULE GoËØ≠Ë®ÄÊèê‰æõ‰∫Ü GO111MODULE Ëøô‰∏™ÁéØÂ¢ÉÂèòÈáèÊù•‰Ωú‰∏∫ Go modules ÁöÑÂºÄÂÖ≥ÔºåÂÖ∂ÂÖÅËÆ∏ËÆæÁΩÆ‰ª•‰∏ãÂèÇÊï∞Ôºö autoÔºöÂè™Ë¶ÅÈ°πÁõÆÂåÖÂê´‰∫Ü go.mod Êñá‰ª∂ÁöÑËØùÂêØÁî® Go modulesÔºåÁõÆÂâçÂú® Go1.11 Ëá≥ Go1.14 ‰∏≠‰ªçÁÑ∂ÊòØÈªòËÆ§ÂÄº„ÄÇ onÔºöÂêØÁî® Go modulesÔºåÊé®ËçêËÆæÁΩÆÔºåÂ∞Ü‰ºöÊòØÊú™Êù•ÁâàÊú¨‰∏≠ÁöÑÈªòËÆ§ÂÄº„ÄÇ offÔºöÁ¶ÅÁî® Go modulesÔºå‰∏çÊé®ËçêËÆæÁΩÆ„ÄÇ ¬∂ËøÅÁßª GOPATHÈªòËÆ§ËÆæÁΩÆÔºö$HOME/go ÈÄöËøádu -sh $HOME/goÊü•ÁúãÁ£ÅÁõòÂç†Áî®ÊÉÖÂÜµÔºö 1.5G Âú® /data2ÁõÆÂΩï‰∏ãÂàõÂª∫ goÊñá‰ª∂Â§πÔºå ÁºñËæë ~/.bash_profile Êñá‰ª∂ÔºåÊ∑ªÂä†ÁéØÂ¢ÉÂèòÈáè : export GOPATH=/data2/go ‰øùÂ≠òÈÄÄÂá∫‰Ω†ÁöÑÁºñËæëÂô®.ÁÑ∂ÂêéÊâßË°å: source ~/.bash_profile Áî®Êà∑Âπ∂Ê≤°Êúâ /data2/ÁöÑËÆøÈóÆÊùÉÈôêÔºåÊää /data2/goÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâÂ≠êÊñá‰ª∂ÁöÑÊã•ÊúâËÄÖÊîπ‰∏∫lhopÁî®Êà∑Ôºö chown -R lhop:lhop /data2/go Âú®È°πÁõÆÈáåÈù¢‰ΩøÁî® go mod ËøõË°å‰ª•Êù•ÁÆ°ÁêÜ ¬∂‰∏∫ÊØè‰∏Ä‰∏™È°πÁõÆÊ∑ªÂä†ËøêË°åÁéØÂ¢É È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂Â§π/fileÔºå Âú®ÂëΩ‰ª§Ë°åÊâßË°å export GOPATH=/file,ÂΩìÂâçÈ°πÁõÆ‰∏≠ÁöÑÂåÖÂ∞Ü‰ºö‰∏ãËΩΩÂà∞/file‰∏ã„ÄÇ Ê≥®ÔºöÂëΩ‰ª§Ë°åÁöÑexport Âè™‰ΩúÁî®‰∫éÂΩìÂâçÁ™óÂè£ ÂèÇËÄÉÔºö https://segmentfault.com/a/1190000017213655 https://segmentfault.com/a/1190000021854441]]></content>
      <categories>
        <category>go</category>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>go</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ëá™Âä®ÂåñËÑöÊú¨ÁîüÊàêÈîôËØØÁªìÊûúÊñáÊ°£]]></title>
    <url>%2F2021%2F04%2F06%2F1%2F</url>
    <content type="text"><![CDATA[Êó©ÊúüÈ°πÁõÆÊê≠Âª∫ÁöÑÊó∂ÂÄô‰∏∫‰∫ÜÁªü‰∏ÄÊé•Âè£ËøîÂõûÊ†ºÂºèÔºåÂü∫‰∫éwerkzeugÁöÑHTTPExceptionÂÆûÁé∞‰∫ÜAPIExceptionÁî®‰∫éËøîÂõûjsonÊ†ºÂºèÔºåÂπ∂Âà∂ÂÆö‰∫Ü‰∏ÄÂ•óÂÆåÂñÑÁöÑÈîôËØØÁ†Å‰ΩìÁ≥ªÔºå‰ΩÜÊµãËØïÂ∞è‰ºô‰º¥ÂØπÈîôËØØÁ†ÅÂØπÂ∫îÁöÑÈóÆÈ¢òÁ±ªÂûãÂπ∂‰∏ç‰∫ÜËß£ÔºåÂõ†Ê≠§ÈúÄË¶ÅÁºñÂÜô‰∏Ä‰ªΩÊñáÊ°£Áî®‰∫éÊñπ‰æøÊü•ÈòÖÈîôËØØÁ†ÅÂíåÈîôËØØÁöÑÂéüÂõ†„ÄÇ‰ΩÜÊòØÊØèÊ¨°Ê∑ªÂä†Êñ∞ÁöÑÈîôËØØÁ†ÅÈÉΩÈúÄË¶ÅÂêåÊ≠•Êõ¥Êñ∞ÊñáÊ°£ÔºåËøôÂèØ‰∏çÂ§™Â¶ô„ÄÇÂõ†Ê≠§ËÆæËÆ°‰∏Ä‰∏™ÊñáÊ°£ÁöÑÂêåÊ≠•Êõ¥Êñ∞Êú∫Âà∂Ëø´Âú®ÁúâÁù´ ¬∂APIException flask ‰∏ªË¶ÅÊòØ‰ΩøÁî®werkzeugÊù•ÂÆûÁé∞WSGI application„ÄÇÂΩìapiËØ∑Ê±ÇÈîôËØØ‰ºöËøîÂõûHTTPException„ÄÇ Êü•ÁúãÊ∫êÁ†ÅÂèëÁé∞ËøîÂõûÁ±ªÂûãÊòØÊñáÊú¨Ê†ºÂºè„ÄÇ 123def get_headers(self, environ=None): """Get a list of headers.""" return [("Content-Type", "text/html")] ‰∏∫‰∫ÜÁªü‰∏ÄËøîÂõûÁöÑÊ†ºÂºèÁ±ªÂûãÔºåÁªßÊâøHTTPExceptionÂÆûÁé∞‰∫ÜAPIException„ÄÇ 123456789101112131415161718192021222324252627282930313233343536from flask import request, jsonfrom werkzeug.exceptions import HTTPExceptionclass APIException(HTTPException): code = 500 description = 'sorry, we made a mistake (*Ôø£Ô∏∂Ôø£)!' error_code = 999 def __init__(self, description=None, code=None, error_code=None, headers=None): if code: self.code = code if error_code: self.error_code = error_code if description: self.description = description super(APIException, self).__init__(description) def get_body(self, environ=None): body = dict( description=self.description, error_code=self.error_code, request=request.method + ' ' + self.get_url_no_param() ) text = json.dumps(body) return text def get_headers(self, environ=None): return [('Content-Type', 'application/json')] @staticmethod def get_url_no_param(): full_path = str(request.full_path) main_path = full_path.split('?') return main_path[0] ÈÄöËøáflaskÊ†∏ÂøÉÂØπË±°ÁöÑerrorhandlerÊã¶Êà™ÊâÄÊúâÁöÑExceptionÂπ∂ËøîÂõûÁªü‰∏ÄÁöÑAPIExceptionÂÆûÁé∞ÂºÇÂ∏∏ÁöÑËØ∑Ê±Ç‰πüËøîÂõûjsonÊ†ºÂºè„ÄÇ 1234567891011@app.errorhandler(Exception)def global_error(error): if isinstance(error, APIException): return error elif isinstance(error, HTTPException): return RecvHttpException(description=error.description, code=error.code) else: if not app.config['DEBUG']: return ServerError() else: raise error ¬∂Ëá™Âä®ÂåñÊñáÊ°£ÂÆûÁé∞ÂéüÁêÜ ÁªßÊâøAPIExceptionÁöÑÁ±ªÈÄöÂ∏∏Ê†ºÂºèÂ¶Ç‰∏ãÔºö 1234567class PinyinTransferFail(APIException): """ Êó†Ê≥ïËØÜÂà´ÁöÑÊãºÈü≥Â≠óÊØç """ error_code = 1010 code = 400 description = "un-recognize pinyin" È°πÁõÆÁªìÊûÑÔºö È°πÁõÆ‰∏≠ËøòÊúâ‰∏Ä‰∫õÈîôËØØÂπ∂‰∏çÊòØÁî±APIExceptionÂÆö‰πâÁöÑÂõ†Ê≠§Â∞ÜÂÖ∂ÂÆö‰πâÂú®special_error.json‰∏≠ÔºåÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 12345678910111213[ &#123; "error_code": 1, "description": "‰ªªÂä°ÊâßË°åÂ§±Ë¥•" &#125;, &#123; "error_code": -2, "description": "adbÂçèËÆÆÊïÖÈöú" &#125;,&#123; "error_code": -3, "description": "ËÆæÂ§áÊ≤°Ëøû/ËøûÈîôwifi" &#125;] ÊÄùË∑ØÔºö ÈÄöÂ∏∏ÔºåÂä®ÊÄÅËØªÂèñÊâÄÊúâÁöÑÈîôËØØÁ±ªÂûãÁöÑÁ±ªÔºåÂπ∂Â∞ÜÁ±ªÁöÑerror_code Âíå doc(doc‰∏∫Á©∫ÁùÄÂèñdescription) ‰∏Ä‰∏ÄÂØπÂ∫îÔºåÁîüÊàêË°®ÂçïËøîÂõû„ÄÇ Âõ†Ê≠§ÂÆö‰πâÂ¶Ç‰∏ãÊñπÊ≥ïÔºö 123456789101112131415161718192021222324252627282930313233343536373839import importlibimport pkgutilfrom typing import Listimport pandas as pdimport inspectdef get_module_from_package(package): """ ÈùûÈÄíÂΩíÔºåÂÄºËé∑Âèñpackage‰∏ãÁ¨¨‰∏ÄÂ±ÇÁöÑmodule """ prefix = package.__name__ + "." return [importlib.import_module(modname) for importer, modname, ispkg in pkgutil.iter_modules(package.__path__, prefix) if not ispkg]def get_classes(module, superclass=object): """ Ëé∑Âèñmodule‰∏ãÁöÑ‰∏∫ superclass ÁöÑÂ≠êÁ±ªÁöÑÊâÄÊúâÁ±ª """ clsmembers = inspect.getmembers(module, inspect.isclass) return [_class for (name, _class) in clsmembers if issubclass(_class, superclass)]def convert_to_html(result: [List[List[str]]], title: List[str]): """ Â∞Ü[[str],[str],[str]] [str] ËΩ¨ÂåñÊàêhtml """ d = &#123;&#125; index = 0 for t in title: d[t] = result[index] index = index + 1 df = pd.DataFrame(d) df = df[title] h = df.to_html(index=False) return h ÂÆö‰πâÊé•Âè£ÔºåËøîÂõûhtmlË°®Ê†º 1234567891011121314151617181920212223242526272829303132333435@app.route('/doc/')def doc(): from app.execption.outer.error import APIException from app.execption.outer import error_code from app.libs.extension.tools import convert_to_html, get_module_from_package, get_classes import json from collections import namedtuple SpecialException = namedtuple("SpecialException", ["error_code", "description"]) title = ['code', 'name', 'description'] def special_case(): special_error_file_path = os.path.join(BASE_DIR, "app", "execption", "outer", "error_code", "special_error.json") with open(special_error_file_path, "r") as json_file: special_msg_list = json.load(json_file) return [ SpecialException(error_code=special_msg["error_code"], description=special_msg["description"]) for special_msg in special_msg_list ] _all = special_case() result = [[], [], []] for module in get_module_from_package(error_code): _all += get_classes(module, APIException) # È∏≠Â≠êÁ±ªÂûãÁâπÊÄß for _class in sorted(set(_all), key=lambda obj: obj.error_code): result[0].append(_class.error_code) result[1].append(getattr(_class, "__name__", "")) result[2].append( _class.__doc__.strip() if not isinstance(_class, SpecialException) and getattr(_class, "__doc__", "") else _class.description ) return convert_to_html(result, title)]]></content>
  </entry>
  <entry>
    <title><![CDATA[Èü≠ËèúÊó•ËÆ∞]]></title>
    <url>%2F2021%2F03%2F11%2F1%2F</url>
    <content type="text"><![CDATA[ÊúÄËøëÁöÑÈáëËûçÂ∏ÇÂú∫ÂìÄÂöéÈÅçÈáéÔºå‰Ωú‰∏∫‰∏Ä‰∏™2020Âπ¥Â∫ïÊâçÂÖ•Â∏ÇÁöÑÂ∞èÈü≠Ëèú‰πüÂèØË∞ìÊòØË¢´Â∏ÇÂú∫Áã†Áã†ÁöÑ‰∏ä‰∫Ü‰∏ÄËØæ„ÄÇ ‰ΩÜÂ∫ÜÂπ∏ÁöÑÊòØÂú®ÊäïËµÑÂàùÊúüÂ∞±ËÆ§ËØÜÂà∞ËÇ°Â∏ÇÁöÑÈ£éÈô©„ÄÇËÆ©ÊàëÂØπËÇ°Â∏ÇÊä±ÊúâÊï¨ÁïèÔºåËÄå‰∏çÊòØ‰∏ÄÂë≥Ë¥™Â©™ÔºåËøôÂØπÊàë‰πãÂêéÁöÑÁêÜË¥¢‰πãË∑Ø‰ºöÂ∏¶Êù•ÂæàÂ§ßÁöÑÂêØÂèëÂíåÂ∏ÆÂä©„ÄÇ ÂÖ∂ÂÆûÁêÜË¥¢ÊòØÂú®ÊàëÊúâ‰∫ÜÂÇ®ËìÑ‰πãÂêéÂ∞±‰∏ÄÁõ¥ËêåÁîüÁöÑ‰∏Ä‰∏™ÊÉ≥Ê≥ï„ÄÇ‰∏ÄÊñπÈù¢ÔºåÈúÄË¶ÅÂ∫îÂØπÊØèÂπ¥ÁöÑÈÄöË¥ßËÜ®ËÉÄ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÊÉ≥Ë¶ÅËé∑ÂèñÊõ¥Â§öÁöÑËµöÈí±ÊñπÂºè„ÄÇ Êàë‰∏ÄÁõ¥ÊòØÂìîÂì©ÂìîÂì©ÁöÑÂø†ÂÆûÁî®Êà∑„ÄÇËÆ∞ÂæóÂú®Â§ßÂ≠¶ÁöÑÊó∂ÂÄôÊàëÂ∞±‰∏ÄÁõ¥‰ΩøÁî®ÂìîÂì©ÂìîÂì©ÁúãÁæéÂâßÔºåÊó•Ââß„ÄÇÂêéÊù•BÁ´ôÂêàËßÑÂåñÂêéÔºåËøô‰∫õËµÑÊ∫ê‰πüÂ∞±Áõ∏Â∫î‰∏ãÊû∂‰∫Ü„ÄÇ BÁ´ôÂç¥Âá≠ÂÄüÊµÅÂ™í‰ΩìÂíåÂéüÂàõËßÜÈ¢ëÁöÑÁ§æÂå∫Âπ≥Âè∞ÁöÑÂÆö‰ΩçÊùÄÂá∫ÈáçÂõ¥ÔºåÊàê‰∏∫ËßÜÈ¢ëÈ¢ÜÂüüÁöÑÁøòÊ•ö„ÄÇ‰ªäÂπ¥Âπ¥ÂàùÁöÑBÁ´ôÂ∏ÇÂÄºËøò‰∏çÂà∞‰∏ÄÁôæ‰∫øÁæéÈáëÔºåÂèóÈôê‰∫éÁæéËÇ°‰∫§ÊòìÁöÑÊù°‰ª∂‰∏ÄÁõ¥Êàê‰∏∫‰∏Ä‰∏™ÊóÅËßÇËÄÖÁõÆÈÄÅÁùÄËøô‰∏™Â∞èÁ†¥Á´ôÂ∏ÇÂÄºÁøª‰∫ÜÂ∞ÜËøëÂõõÂÄç„ÄÇ ËøôËÆ©Êàë‰∏ãÊÑèËØÜËÆ§‰∏∫ËÇ°Â∏ÇÂ∞±ÊòØ‰∏Ä‰∏™ËµöÈí±Êú∫Âô®„ÄÇ‰ΩÜÊä±ÊúâÂØπËÇ°Â∏Ç‰∏çÁ°ÆÂÆöÊÄßÁöÑÊãÖÂøßÊàëËøòÊòØÈÄâÊã©‰∫ÜÊõ¥‰∏∫Á®≥Â¶•ÁöÑÊñπÂºèÔºåË¥≠‰π∞Âü∫Èáë„ÄÇ ÂàöÂºÄÂßãÊòØÈááÂèñÂÆöÊäïÁöÑÊñπÂºèÔºåÂàöËøõÂÖ•Â∏ÇÂú∫ÁöÑÊó∂ÂÄôÔºåÂ∞±ËøéÊù•‰∫Ü‰∏ÄÊ≥¢‰∏äÊ∂®„ÄÇÂõ†‰∏∫ÊäïËµÑÁöÑÊú¨ÈáëÊúâÈôêÔºåËé∑Âà©‰∏çÂ§ö„ÄÇ Ë¥™Â©™‰ΩøÊàëÂøòËÆ∞‰∫ÜÊÅêÊÉßÔºåÂºÄÂßã‰∏çÊñ≠ÁöÑÂ¢ûÂä†Êú¨ÈáëÔºåÂæóÁõä‰∫éÂ∏ÇÂú∫ÁöÑË°åÊÉÖÂêëÂ•ΩÔºåÊàë‰πüÁÆóÊòØÂ∞èÊúâÊî∂Áõä„ÄÇ Ëøô‰πüËÆ©ÊàëÂæóÊÑèÂøòÂΩ¢ÔºåËá™ËÆ§‰∏∫ÊâÄË∞ìÁöÑÊäïËµÑÂ∞ΩÂ¶ÇÊ≠§ÁÆÄÂçï„ÄÇ Âü∫ÈáëÁöÑÁÆ°ÁêÜË¥πÁî®Â¶ÇÊ≠§È´òÊòÇÔºå‰∏îËÇ°Â∏ÇÊâìÊñ∞ËøòÂèØ‰ª•Ëé∑ÂèñÁ®≥ÂÆöÊî∂ÁõäÔºåÊàëÁöÑÊäïËµÑËÉΩÂäõÂèà‰∏çÂº±Ôºå‰∏∫‰ªÄ‰πà‰∏çËá™Â∑±‰π∞ËÇ°Á•®Âë¢Ôºü ‰∫éÊòØ‰πéÊàë‰æøÊ¥ãÊ¥ãÊ¥íÊ¥íÁöÑËøõÂÖ•AËÇ°Â∏ÇÂú∫„ÄÇÂú®Ëøô‰∏™ÁñØÁãÇÁöÑËµöÈí±ÊïàÂ∫î‰∏ãÔºåÊàëÈÄêÊ∏êÂ∞ÜÈ£éÈô©ÁΩÆ‰πãËÑëÂêéÔºåÊâìÂÆå‰∫ÜÊúÄÂêéÁöÑ‰ΩôÁ≤ÆÔºåÂπªÊÉ≥ÁùÄ‰ªäÂπ¥ËÉΩÁõÜÊª°ÈíµÊª°„ÄÇ ‰ΩÜÊò•ËäÇ‰πãÂêéÁöÑËµ∞Âäø‰∏ÄÂ°åÁ≥äÊ∂ÇÔºåÁü≠Áü≠‰∏§‰∏™Á§ºÊãúÂç¥Êàê‰∫ÜÊàëÁöÑÁ¥´ÈªØÊó∂Âàª„ÄÇÊî∂ÁõäÂÖ®ÈÉ®ÂõûÂêêÔºåÊú¨Èáë‰πüÊÉ®ÈÅ≠ÊØíÂÆ≥„ÄÇÂ∏ÇÂú∫‰πüÁã†Áã†ÁöÑÁªôÊàë‰∏ä‰∫Ü‰∏ÄËØæ„ÄÇ ÁªèËøáËøôÊ¨°Â§±Ë¥•ÁöÑÊïôËÆ≠ÔºåËÆ©ÊàëÊ∑±ÂàªËÆ§ËØÜÂà∞‰∫∫ÊòØËµö‰∏ç‰∫ÜËÆ§Áü•ÊÑèÂ§ñÁöÑÈí±ÁöÑÔºåÊó∂ÂàªË¶ÅÂØπÂ∏ÇÂú∫Êä±ÊúâÊï¨Áïè‰πãÂøÉÔºåÂÅöÂà∞‰∏çÊáÇ‰∏çÁ¢∞ÔºåÂÖàÂ≠¶‰π†ÂÜçÊäïËµÑ„ÄÇ Êõ¥ËÆ©ÊàëËÆ§ËØÜÂà∞ÊúÄÂ•ΩÁöÑÊäïËµÑÂ∞±ÊòØËá™ÊàëÊäïËµÑ„ÄÇË¥¢ÂØåÊòØËÆ§Áü•ÁöÑÂèòÁé∞„ÄÇÊàë‰ª¨Â∫îËØ•‰∏çÊñ≠Â≠¶‰π†ÔºåÊèêÈ´òËÆ§Áü•ËÉΩÂäõÔºåÊèêÂçáÊäÄËÉΩÊ∞¥Âπ≥ÔºåÂºÄÈòîËßÜÈáéÁ©∫Èó¥„ÄÇ ÊäïÊú∫ÂèñÂ∑ßÔºåÁõ≤ÁõÆËá™‰ø°Âπ∂‰∏çËÉΩÁªô‰Ω†Â∏¶Êù•Á®≥ÂÆöÊî∂Áõä„ÄÇÂä™ÂäõÂ∑•‰ΩúÔºåÁßØÁ¥ØÊõ¥Â§öÁöÑÊú¨ÈáëÔºåÈÄöËøáËÆ§Áü•Ëé∑ÂèñÁ®≥ÂÆöÊî∂ÁõäÔºåÁÑ∂ÂêéÊÖ¢ÊÖ¢ÂèòÂØå„ÄÇ]]></content>
      <categories>
        <category>ÁêÜË¥¢</category>
      </categories>
      <tags>
        <tag>ÁêÜË¥¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈÄâÁÇπÂ±ïÁ§∫ÈóÆÈ¢òÁöÑÂàÜÊûê‰∏éÊÄªÁªì]]></title>
    <url>%2F2020%2F12%2F23%2F1%2F</url>
    <content type="text"><![CDATA[Â∑•‰Ωú‰∏≠ÈöæÂÖç‰ºöÈÅáÂà∞‰∏Ä‰∫õÈóÆÈ¢òÔºåÂΩìÈÅ≠ÈÅáÈóÆÈ¢òÊó∂ÔºåËØ•Â¶Ç‰ΩïÂàÜÊûêÂπ∂ÂæóÂà∞Ëß£ÂÜ≥ÊñπÊ°àÔºåÊòØÂØπÁ®ãÂ∫èÂëòÂ∫îÂØπÈóÆÈ¢òÁöÑËÉΩÂäõÂíåÂØπÁü•ËØÜÁöÑÊéåÊè°Á®ãÂ∫¶ÁöÑ‰∏ÄÊ¨°ËÄÉÈ™å„ÄÇÊàëÂú®Â∑•‰ΩúÊó∂‰πüÈÅáÂà∞‰∫ÜÈóÆÈ¢òÔºåÂõ†Ê≠§ÊàëÊääÂÆÉËÆ∞ÂΩï‰∏ãÊù•Ôºå‰πüÁÆóÊòØÊàêÈïøÁöÑÂ±•ÂéÜ„ÄÇ ¬∂Ê¶ÇËø∞ Êú¨‰∫∫ÊâÄÂú®ÂÖ¨Âè∏‰∏öÂä°‰∏∫ÊâãÊú∫Ëá™Âä®ÂåñÊµãËØïÂπ≥Âè∞ÔºåÈíàÂØπÁî®‰æãÂºÄÂèëÁ†îÂèë‰∫Ü‰∏ÄÊ¨æÁî®‰æãÁºñËæëÂèØËßÜÂåñÂ∑•ÂÖ∑„ÄÇ Áî®‰æãÁºñËæëËøáÁ®ã‰∏≠Êúâ‰∏Ä‰∏™ÁÇπÂáªÂ±èÂπï‰ΩçÁΩÆÁöÑÂäüËÉΩ„ÄÇÁïåÈù¢ÁöÑ‰∫§‰∫íÊòØÁî®Êà∑ÈÄâÊã©‰∏ä‰º†‰∏ÄÂº†ÊâãÊú∫Â±èÂπïÊà™ÂõæÔºåÊàñÊòØÁÇπÂáªÁïåÈù¢‰∏äÁöÑÊà™ÂõæÊåâÈíÆÔºåÂêéÂØπÊâãÊú∫Êà™ÂõæÂ±ïÁ§∫Âú®ÁïåÈù¢‰∏ä„ÄÇÁî®Êà∑ÁÇπÂáªÂõæÁâáÂå∫ÂüüÔºåÁÇπÂáª‰ΩçÁΩÆÁöÑÂùêÊ†á‰æø‰ºö‰øùÂ≠òÂú®Áî®‰æãÁöÑÈÄªËæëÊµÅ‰∏≠ÔºåÊâßË°åÁî®‰æãÊó∂ÔºåËøêË°åÂà∞Ëøô‰∏™step‰æø‰ºöÂáÜÁ°ÆÁöÑÁÇπÂáªËÆæÂÆöÁöÑ‰ΩçÁΩÆ„ÄÇ ‰ΩÜÊòØÂú®Êü•ÁúãÁî®‰æãÁöÑÊó∂ÂÄôÔºåÂè™Êúâ‰∏Ä‰∏™Âå∫ÂüüÂùêÊ†áÂæàÈöæÂõûÊ∫ØÂΩìÊó∂ÁöÑÁºñËæëÂÜÖÂÆπ„ÄÇÂõ†Ê≠§ÈúÄË¶ÅÂ¢ûÂä†‰∏Ä‰∏™Êñ∞ÂäüËÉΩÔºöÂΩìÁÇπÂáªitemÊó∂ÔºåËé∑ÂèñÂõæÁâáÂ±ïÁ§∫Âú®È°µÈù¢‰∏äÂπ∂Ëé∑ÂèñÂùêÊ†áÁÇπÂ±ïÁ§∫Âú®ÂõæÁâá‰∏ä„ÄÇ ÂÆûÁé∞‰∏äÔºåÂÆö‰πâ‰∏Ä‰∏™ÁªÑ‰ª∂ÔºåÂú®props‰∏≠ÂÆö‰πâ‰∏§‰∏™ÂèÇÊï∞imgSrc,selectPoint,Âπ∂‰ΩøÁî®watchÁõëÂê¨„ÄÇimgSrcÂèòÂåñÊó∂Â∞ÜÊñ∞ÂõæÁâáÊõøÊç¢ÂéüÊúâÂõæÁâáÔºåselectPointÂèòÂåñÊó∂Â∞Ü‰πãÂâçÂú®ÂõæÁâá‰∏≠Ê†áÊ≥®ÁöÑÂå∫ÂüüÊ∏ÖÈô§ÁÑ∂ÂêéÂ±ïÁ§∫Êñ∞ÁöÑÈÄâÁÇπ„ÄÇ‰ΩÜÂÆûÈôÖÊÉÖÂÜµÊòØÂõæÁâáÂ±ïÁ§∫‰ΩÜÈÄâÁÇπÈùûË¢´Ê†áËÆ∞„ÄÇ ¬∂ÈóÆÈ¢òÂàÜÊûê ¬∂selectPointÁöÑÁõëÂê¨ÂáΩÊï∞ÂÖàÊâßË°åÔºü watchÂáΩÊï∞ÁõëÂê¨ÁöÑÂ§ö‰∏™Â≠óÊÆµÂèëÁîüÊîπÂèòÊó∂Ôºå‰ºö‰ªé‰∏äÂà∞‰∏ã‰æùÊ¨°ÊâßË°å„ÄÇÈÄöËøáÊü•Áúã‰ª£Á†ÅÁ°ÆËÆ§ÊâßË°åÈ°∫Â∫èÊ≤°ÊúâÈóÆÈ¢ò„ÄÇ 12345678watch: &#123; imgSrc (val) &#123; ... &#125;, selectPointShow (val) &#123; ... &#125;&#125; ¬∂ÂõæÁâáÂä†ËΩΩËøáÁ®ãÊòØÂê¶ÂºÇÊ≠•ËøõË°åÔºü ÂõæÁâáÂä†ËΩΩÂ±û‰∫éËÄóÊó∂Êìç‰ΩúÔºåjsÂçïÁ∫øÁ®ãÊâßË°åËÇØÂÆö‰∏çËÉΩÂÆπÂøç„ÄÇÈÄöËøá review Á°ÆÂÆö‰∫ÜÂõæÁâáÂºÇÊ≠•Âä†ËΩΩÂÆåÊàêÂêé‰ºöË∞ÉÁî® onload ÊñπÊ≥ï„ÄÇonloadÊåáÂÆö‰∫Ü‰∏Ä‰∏™ÂõûË∞ÉÂáΩÊï∞,Â£∞ÊòécanvasÂ∞ÜÂõæÁâáÁªòÂà∂Âú®ÁîªÂ∏É‰∏äÔºåÈÄâÁÇπÊìç‰ΩúÊòØ‰ΩøÁî®canvasÂ∞ÜÁªòÂà∂ÈÄâÁÇπÂå∫ÂüüÂú®ÁîªÂ∏É‰∏ä„ÄÇ Â¶ÇÊûúÈÄâÁÇπÂíåÂõæÁâáÊòØ‰∏ÄÂØπ‰∏ÄÂ≠òÂú®ÁöÑÔºåÁßªÈô§ÂØπselectPointÁöÑÁõëÂê¨ÔºåÁõ¥Êé•Â∞ÜÈÄâÁÇπÂ±ïÁ§∫ÂÜôÂà∞onloadÈÄªËæë‰∏≠Âç≥ÂèØÔºå‰ΩÜÂéüÊú¨ÁöÑÈúÄÊ±ÇÂèØ‰ª•ÂÖÅËÆ∏ÂØπ‰∏ÄÂº†ÂõæÁâáËøõË°åÂ§ö‰∏™ÈÄâÁÇπ„ÄÇÂõ†Ê≠§selectPoint‰ªçÈúÄÂ≠òÂú®„ÄÇ ¬∂ÈóÆÈ¢òÁ°ÆËÆ§ ÈÄöËøáÂàÜÊûêÂæóÁü•ÂõæÁâáÂä†ËΩΩËøáÁ®ã‰∏∫ÂºÇÊ≠•Âä†ËΩΩÔºåÂπ∂‰∏çËÉΩÁ°Æ‰øùselectPointÈÄâÁÇπÂ±ïÁ§∫‰πãÂâçÔºåÂõæÁâáÂ∑≤ÁªèÂä†ËΩΩÂÆåÊàêÂπ∂ÁªòÂà∂ÂÆåÊØï„ÄÇ ¬∂Ëß£ÂÜ≥ÊñπÊ°à ¬∂ÂõæÁâáÂ±ïÁ§∫ÂíåÈÄâÁÇπÂ±ïÁ§∫ÁöÑ‰∫§‰∫íÂàÜÁ¶ª Â∞ÜÂõæÁâáÂ±ïÁ§∫ÂíåÈÄâÁÇπÂ±ïÁ§∫ÁöÑ‰∫§‰∫íÂàÜÁ¶ªÔºåÁî®Êà∑ÂøÖÈ°ªÂÖàÈÄâÊã©ÂõæÁâáÔºåÁÑ∂ÂêéÂÜçÈÄâÊã©‰πãÂâçÁÇπÂáªÁöÑÂùêÊ†áÂú®ÂõæÁâá‰∏äËøõË°åÂ±ïÁ§∫„ÄÇ Áº∫ÁÇπÔºöÂ¢ûÂä†‰∫ÜÁî®Êà∑Êìç‰ΩúÁöÑÂ§çÊùÇÂ∫¶ÔºåÂπ∂‰∏îÂíå‰πãÂâçÂÆûÁé∞ÈÄªËæë‰∏ç‰∏ÄËá¥ÔºåÊîπÂä®ËæÉÂ§ß„ÄÇ ¬∂selectPointÂª∂Êó∂Âä†ËΩΩ ÈÄöËøá‰ΩøÁî® setTimeout Â∞Ü selectPoint ÈÄâÁÇπÂ±ïÁ§∫ÁöÑÈÄªËæëÂåÖË£πÂª∂Êó∂Âä†ËΩΩÔºå‰øùËØÅÂ±ïÁ§∫ÁöÑÂå∫ÂüüÂèØ‰ª•ÂëàÁé∞„ÄÇ Áº∫ÁÇπÔºöÂª∂Êó∂Âä†ËΩΩÁöÑÊó∂Èó¥‰∏çËÉΩÁ°ÆÂÆö„ÄÇ ¬∂ÂõûË∞ÉÈÄöÁü•ÂõæÁâáÂä†ËΩΩÂÆåÊØï data‰∏≠ ÂÆö‰πâ ÂèòÈáè picLoading = false,ÈÄâÁÇπÂä†ËΩΩÊó∂Ôºå‰ΩøÁî® setInterval ÂÆöÊó∂Êü•Áúã picLoading === true„ÄÇ ÂõæÁâáÂºÇÊ≠•Âä†ËΩΩÂÆåÊØïË∞ÉÁî® onload ÊñπÊ≥ïËøõË°åÂõæÁâáÁöÑÁªòÂà∂ÔºåË∞ÉÁî® CanvasDrawImage.drawImage ÊñπÊ≥ï„ÄÇÈÄöËøáÂØπ CanvasDrawImage.drawImage ËÆæÁΩÆÂõûË∞ÉÂáΩÊï∞ÔºåÁªòÂà∂ÂÆåÊàêÂêé‰øÆÊîπ picLoading = true ÈÄâÁÇπÂ±ïÁ§∫Âπ∂ÈîÄÊØÅ setInterval„ÄÇ ÂäüËÉΩÁ§∫ÊÑèÂõæÔºö]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>ÂõûË∞É</tag>
        <tag>ÂºÇÊ≠•</tag>
        <tag>canvas</tag>
        <tag>vuex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[InnoDB‰∏≠‰∏ÄÊù°updateËØ≠Âè•Âà∞Â∫ïÊ∂âÂèäÂà∞‰∫ÜÂì™‰∫õÂÜÖÂÆπÂë¢Ôºü]]></title>
    <url>%2F2020%2F12%2F17%2F1%2F</url>
    <content type="text"><![CDATA[InnoDBÂú®Â§ÑÁêÜÊõ¥Êñ∞ËØ≠Âè•ÁöÑÊó∂ÂÄôÔºåÂπ∂‰∏ç‰ºöÂ∞ÜÊï∞ÊçÆÁõ¥Êé•Êõ¥Êñ∞Âà∞Êï∞ÊçÆÂ∫ìÔºåÂ§ßÈáèÁöÑÁ£ÅÁõòÊìç‰ΩúÂäøÂøÖÂΩ±ÂìçÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩÔºåInnoDBÊòØÊÄé‰πàÂÅöÁöÑÂë¢ÔºüInnoDBÈÄöËøáÂºïÂÖ•ÂÜÖÂ≠òÁªÑ‰ª∂buffer pool‰ªéËÄåÈÅøÂÖçÈ¢ëÁπÅÂØπÁ£ÅÁõòÂÅöÈöèÊú∫ËØªÂÜôÊìç‰ΩúÔºåÂπ∂ÂºïÂÖ•redo log(ÂÜôÂÖ•Êó•Âøó)ÁöÑÊú∫Âà∂‰øùËØÅ‰∫ÜÊï∞ÊçÆ‰∏ç‰∏¢Â§±„ÄÇÈááÁî®ÁºìÂ≠òÂøÖÁÑ∂Â≠òÂú®ÁºìÂ≠ò‰∏çË∂≥ÈúÄË¶ÅËøõË°åÂÜÖÂ≠òÊ∑òÊ±∞,InnoDBÂàôÈááÂèñ‰∏ÄÁßçÁ±ª‰ººlruÁöÑÂÜÖÂ≠òÊ∑òÊ±∞ÁÆóÊ≥ï„ÄÇ Êú¨ÊñáÂ∞Ü‰ª•InnoDB‰Ωú‰∏∫Â≠òÂÇ®ÂºïÊìéÁöÑMysqlÂ±ïÂºÄËÆ∫Ëø∞„ÄÇ ¬∂updateËØ≠Âè•ÊâßË°åËøáÁ®ãÂ¶Ç‰Ωï‰∏äÈîÅÔºü updateËØ≠Âè•Âú®ÊâßË°åÁöÑÊó∂ÂÄôÂàôÊòØÂΩìÂâçËØªÔºåÂæóÂà∞ÊúÄÊñ∞ÁöÑ‰ø°ÊÅØÂπ∂‰∏îÈîÅÂÆöÁõ∏Â∫îÁöÑËÆ∞ÂΩï„ÄÇ‰∏ÄÊù°updateËØ≠Âè•Âú®ÊâßË°åËøáÁ®ã‰∏≠ÁöÑÈîÅÂÆöËßÑÂàôÂÖ∂ÂÆûÊòØ‰æùÊçÆInnoDBË°åÈîÅËßÑÂàô„ÄÇ InnoDBË°åÈîÅÊòØÈÄöËøáÁªôÁ¥¢Âºï‰∏äÁöÑÁ¥¢ÂºïÈ°πÂä†ÈîÅÊù•ÂÆûÁé∞ÁöÑÔºåInnoDBËøôÁßçË°åÈîÅÂÆûÁé∞ÁâπÁÇπÊÑèÂë≥ÁùÄÔºö Âè™ÊúâÈÄöËøáÁ¥¢ÂºïÊù°‰ª∂Ê£ÄÁ¥¢Êï∞ÊçÆÔºåInnoDBÊâç‰ΩøÁî®Ë°åÁ∫ßÈîÅÔºåÂê¶ÂàôÔºåInnoDBÂ∞Ü‰ΩøÁî®Ë°®ÈîÅ„ÄÇ Âõ†Ê≠§Êõ¥Êñ∞Êù°‰ª∂‰∏∫ÈùûÁ¥¢ÂºïÂ≠óÊÆµÔºåË°åÈîÅ‰ºöÂçáÁ∫ßÊàêË°®ÈîÅ„ÄÇÊõ¥Êñ∞Êù°‰ª∂‰∏∫Á¥¢ÂºïÂ≠óÊÆµÊó∂ÔºåË°åÈîÅ‰ºöÈîÅÂÆöÊª°Ë∂≥Êù°‰ª∂ÁöÑË°å„ÄÇ ¬∂‰∏∫‰ªÄ‰πàÂÜôÂÖ•ÁºìÂ≠òÂç¥ÂèØ‰ª•‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±Ôºü Êï∞ÊçÆÂÜôÂÖ•ÁºìÂ≠òÂπ∂‰∏çËÉΩ‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÔºåÂõ†Ê≠§InnoDBÂºïÂÖ•‰∫Ü redo log(ÈáçÂÅöÊó•Âøó)„ÄÇ ¬∂WAL WALÁöÑÂÖ®Áß∞ÊòØWrite-Ahead LoggingÔºåMysqlÂú®Êõ¥Êñ∞Êï∞ÊçÆÊó∂ÈááÁî®‰∫Ü‰∏ÄÁßçÊó•ÂøóÂÖàË°åÁöÑÁ≠ñÁï•,ÂÖàÂÜôÊó•ÂøóÔºåÂÜçÂÜôÁ£ÅÁõò„ÄÇ ÂΩìÊúâ‰∏ÄÊù°ËÆ∞ÂΩïÈúÄË¶ÅÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºåInnoDBÂºïÊìéÂ∞±‰ºöÂÖàÊääËÆ∞ÂΩïÂÜôÂà∞redo logÈáåÈù¢ÔºåÂπ∂Êõ¥Êñ∞ÂÜÖÂ≠ò,ÁÑ∂Âêé‰ºöÂú®ÈÄÇÂΩìÁöÑÊó∂ÂÄôÔºåÂ∞ÜËøô‰∏™Êìç‰ΩúËÆ∞ÂΩïÊõ¥Êñ∞Âà∞Á£ÅÁõò„ÄÇ redo logËÆ∞ÂΩïÁöÑÊòØÁõ∏ÂØπmysqlÁ£ÅÁõò‰∏≠ÁöÑÂ¢ûÈáèÊï∞ÊçÆÔºåÂèØ‰ª•‰øùËØÅÂç≥‰ΩøÊï∞ÊçÆÂ∫ìÂèëÁîüÂºÇÂ∏∏ÈáçÂêØÔºåÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÊ∏ÖÁ©∫‰∫ÜÔºå‰πãÂâçÊèê‰∫§ÁöÑËÆ∞ÂΩïÈ°µ‰∏ç‰ºö‰∏¢Â§±ÔºåÂÖ∑Â§ácrash-safeÁöÑËÉΩÂäõ„ÄÇ ¬∂buffer pool ‰∏ÄÊé¢Á©∂Á´ü ÂÜÖÂ≠òÁöÑÊï∞ÊçÆÈ°µÊòØÂú®Buffer Pool ‰∏≠ÁÆ°ÁêÜÁöÑÔºåÈÄöÂ∏∏‰ª•È°µ(page)‰∏∫Âçï‰ΩçÁºìÂ≠òÊï∞ÊçÆÔºåÊØèÊ¨°ËØªÂÜôÊï∞ÊçÆÈÉΩ‰ºöÈÄöËøá Buffer Pool„ÄÇ Âú®WALÈáåBuffer Pool Ëµ∑Âà∞‰∫ÜÂä†ÈÄüÊõ¥Êñ∞ÁöÑ‰ΩúÁî®„ÄÇÂêåÊó∂Êü•ËØ¢Êï∞ÊçÆÊó∂ÔºåÂΩìBuffer Pool ‰∏≠Â≠òÂú®Áî®Êà∑ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆÊó∂ÔºåÁõ¥Êé•ËøîÂõû„ÄÇÊ≤°ÊúâÊó∂ÊâçÂéªÁ°¨Áõò‰∏≠Ëé∑ÂèñÂπ∂Êõ¥Êñ∞Buffer PoolÔºå‰πü‰øùËØÅ‰∫ÜÊü•ËØ¢ÁöÑÊïàÁéá„ÄÇ ¬∂Âü∫Êú¨Ê¶ÇÂøµ Êï∞ÊçÆÂú®ÂÜÖÂ≠ò‰∏≠Êõ¥ÊîπÂêéÂπ∂‰∏ç‰ºöÁ´ãÂàªÂÜôÂÖ•Âà∞Á£ÅÁõò‰∏≠ÔºåËøô‰∫õÊï∞ÊçÆË¢´Âè´ÂÅöËÑèÊï∞ÊçÆ„ÄÇ ÂΩìÂÜÖÂ≠òÊï∞ÊçÆÈ°µË∑üÁ£ÅÁõòÊï∞ÊçÆÈ°µÂÜÖÂÆπ‰∏ç‰∏ÄËá¥ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Áß∞Ëøô‰∏™ÂÜÖÂ≠òÈ°µ‰∏∫ËÑèÈ°µ„ÄÇ ÂÜÖÂ≠òÊï∞ÊçÆÂÜôÂÖ•Âà∞Á£ÅÁõòÂêéÔºåÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆÈ°µÁöÑÂÜÖÂÆπ‰∏ÄËá¥ÔºåÁß∞‰∏∫Âπ≤ÂáÄÈ°µ„ÄÇ ÊääÂÜÖÂ≠òÈáåÁöÑÊï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÁöÑËøáÁ®ãË¢´Áß∞‰πã‰∏∫Flush„ÄÇ ÈÄöËøá innodb_buffer_pool_sizeËÆæÁΩÆÁºìÂ≠òÁöÑÊÄªÂÆπÈáè„ÄÇ mysql5.6 ÂºïÂÖ• innodb_buffer_pool_instances ÂèØ‰ª•ËÆæÁΩÆÂ§ö‰∏™ÁºìÂÜ≤Ê±†ÂØπË±°ÔºåÊ≠§ÂèÇÊï∞ÈªòËÆ§‰∏∫8Ôºå‰∏ªË¶ÅÁõÆÁöÑÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ ‰∫íÊñ•ÈîÅÔºå ÊØè‰∏™ÁºìÂÜ≤Ê±†ÁÆ°ÁêÜÂÖ∂Ëá™Â∑±ÁöÑÁ©∫Èó≤ÂàóË°®ÔºåÊèêÈ´òÊü•ËØ¢Âπ∂ÂèëÊÄß„ÄÇ ¬∂ËÑèÈ°µÂà∑Êñ∞ËßÑÂàô mysqlÂà∑ËÑèÈ°µ‰ºöÂú®‰ª•‰∏ãÂõõ‰∏≠Âú∫ÊôØ‰∏ãËß¶ÂèëÔºö ÂÜÖÂ≠ò‰∏çÂ§üÁî®: Â¶ÇÊûúÂÜÖÂ≠ò‰∏çÂ§üÁî®‰∫Ü‰ºöÊ†πÊçÆLRUÁÆóÊ≥ïÊ∑òÊ±∞ÊóßÊï∞ÊçÆÔºåÂ¶ÇÊûúÊ∑òÊ±∞ÁöÑÊòØËÑèÈ°µÂøÖÈ°ªÂÖàÂà∑ËÑè„ÄÇ redo logÂÜôÊª°: redo logÂÜôÊª°‰∫ÜÔºåmysqlÂøÖÈ°ªÂÅúÊ≠¢ÊâÄÊúâÁöÑÊõ¥Êñ∞Êìç‰ΩúÔºåÁÑ∂ÂêéÊäächeckpointÂæÄÂâçÊé®ËøõÔºåÈÇ£‰πàÊé®ËøõÁöÑËøô‰∏ÄÈÉ®ÂàÜÂØπÂ∫îÁöÑËÑèÈ°µÈÉΩÈúÄË¶ÅÂà∑Âà∞Á£ÅÁõò‰∏ä„ÄÇ mysqlÊ≠£Â∏∏ÂÖ≥Èó≠: mysqlÊ≠£Â∏∏ÂÖ≥Èó≠Êó∂ÂêéÔºå‰ºöÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑËÑèÈ°µÂÖ®ÈÉ®Âà∑Âà∞Á£ÅÁõò‰∏ä„ÄÇ mysqlÁ©∫Èó≤Êó∂: mysqlÂú®ÊúçÂä°Âô®Ë¥üËΩΩËæÉÂ∞èÊó∂‰ºö‰∏ªÂä®Âà∑ËÑèÈ°µ„ÄÇ ÂΩìÂÜÖÂ≠ò‰∏çË∂≥Êó∂ÔºåÊ∑òÊ±∞ÁöÑÊï∞ÊçÆÈ°µ‰∏∫ËÑèÈ°µÊó∂ÔºåËøõË°åÂà∑ËÑè„ÄÇredo logÈáçÊîæÊó∂ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êï∞ÊçÆÈ°µÂ∑≤ÁªèÊòØÂà∑ËøáÔºå‰ºöËØÜÂà´Âá∫Êù•Âπ∂Ë∑≥Ëøá„ÄÇ ¬∂InnoDBÂà∑ËÑèÈ°µÁöÑÊéßÂà∂Á≠ñÁï• ÈÄöËøáËÆæÁΩÆinnodb_io_capacityÂëäÁü•InnoDB‰Ω†ÁöÑÁ£ÅÁõòËÉΩÂäõ,InnoDB‰ºöÊ†πÊçÆÁ£ÅÁõòËÉΩÂäõËÆ°ÁÆóÂá∫Âà∑ÁõòÁöÑÈÄüÁéá„ÄÇÂª∫ËÆÆËÆæÁΩÆÊàêÁ£ÅÁõòÁöÑIOPS„ÄÇÁ£ÅÁõòÁöÑ IOPSÂèØ‰ª•ÈÄöËøáfioËøô‰∏™Â∑•ÂÖ∑Êù•ÊµãËØï innodb_io_capacityËÆæÁΩÆËøáÂ∞è‰ºöÂØºËá¥Âà∑Â§™ÊÖ¢ÔºåÈÄ†ÊàêËÑèÈ°µÁ¥ØÁßØÔºåÂÖ∂Ê¨°ÊòØredo logÂÜôÊª°„ÄÇÊâÄ‰ª•ÔºåInnoDBÁöÑÂà∑ÁõòÈÄüÂ∫¶Â∞±ÊòØË¶ÅÂèÇËÄÉËøô‰∏§‰∏™Âõ†Á¥†:‰∏Ä‰∏™ÊòØËÑèÈ°µÊØî‰æãÔºå‰∏Ä‰∏™ÊòØredo logÂÜôÁõòÈÄüÂ∫¶„ÄÇ ÂèÇÊï∞Ôºöinnodb_max_dirty_pages_pct ÊòØËÑèÈ°µÊØî‰æã‰∏äÈôêÔºåÈªòËÆ§ÂÄºÊòØ75%„ÄÇ ËÑèÈ°µÊØî‰æãÊòØÈÄöËøáInnodb_buffer_pool_pages_dirty/Innodb_buffer_pool_pages_totalÂæóÂà∞ÁöÑ ¬∂ËøûÂùêÁ≠ñÁï• MySQL‰∏≠ÔºåÂà∑ËÑèÈ°µÊó∂ÔºåÂ¶ÇÊûúËøô‰∏™Êï∞ÊçÆÈ°µÊóÅËæπÁöÑÊï∞ÊçÆÈ°µÂàöÂ•ΩÊòØËÑèÈ°µÔºåÂ∞±‰ºöÊääÊóÅËæπÁöÑËÑèÈ°µ‰∏ÄÂπ∂Âà∑ÊéâÔºåËÄå‰∏îËøô‰∏™ÈÄªËæëËøòÂèØ‰ª•ÁªßÁª≠ËîìÂª∂„ÄÇ InnoDB‰∏≠ÁöÑinnodb_flush_neighbors ÂèÇÊï∞Â∞±ÊòØÁî®Êù•ÊéßÂà∂Ëøô‰∏™Ë°å‰∏∫ÁöÑÔºåÂÄº‰∏∫1ÁöÑÊó∂ÂÄô‰ºöÊúâ‰∏äËø∞ÁöÑËøûÂùêÊú∫Âà∂ÔºåÂÄº‰∏∫0Êó∂Ë°®Á§∫‰∏ç‰ºöËîìÂª∂„ÄÇ ËøôÁßçÊú∫Âà∂ÁöÑ‰ºòÂåñÂú®Êú∫Ê¢∞Á°¨ÁõòÊó∂‰ª£ÊòØÂæàÊúâÊÑè‰πâÁöÑÔºåÂèØ‰ª•ÂáèÂ∞ëÂæàÂ§öÈöèÊú∫IO„ÄÇÂΩì‰ΩøÁî®ÁöÑÊòØSSDËøôÁ±ªIOPSÊØîËæÉÈ´òÁöÑËÆæÂ§áÁöÑËØùÔºåÈöèÊú∫IOÂπ∂ÈùûÁì∂È¢àÔºåÂª∫ËÆÆËÆæÁΩÆÊàê0„ÄÇ ¬∂ÂÜÖÂ≠òÊ∑òÊ±∞Á≠ñÁï• ËÄåBuffer PoolÁöÑÂ≠òÂú®ÂØπÊü•ËØ¢Ëµ∑Âà∞Âä†ÈÄüÊïàÊûúÔºå‰ΩÜÂ¶ÇÊûúÂ§öÊ¨°Êü•ËØ¢ÈÉΩÊ≤°ÊúâÂëΩ‰∏≠ÔºåÂÜÖÂ≠òÂëΩ‰∏≠Áéá‰∏çÈ´òÂÖ∂ÂÆûÂ∞±Ê≤°ÊúâÂ§™Â§ßÊÑè‰πâ‰∫ÜÔºåÈÄöËøáshow engine innodb statusÂèØ‰ª•Êü•ÁúãBPÂëΩ‰∏≠Áéá„ÄÇ InnoDB ÁöÑBuffer PoolÁöÑÂ§ßÂ∞èÊòØÁî±ÂèÇÊï∞ innodb_buffer_pool_sizeÁ°ÆÂÆöÁöÑÔºå‰∏ÄËà¨Âª∫ËÆÆËÆæÁΩÆÊàêÂèØÁî®Áâ©ÁêÜÂÜÖÂ≠òÁöÑ60%~80%„ÄÇBuffer PoolÊª°‰∫ÜÔºåËÄåÂèàË¶Å‰ªéÁ£ÅÁõòËØªÂÖ•‰∏Ä‰∏™Êï∞ÊçÆÈ°µÔºåÈÇ£ËÇØÂÆöÊòØË¶ÅÊ∑òÊ±∞‰∏Ä‰∏™ÊóßÊï∞ÊçÆÈ°µÁöÑ„ÄÇ‰∏Ä‰∏™Â•ΩÁöÑÊ∑òÊ±∞Á≠ñÁï•‰ºöÊûÅÂ§ßÁöÑÂΩ±Âìç‰πãÂêéÊü•ËØ¢ÁöÑÂÜÖÂ≠òÂëΩ‰∏≠Áéá„ÄÇ InnoDBÂÜÖÂ≠òÁÆ°ÁêÜ‰ΩøÁî®ÁöÑÊòØLRUÁÆóÊ≥ïÔºå‰ΩÜÂú®Ê≠§Âü∫Á°Ä‰∏äÂÅö‰∫Ü‰∏Ä‰∫õÊîπËøõ„ÄÇ ¬∂‰∏∫‰ªÄ‰πà‰∏çËÉΩÁõ¥Êé•‰ΩøÁî®LRUÁÆóÊ≥ï LRUÁÆóÊ≥ï‰∏ÄËà¨‰ºö‰ΩøÁî®ÈìæË°®ÂíåhashÊù•ÂÆûÁé∞„ÄÇÊñ∞ÁöÑÊï∞ÊçÆ‰ºöÂÜôÂÖ•Âà∞ÈìæË°®ÁöÑÂ§¥ÈÉ®ÔºåÂΩìÈÅ≠ÈÅáÂÜÖÂ≠ò‰∏çË∂≥Êó∂Ôºå‰ºöÂ∞ÜÂ∞æÈÉ®Êï∞ÊçÆËøõË°åÊ∑òÊ±∞„ÄÇ Âú®mysql‰∏≠ÔºåËØ•ÁÆóÊ≥ïÁúã‰ººÂèØ‰ª•Êª°Ë∂≥„ÄÇ‰ΩÜÊòØmysql‰∏≠Âá∫Áé∞ÂÖ®Ë°®Êâ´ÊèèÊó∂ÔºåË°®Êï∞ÊçÆÁâπÂà´Â§ßÔºå‰æø‰ºöÊääÂΩìÂâçÁöÑBuffer PoolÈáåÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Ê∑òÊ±∞ÊéâÔºåÂ≠òÂÖ•Êâ´ÊèèËøáÁ®ã‰∏≠ËÆøÈóÆÂà∞ÁöÑÊï∞ÊçÆÈ°µÁöÑÂÜÖÂÆπ„ÄÇ ‰ΩÜËØ•Ë°®Êï∞ÊçÆÂú®Âπ≥Êó∂‰∏öÂä°Âú∫ÊôØ‰∏ãÂπ∂‰∏ç‰ºöËÆøÈóÆÔºåÂä†ËΩΩÂà∞Buffer Pool‰∏≠ÁöÑÈ°µÂπ∂Ê≤°ÊúâË¢´‰ΩøÁî®ÔºåÊúÄÁªà‰æø‰ºöÂØºËá¥Buffer PoolÁöÑÂÜÖÂ≠òÂëΩ‰∏≠ÁéáÊÄ•Ââß‰∏ãÈôçÔºåÁ£ÅÁõòÂéãÂäõÂ¢ûÂä†ÔºåSQLËØ≠Âè•ÂìçÂ∫îÂèòÊÖ¢„ÄÇ ¬∂ÂàÜÂ±ÇÁöÑLRUÁÆóÊ≥ï Ê≠£ÊòØÂ≠òÂú®Â§ßÈáèÁöÑ‰ΩøÁî®È¢ëÁéáÂÅè‰ΩéÁöÑÈ°µË¢´ÂêåÊó∂Âä†ËΩΩÂà∞Buffer PoolÊó∂ÔºåÂèØËÉΩ‰ºöÊääÈÇ£‰∫õ‰ΩøÁî®È¢ëÁéáÈùûÂ∏∏È´òÁöÑÈ°µ‰ªéBuffer Pool‰∏≠Ê∑òÊ±∞ÊéâÁöÑÊÉÖÂÜµ„ÄÇMysqlÊåâÁÖß5:3(innodb_old_blocks_pctÂèÇÊï∞ÊéßÂà∂)ÁöÑÊØî‰æãÊääÊï¥‰∏™LRUÈìæË°®ÂàÜÊàê‰∫ÜyoungÂå∫ÂüüÂíåoldÂå∫Âüü„ÄÇ ÊîπËøõÂêéÁöÑLRUÁÆóÊ≥ïÊâßË°åÊµÅÔºö Á£ÅÁõò‰∏≠È°µÊï∞ÊçÆÁ¨¨‰∏ÄÊ¨°Âä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠Êó∂ÔºåÂÖàÁºìÂ≠òÂà∞ÈìæË°®oldÂå∫ÁöÑÂ§¥ÈÉ®ÔºåËøôÊ†∑È¢ÑËØªÁöÑÊï∞ÊçÆÊ≤°‰ΩøÁî®ÁöÑËØùÔºåÂ∞±‰ºöÈÄêÊ∏êË¢´Ê∑òÊ±∞ÊéâÔºõ‰∏î‰∏ç‰ºöÂΩ±ÂìçÂà∞youngÂå∫Âüü‰∏≠‰ΩøÁî®È¢ëÁπÅÁöÑÁºìÂ≠òÊï∞ÊçÆ„ÄÇ Â§Ñ‰∫éoldÂå∫ÂüüÁöÑÊï∞ÊçÆÈ°µÔºåÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆÊó∂Â∞±Âú®ÂÆÉÂØπÂ∫îÁöÑÊéßÂà∂Âùó‰∏≠ËÆ∞ÂΩï‰∏ãÊù•Ëøô‰∏™ËÆøÈóÆÊó∂Èó¥ÔºåÂ¶ÇÊûúÂêéÁª≠ÁöÑËÆøÈóÆÊó∂Èó¥‰∏éÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆÁöÑÊó∂Èó¥Èó¥ÈöîÂú®1Áßí(Êó∂Èó¥Áî±ÂèÇÊï∞ innodb_old_blocks_time ÊéßÂà∂ÔºåÈªòËÆ§ÂÄºÊòØ1000ÔºåÂçï‰ΩçÊØ´Áßí)‰ª•ÂÜÖÔºåÈÇ£‰πàËØ•È°µÈù¢Â∞±‰∏ç‰ºöË¢´‰ªéoldÂå∫ÂüüÁßªÂä®Âà∞youngÂå∫ÂüüÁöÑÂ§¥ÈÉ®ÔºåÂê¶ÂàôÂ∞ÜÂÆÉÁßªÂä®Âà∞youngÂå∫ÂüüÁöÑÂ§¥ÈÉ®„ÄÇ ‰∏∫‰ªÄ‰πàÈúÄË¶ÅÂºïÂÖ•innodb_old_blocks_timeÁöÑÊú∫Âà∂Âë¢Ôºü ‰∏Ä‰∏™Êï∞ÊçÆÈ°µÈáåÈù¢ÊúâÂ§öÊù°ËÆ∞ÂΩïË¢´ËÆøÈóÆÔºåËøô‰∏™Êï∞ÊçÆÈ°µ‰πü‰ºöË¢´Â§öÊ¨°ËÆøÈóÆÔºåÂΩìÊï∞ÊçÆÂ∫ìÂú®Â§ÑÁêÜÂÖ®Ë°®Êâ´ÊèèÊó∂Ôºå‰∏Ä‰∏™Êï∞ÊçÆÈ°µÈáåÈù¢ÊúâÂ§öÊù°ËÆ∞ÂΩïÔºåËøô‰∏™Êï∞ÊçÆÈ°µ‰ºöË¢´Â§öÊ¨°ËÆøÈóÆÔºå‰ΩÜÁî±‰∫éÊòØÈ°∫Â∫èÊâ´ÊèèÔºåËøô‰∏™Êï∞ÊçÆÈ°µÁ¨¨‰∏ÄÊ¨°Ë¢´ËÆøÈóÆÂíåÊúÄÂêé‰∏ÄÊ¨°Ë¢´ËÆøÈóÆÁöÑÊó∂Èó¥Èó¥Èöî‰ºöÂæàÁü≠„ÄÇÂõ†Ê≠§ËøòÊòØ‰øùËØÅËøôÊ¨°Êü•ËØ¢Êó∂Êï∞ÊçÆÈ°µ‰ªçÂ∞±Ë¢´‰øùÁïôÂú®oldÂå∫Âüü„ÄÇ ÈÄöËøá‰ºòÂåñÂêéÁöÑLRUÁÆóÊ≥ïÂú®Êâ´ÊèèÂ§ßË°®ÁöÑËøáÁ®ã‰∏≠ÔºåËôΩÁÑ∂‰πüÁî®Âà∞‰∫ÜBuffer PoolÔºå‰ΩÜÊòØÂØπyoungÂå∫ÂüüÂÆåÂÖ®Ê≤°ÊúâÂΩ±ÂìçÔºå‰ªéËÄå‰øùËØÅBuffer PoolÁöÑÁºìÂ≠òÂëΩ‰∏≠Áéá„ÄÇ ÂèÇËÄÉÔºö mysql 45ËÆ≤ - 02ËÆ≤Êó•ÂøóÁ≥ªÁªüÔºö‰∏ÄÊù°SQLÊõ¥Êñ∞ËØ≠Âè•ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ mysql 45ËÆ≤ - 12ËÆ≤‰∏∫‰ªÄ‰πàÊàëÁöÑMySQL‰ºö‚ÄúÊäñ‚Äù‰∏Ä‰∏ã mysql 45ËÆ≤ - 33ËÆ≤ÊàëÊü•Ëøô‰πàÂ§öÊï∞ÊçÆÔºå‰ºö‰∏ç‰ºöÊääÊï∞ÊçÆÂ∫ìÂÜÖÂ≠òÊâìÁàÜ ‰ªé‰∏Ä‰∏™ update ËØ≠Âè•ÂºÄÂßãÔºåÊù•ÁúãÁúã InnoDB ÁöÑÂ∫ïÂ±ÇÊû∂ÊûÑÂéüÁêÜ]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>lock</tag>
        <tag>buffer pool</tag>
        <tag>lru</tag>
        <tag>redo log</tag>
        <tag>wal</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysql-lock]]></title>
    <url>%2F2020%2F11%2F08%2F1%2F</url>
    <content type="text"><![CDATA[ÈîÅÊòØËÆ°ÁÆóÊú∫ÂçèË∞ÉÂ§ö‰∏™ËøõÁ®ãÊàñÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÊüê‰∏ÄËµÑÊ∫êÁöÑÊú∫Âà∂„ÄÇËÄåÊ†πÊçÆÂä†ÈîÅÁöÑËåÉÂõ¥ÔºåÂèØË¢´ÂàÜ‰∏∫ÂÖ®Â±ÄÈîÅ„ÄÅË°®Á∫ßÈîÅÂíåË°åÈîÅ„ÄÇ‰ªñ‰ª¨ÈÉΩÊúâ‰ªÄ‰πà‰ΩúÁî®Âë¢ÔºüÊúâËÆ©Êàë‰ª¨‰∏ÄÊé¢Á©∂Á´üÂêßÔºÅ ¬∂ÂÖ®Â±ÄÈîÅ ¬∂FTWRL ÂÖ®Â±ÄÈîÅÂ∞ÜÂØπÊï¥‰∏™Êï∞ÊçÆÂ∫ìÂÆû‰æãÂä†ÈîÅÔºå‰ΩøÂæóÊï¥‰∏™Â∫ìÂ§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅÔºå‰ºöÈòªÂ°ûDDLÂíåÈÉ®ÂàÜDML(select‰∏çË¢´ÈòªÂ°û)ËØ≠Âè•„ÄÇ ÈÄöËøáËæìÂÖ•ÂëΩ‰ª§ Flush tables with read lock (FTWRL)ËÆ©Êï¥‰∏™Â∫ìÂ§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅ„ÄÇ ÂÖ®Â±ÄÈîÅÁöÑÂÖ∏Âûã‰ΩøÁî®Âú∫ÊôØÊòØÂÅöÂÖ®Â∫ìÈÄªËæëÂ§á‰ªΩ„ÄÇ ‰ΩÜÊòØÂú®Â§á‰ªΩËøáÁ®ã‰∏≠Êï¥‰∏™Â∫ìÂÆåÂÖ®Â§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅÔºåÂõ†Ê≠§‰ºöÂá∫Áé∞‰∏Ä‰∫õÈöêÊÇ£Ôºö Â¶ÇÊûúÂú®‰∏ªÂ∫ì‰∏äÂ§á‰ªΩÔºåÈÇ£‰πàÂú®Â§á‰ªΩÊúüÈó¥ÈÉΩ‰∏çËÉΩÊâßË°åÊõ¥Êñ∞Ôºå‰∏öÂä°Âü∫Êú¨‰∏äÂ∞±ÂæóÂÅúÊëÜÔºõ Â¶ÇÊûú‰Ω†Âú®‰ªéÂ∫ì‰∏äÂ§á‰ªΩÔºåÈÇ£‰πàÂ§á‰ªΩÊúüÈó¥‰ªéÂ∫ì‰∏çËÉΩÊâßË°å‰∏ªÂ∫ìÂêåÊ≠•ËøáÊù•ÁöÑbinlogÔºå‰ºöÂØºËá¥‰∏ª‰ªéÂª∂Ëøü„ÄÇ Â¶ÇÊ≠§Â§ßÁöÑÈöêÊÇ£ÂäøÂøÖÂú®Â§ßÈÉ®ÂàÜ‰∏öÂä°Âú∫ÊôØ‰∏ãÊòØ‰∏çËÉΩÊé•ÂèóÔºåÈÇ£ÊúâÊ≤°ÊúâÊõ¥Â•ΩÁöÑÂäûÊ≥ïÂë¢Ôºü ¬∂single-transaction ÂÆûÁé∞Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ InnoDBÂà©Áî®‰∫Ü‚ÄúÊâÄÊúâÊï∞ÊçÆÈÉΩÊúâÂ§ö‰∏™ÁâàÊú¨‚ÄùÁöÑËøô‰∏™ÁâπÊÄßÔºåÂÆûÁé∞‰∫Ü‚ÄúÁßíÁ∫ßÂàõÂª∫Âø´ÁÖß‚ÄùÁöÑËÉΩÂäõ„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰∏ÄËá¥ÊÄßËßÜÂõæÂÆûÁé∞Êï∞ÊçÆÂ∫ìÂ§á‰ªΩ„ÄÇÂΩìÊàë‰ª¨‰ΩøÁî®InnoDBÊó∂ÔºåÂÄòËã•Êàë‰ª¨Â∞Ü‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´ËÆæÁΩÆÊàêÂèØÈáçÂ§çËØª„ÄÇ ‰∫ãÂä°Âú®ÂêØÂä®ÁöÑÊó∂ÂÄôÂü∫‰∫éÊï¥Â∫ìËøõË°å&quot;Âø´ÁÖß&quot;„ÄÇÂõ†Ê≠§Êàë‰ª¨‰æøÂèØ‰ª•ÂØπÂΩìÂâçÊï∞ÊçÆËøõË°åÂ§á‰ªΩÔºåÂπ∂‰∏çÂΩ±ÂìçÂÖ∂‰ªñ‰∫ãÂä°Êìç‰Ωú„ÄÇ mysqlÂÆòÊñπËá™Â∏¶ÁöÑÈÄªËæëÂ§á‰ªΩÂ∑•ÂÖ∑ mysqldump„ÄÇ ÂΩìmysqldump‰ΩøÁî®ÂèÇÊï∞‚Äìsingle-transactionÁöÑÊó∂ÂÄôÔºåÂØºÊï∞ÊçÆ‰πãÂâçÂ∞±‰ºöÂêØÂä®‰∏Ä‰∏™‰∫ãÂä°ÔºåÊù•Á°Æ‰øùÊãøÂà∞‰∏ÄËá¥ÊÄßËßÜÂõæ„ÄÇËÄåÁî±‰∫éMVCCÁöÑÊîØÊåÅÔºåËøô‰∏™ËøáÁ®ã‰∏≠Êï∞ÊçÆÊòØÂèØ‰ª•Ê≠£Â∏∏Êõ¥Êñ∞ÁöÑ„ÄÇ ‰ΩÜËøôÂèàÂ≠òÂú®‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÂÆÉÈúÄË¶ÅÊï∞ÊçÆÂ∫ìÂ≠òÂÇ®ÂºïÊìéÂ§Ñ‰∫é‰∏ÄËá¥ÊÄßËØªÁöÑ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´„ÄÇÂÄòËã•‰ΩøÁî®MYISAMÔºåÂàô‰∏çËÉΩ‰ΩøÁî®ËØ•ÂäüËÉΩ„ÄÇ ¬∂readonly Âíå FTWRL mysqlÂèØ‰ª•ËÆæÁΩÆset global readonly=trueÂ∞ÜÊï∞ÊçÆÂ∫ìÂèòÊàêÂÖ®Â∫ìÂè™ËØª„ÄÇ‰ΩÜ‰ªñ‰∏§ÁöÑÈÄÇÁî®ËåÉÂõ¥Âç¥‰∏ç‰∏ÄÊ†∑Ôºö Âú®Êúâ‰∫õÁ≥ªÁªü‰∏≠ÔºåreadonlyÁöÑÂÄº‰ºöË¢´Áî®Êù•ÂÅöÂÖ∂‰ªñÈÄªËæëÔºåÊØîÂ¶ÇÁî®Êù•Âà§Êñ≠‰∏Ä‰∏™Â∫ìÊòØ‰∏ªÂ∫ìËøòÊòØÂ§áÂ∫ì„ÄÇÂõ†Ê≠§Ôºå‰øÆÊîπglobalÂèòÈáèÁöÑÊñπÂºèÂΩ±ÂìçÈù¢Êõ¥Â§ß„ÄÇ Âú®ÂºÇÂ∏∏Â§ÑÁêÜÊú∫Âà∂‰∏äÊúâÂ∑ÆÂºÇ„ÄÇÂ¶ÇÊûúÊâßË°åFTWRLÂëΩ‰ª§‰πãÂêéÁî±‰∫éÂÆ¢Êà∑Á´ØÂèëÁîüÂºÇÂ∏∏Êñ≠ÂºÄÔºåÈÇ£‰πàMySQL‰ºöËá™Âä®ÈáäÊîæËøô‰∏™ÂÖ®Â±ÄÈîÅÔºåÊï¥‰∏™Â∫ìÂõûÂà∞ÂèØ‰ª•Ê≠£Â∏∏Êõ¥Êñ∞ÁöÑÁä∂ÊÄÅ„ÄÇ ËÄåÂ∞ÜÊï¥‰∏™Â∫ìËÆæÁΩÆ‰∏∫readonly‰πãÂêéÔºåÂ¶ÇÊûúÂÆ¢Êà∑Á´ØÂèëÁîüÂºÇÂ∏∏ÔºåÂàôÊï∞ÊçÆÂ∫ìÂ∞±‰ºö‰∏ÄÁõ¥‰øùÊåÅreadonlyÁä∂ÊÄÅÔºåËøôÊ†∑‰ºöÂØºËá¥Êï¥‰∏™Â∫ìÈïøÊó∂Èó¥Â§Ñ‰∫é‰∏çÂèØÂÜôÁä∂ÊÄÅÔºåÈ£éÈô©ËæÉÈ´ò„ÄÇ ¬∂Ë°®Á∫ßÈîÅ MySQLÈáåÈù¢Ë°®Á∫ßÂà´ÁöÑÈîÅÊúâ‰∏§ÁßçÔºöË°®ÈîÅÂíåÂÖÉÊï∞ÊçÆÈîÅÔºàmeta data lockÔºåMDL)„ÄÇ ¬∂Ë°®ÈîÅ MyISAMÂ≠òÂÇ®ÂºïÊìéÂè™ÊîØÊåÅË°®ÈîÅ„ÄÇ Ë°®ÈîÅÁöÑËØ≠Ê≥ïÊòØ lock tables ‚Ä¶ read/write„ÄÇÈÄöËøá unlock tables‰∏ªÂä®ÈáäÊîæÈîÅÔºå‰πüÂèØ‰ª•Âú®ÂÆ¢Êà∑Á´ØÊñ≠ÂºÄÁöÑÊó∂ÂÄôËá™Âä®ÈáäÊîæ„ÄÇ ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËé∑ÂèñÂà∞Ë°®Á∫ßÂÜôÈîÅÂêéÔºåÂè™ËÉΩÁî±ËØ•Á∫øÁ®ãÂØπË°®ËøõË°åËØªÂÜôÊìç‰ΩúÔºåÂà´ÁöÑÁ∫øÁ®ãÂøÖÈ°ªÁ≠âÂæÖËØ•Á∫øÁ®ãÈáäÊîæÈîÅ‰ª•ÂêéÊâçËÉΩÊìç‰Ωú ÂΩì‰∏Ä‰∏™Á∫øÁ®ãËé∑ÂèñÂà∞Ë°®Á∫ßËØªÈîÅÂêéÔºåËØ•Á∫øÁ®ãÂè™ËÉΩËØªÂèñÊï∞ÊçÆ‰∏çËÉΩ‰øÆÊîπÊï∞ÊçÆÔºåÂÖ∂ÂÆÉÁ∫øÁ®ã‰πüÂè™ËÉΩÂä†ËØªÈîÅÔºå‰∏çËÉΩÂä†ÂÜôÈîÅ ¬∂MDL MDLÂú®MySQL 5.5ÁâàÊú¨‰∏≠ÂºïÂÖ•„ÄÇMDL‰∏çÈúÄË¶ÅÊòæÂºè‰ΩøÁî®ÔºåÂú®ËÆøÈóÆ‰∏Ä‰∏™Ë°®ÁöÑÊó∂ÂÄô‰ºöË¢´Ëá™Âä®Âä†‰∏ä„ÄÇ ÂΩìÂØπ‰∏Ä‰∏™Ë°®ÂÅöÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä†MDLËØªÈîÅÔºõ ÂΩìË¶ÅÂØπË°®ÂÅöÁªìÊûÑÂèòÊõ¥Êìç‰ΩúÁöÑÊó∂ÂÄôÔºåÂä†MDLÂÜôÈîÅ„ÄÇ ËØªÈîÅ‰πãÈó¥‰∏ç‰∫íÊñ•ÔºåÂõ†Ê≠§‰Ω†ÂèØ‰ª•ÊúâÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂØπ‰∏ÄÂº†Ë°®Â¢ûÂà†ÊîπÊü•„ÄÇ ËØªÂÜôÈîÅ‰πãÈó¥„ÄÅÂÜôÈîÅ‰πãÈó¥ÊòØ‰∫íÊñ•ÁöÑÔºåÁî®Êù•‰øùËØÅÂèòÊõ¥Ë°®ÁªìÊûÑÊìç‰ΩúÁöÑÂÆâÂÖ®ÊÄß„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÊúâ‰∏§‰∏™Á∫øÁ®ãË¶ÅÂêåÊó∂Áªô‰∏Ä‰∏™Ë°®Âä†Â≠óÊÆµÔºåÂÖ∂‰∏≠‰∏Ä‰∏™Ë¶ÅÁ≠âÂè¶‰∏Ä‰∏™ÊâßË°åÂÆåÊâçËÉΩÂºÄÂßãÊâßË°å„ÄÇ Áî≥ËØ∑MDLÈîÅÁöÑÊìç‰Ωú‰ºöÂΩ¢Êàê‰∏Ä‰∏™ÈòüÂàóÔºåÈòüÂàó‰∏≠ÂÜôÈîÅËé∑Âèñ‰ºòÂÖàÁ∫ßÈ´ò‰∫éËØªÈîÅ„ÄÇ‰∏ÄÊó¶Âá∫Áé∞ÂÜôÈîÅÁ≠âÂæÖÔºå‰∏ç‰ΩÜÂΩìÂâçÊìç‰Ωú‰ºöË¢´ÈòªÂ°ûÔºåÂêåÊó∂Ëøò‰ºöÈòªÂ°ûÂêéÁª≠ËØ•Ë°®ÁöÑÊâÄÊúâÊìç‰Ωú„ÄÇ‰∫ãÂä°‰∏ÄÊó¶Áî≥ËØ∑Âà∞MDLÈîÅÂêéÔºåÁõ¥Âà∞‰∫ãÂä°ÊâßË°åÂÆåÊâç‰ºöÂ∞ÜÈîÅÈáäÊîæ„ÄÇ Â¶ÇÊûúA‰ºöËØùÂºÄÂêØ‰∏Ä‰∏™‰∫ãÂä°ÂØπtË°®ËøõË°å‰∫Ü‰∏ÄÊ¨°Êü•ËØ¢Âπ∂Ê≤°ÊúâÊèê‰∫§ÔºåËØ•Êìç‰Ωú‰ºöËé∑ÂèñMDLËØªÈîÅ„ÄÇÁÑ∂ÂêéB‰ºöËØùÂØπtË°®Â≠óÊÆµËøõË°åÊõ¥ÊîπÔºå‰∏ä‰∏Ä‰∏™‰∫ãÂä°Ê≤°ÊúâÊèê‰∫§MDLËØªÈîÅÊ≤°ÊúâË¢´ÈáäÊîæÔºåÂõ†Ê≠§B‰ºöËØùblock„ÄÇ ‰ΩÜÊòØ‰πãÂêéÊâÄÊúâË¶ÅÂú®Ë°®t‰∏äÊñ∞Áî≥ËØ∑MDLËØªÈîÅÁöÑËØ∑Ê±Ç‰πü‰ºöË¢´B‰ºöËØùÈòªÂ°û„ÄÇ ¬∂Â¶Ç‰ΩïÂÆâÂÖ®Âú∞ÁªôÂ∞èË°®Âä†Â≠óÊÆµÔºü È¶ñÂÖàÊàë‰ª¨Ë¶ÅËß£ÂÜ≥Èïø‰∫ãÂä°Ôºå‰∫ãÂä°‰∏çÊèê‰∫§ÔºåÂ∞±‰ºö‰∏ÄÁõ¥Âç†ÁùÄMDLÈîÅ„ÄÇ Âú®MySQLÁöÑinformation_schema Â∫ìÁöÑ innodb_trx Ë°®‰∏≠Ôºå‰Ω†ÂèØ‰ª•Êü•Âà∞ÂΩìÂâçÊâßË°å‰∏≠ÁöÑ‰∫ãÂä°„ÄÇ Â¶ÇÊûú‰Ω†Ë¶ÅÂÅöDDLÂèòÊõ¥ÁöÑË°®ÂàöÂ•ΩÊúâÈïø‰∫ãÂä°Âú®ÊâßË°åÔºåË¶ÅËÄÉËôëÂÖàÊöÇÂÅúDDLÔºåÊàñËÄÖkillÊéâËøô‰∏™Èïø‰∫ãÂä°„ÄÇ ÂÄòËã•Ë¶ÅÂèòÊõ¥ÁöÑË°®ÊòØ‰∏Ä‰∏™ÁÉ≠ÁÇπË°®ÔºåËôΩÁÑ∂Êï∞ÊçÆÈáè‰∏çÂ§ßÔºå‰ΩÜÊòØ‰∏äÈù¢ÁöÑËØ∑Ê±ÇÂæàÈ¢ëÁπÅÔºåËøôÊó∂ÂÄôkillÂèØËÉΩÊú™ÂøÖÁÆ°Áî®ÔºåÂõ†‰∏∫Êñ∞ÁöÑËØ∑Ê±ÇÈ©¨‰∏äÂ∞±Êù•‰∫Ü„ÄÇ ÊØîËæÉÁêÜÊÉ≥ÁöÑÊú∫Âà∂ÊòØÔºåÂú®alter tableËØ≠Âè•ÈáåÈù¢ËÆæÂÆöÁ≠âÂæÖÊó∂Èó¥ÔºåÂ¶ÇÊûúÂú®Ëøô‰∏™ÊåáÂÆöÁöÑÁ≠âÂæÖÊó∂Èó¥ÈáåÈù¢ËÉΩÂ§üÊãøÂà∞MDLÂÜôÈîÅÊúÄÂ•ΩÔºåÊãø‰∏çÂà∞‰πü‰∏çË¶ÅÈòªÂ°ûÂêéÈù¢ÁöÑ‰∏öÂä°ËØ≠Âè•ÔºåÂÖàÊîæÂºÉ„ÄÇ ‰πãÂêéÂºÄÂèë‰∫∫ÂëòÊàñËÄÖDBAÂÜçÈÄöËøáÈáçËØïÂëΩ‰ª§ÈáçÂ§çËøô‰∏™ËøáÁ®ã„ÄÇ ¬∂Online DDL mysql 5.6‰ª•Ââç Âú®DDLÊâßË°åÊúüÈó¥ÂÖ∂‰ªñDML‰∏çËÉΩÂπ∂Ë°åÔºåËøêÁª¥‰∫∫ÂëòÂØπË°®ÁöÑÁªìÊûÑÊõ¥Êîπ‰ºöÂØºËá¥ËØ•Ë°®ÁöÑ‰∏öÂä°ÂÅúÊªû„ÄÇ ËøôÂú®ÂæàÂ§öÊó∂ÂÄôÊòØ‰∏çËÉΩÂÆπÂøçÁöÑÔºåÂõ†Ê≠§Âú®mysql5.6 ÂºïÂÖ•‰∫ÜOnline DDL ,ÂÆÉ‰ΩøÂæóÂú®DDLÊâßË°åÊúüÈó¥ÂÖ∂‰ªñDMLÂèØ‰ª•Âπ∂Ë°å„ÄÇ Online DDL‰∏ãÔºåÂΩìËé∑ÂèñÂà∞MDLÂÜôÈîÅ‰ºöÂ∞ÜÂÖ∂ÈôçÁ∫ßÊàêMDLËØªÈîÅÔºåÁÑ∂ÂêéÁúüÊ≠£ÂÅöDDLÊìç‰Ωú„ÄÇÂõ†Ê≠§Âú®DDLÊìç‰ΩúÁöÑËøáÁ®ã‰∏≠ÔºåË°®Â§Ñ‰∫éËØªÈîÅÁä∂ÊÄÅ„ÄÇ DML‰∏çË¢´ÈòªÂ°û„ÄÇDDLÊìç‰ΩúÂÆåÊàêÂêé‰ºöÂçáÁ∫ßÊàêMDLÂÜôÈîÅÁÑ∂ÂêéÈáäÊîæMDLÈîÅ„ÄÇ ¬∂Ë°åÈîÅ Ë°åÈîÅÊòØÁ≤íÂ∫¶ÊúÄÂ∞èÁöÑÈîÅ„ÄÇÂú®InnodbÂºïÊìé‰∏≠Êó¢ÊîØÊåÅË°åÈîÅ‰πüÊîØÊåÅË°®ÈîÅÔºå‰ΩÜÂè™ÊúâÈÄöËøáÁ¥¢ÂºïÊù°‰ª∂Ê£ÄÁ¥¢Êï∞ÊçÆÔºåInnoDBÊâç‰ΩøÁî®Ë°åÁ∫ßÈîÅÔºåÂê¶ÂàôÔºåInnoDBÂ∞Ü‰ΩøÁî®Ë°®ÈîÅ„ÄÇ Ë°åÈîÅÂºÄÈîÄ‰ºöÂ¢ûÂ§ßÔºåÂä†ÈîÅÈÄüÂ∫¶ÊÖ¢ÔºåÂπ∂‰ºöÂá∫Áé∞Ê≠ªÈîÅ„ÄÇ‰ΩÜÂõ†‰∏∫ÈîÅÁ≤íÂ∫¶ÂèòÂ∞èÔºåÂèëÁîüÈîÅÂÜ≤Á™ÅÁöÑÊ¶ÇÁéá‰ΩéÔºåÂ§ÑÁêÜÂπ∂ÂèëÁöÑËÉΩÂäõÂº∫„ÄÇ ¬∂ÁßçÁ±ª ÂÖ±‰∫´ÈîÅÔºàSÈîÅÔºâ: ‰πüÁß∞ËØªÈîÅÔºåÂÖÅËÆ∏ÂÖ∂‰ªñ‰∫ãÁâ©ÂÜçÂä†SÈîÅÔºå‰∏çÂÖÅËÆ∏ÂÖ∂‰ªñ‰∫ãÁâ©ÂÜçÂä†XÈîÅ Êéí‰ªñÈîÅÔºàXÈîÅÔºâ: ‰πüÁß∞ÂÜôÈîÅÔºå‰∏çÂÖÅËÆ∏ÂÖ∂‰ªñ‰∫ãÂä°ÂÜçÂä†SÈîÅÊàñËÄÖXÈîÅ ¬∂Âä†ÈîÅÊñπÂºè ¬∂Ëá™Âä®Âä†ÈîÅ ÂØπ‰∫éUPDATE„ÄÅDELETEÂíåINSERTËØ≠Âè•ÔºåInnoDB‰ºöËá™Âä®ÁªôÊ∂âÂèäÊï∞ÊçÆÈõÜÂä†Êéí‰ªñÈîÅÔºõ ÂØπ‰∫éÊôÆÈÄöSELECTËØ≠Âè•ÔºåInnoDB‰∏ç‰ºöÂä†‰ªª‰ΩïÈîÅÔºõ ¬∂ÊâãÂä®Âä†ÈîÅ ÊôÆÈÄöSELECTËØ≠Âè•ÊòØ‰∏ç‰ºöÂä†ÈîÅÁöÑÔºå‰ΩÜÊòØ‰πüÂèØ‰ª•ÊâãÂä®Âä†ÈîÅ„ÄÇ ÂÖ±‰∫´ÈîÅÔºöselect‚Ä¶lock in share mode Êéí‰ªñÈîÅÔºöselect ‚Ä¶ for update ÊòéÊòéÊôÆÈÄöSELECTÊü•ËØ¢Êï∞ÊçÆÔºåËØªÂÜô‰∏çÂÜ≤Á™ÅÂ°ûÔºå‰∏∫‰ªÄ‰πàËøòË¶ÅÂØπÂÖ∂‰∏äÈîÅÂë¢Ôºü Âõ†‰∏∫mysqlËØªÊìç‰ΩúÂÖ∂ÂÆûÂàÜ‰∏∫2ÁßçÁ±ªÂûã:Âø´ÁÖßËØªÔºàsnapshot readÔºâÂèäÂΩìÂâçËØªÔºàcurrent readÔºâ„ÄÇ ÂâçËÄÖÂü∫‰∫éMysql mvccÂÆûÁé∞,ÂêéËÄÖÊòØÂØπÊï∞ÊçÆÂ∫ìÂΩìÂâçÊï∞ÊçÆÂùóÁöÑËØªÂèñ„ÄÇ UPDATE„ÄÅINSERT„ÄÅDELETE Âíå Âä†ÈîÅÁöÑSELECT ÈÉΩÊòØÂΩìÂâçËØªÔºåËÄåÊôÆÈÄöÁöÑSELECTÂàôÊòØÂø´ÁÖßËØª„ÄÇ ¬∂next-key lock Ë°åÈîÅÂè™ËÉΩÈîÅ‰ΩèË°åÔºåÂπ∂‰∏çËÉΩÈîÅ‰ΩèÂêéÈù¢Âä†ÂÖ•Êª°Ë∂≥Êù°‰ª∂ÁöÑË°åÔºåËøôÊòØÂπªËØª‰∫ßÁîüÁöÑÂéüÂõ†„ÄÇ Â¶ÇÊûúËÉΩÂØπ‰∏Ä‰∏™ËåÉÂõ¥ËøõË°åÂä†ÈîÅÔºå‰øùËØÅËøô‰∏™ËåÉÂõ¥ÂÜÖÊï∞ÊçÆ‰∏çÂèòÔºåÂ∞±ÂèØ‰ª•Ê∂àÈô§ÂπªËØªÁöÑÈóÆÈ¢ò„ÄÇ Èó¥ÈöôÈîÅÔºàGap LockÔºâ ÂàôÊòØInnodbÂú®ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÊèê‰æõÁöÑ‰∏ÄÁßçÈîÅÂÆöËåÉÂõ¥Â∑¶Èó≠Âè≥Èó≠ÁöÑÂå∫Èó¥ÈîÅ„ÄÇ InnodbÈÄöËøáË°åÈîÅÂíåÈó¥ÈöôÈîÅÂÖ±ÂêåÁªÑÊàêÁöÑÔºànext-key lockÔºâ‰ªéËÄåËß£ÂÜ≥‰∫ÜÂπªËØªÈóÆÈ¢ò„ÄÇ ÂèØÈáçÂ§çËØªÈöîÁ¶ªÁ∫ßÂà´‰∏ãÂä†ÈîÅËßÑÂàôÔºö Âä†ÈîÅÁöÑÂü∫Êú¨Âçï‰ΩçÊòØnext-key lockÔºàÂâçÂºÄÂêéÈó≠Âå∫Èó¥Ôºâ„ÄÇ Êü•ÊâæËøáÁ®ã‰∏≠ËÆøÈóÆÂà∞ÁöÑÂØπË±°Êâç‰ºöÂä†ÈîÅ„ÄÇ Á¥¢Âºï‰∏äÁöÑÁ≠âÂÄºÊü•ËØ¢ÔºåÁªôÂîØ‰∏ÄÁ¥¢ÂºïÂä†ÈîÅÁöÑÊó∂ÂÄôÔºånext-key lockÈÄÄÂåñ‰∏∫Ë°åÈîÅ„ÄÇ Á¥¢Âºï‰∏äÁöÑÁ≠âÂÄºÊü•ËØ¢ÔºåÂêëÂè≥ÈÅçÂéÜÊó∂‰∏îÊúÄÂêé‰∏Ä‰∏™ÂÄº‰∏çÊª°Ë∂≥Á≠âÂÄºÊù°‰ª∂ÁöÑÊó∂ÂÄôÔºånext-key lockÈÄÄÂåñ‰∏∫Èó¥ÈöôÈîÅ„ÄÇ ÂèÇËÄÉÔºö Èó¥ÈöôÈîÅËØ¶Ëß£ MySQLÂÆûÊàò45ËÆ≤]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>lock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python collections Ê∑±ÂÖ•Ëß£Êûê]]></title>
    <url>%2F2020%2F09%2F05%2F1%2F</url>
    <content type="text"><![CDATA[collectionsÊòØPythonÂÜÖÂª∫ÁöÑ‰∏Ä‰∏™ÈõÜÂêàÊ®°ÂùóÔºåÊèê‰æõ‰∫ÜËÆ∏Â§öÊúâÁî®ÁöÑÈõÜÂêàÁ±ª„ÄÇ ÂêçÁß∞ ËØ¥Êòé namedtuple ÂàõÂª∫ÂëΩÂêçÂÖÉÁªÑÂ≠êÁ±ªÁöÑÂ∑•ÂéÇÂáΩÊï∞ deque Á±ª‰ººÂàóË°®(list)ÁöÑÂÆπÂô®ÔºåÂÆûÁé∞‰∫ÜÂú®‰∏§Á´ØÂø´ÈÄüÊ∑ªÂä†(append)ÂíåÂºπÂá∫(pop) ChainMap Á±ª‰ººÂ≠óÂÖ∏(dict)ÁöÑÂÆπÂô®Á±ªÔºåÂ∞ÜÂ§ö‰∏™Êò†Â∞ÑÈõÜÂêàÂà∞‰∏Ä‰∏™ËßÜÂõæÈáåÈù¢ Counter Â≠óÂÖ∏ÁöÑÂ≠êÁ±ªÔºåÊèê‰æõ‰∫ÜÂèØÂìàÂ∏åÂØπË±°ÁöÑËÆ°Êï∞ÂäüËÉΩ OrderedDict Â≠óÂÖ∏ÁöÑÂ≠êÁ±ªÔºå‰øùÂ≠ò‰∫Ü‰ªñ‰ª¨Ë¢´Ê∑ªÂä†ÁöÑÈ°∫Â∫è defaultdict Â≠óÂÖ∏ÁöÑÂ≠êÁ±ªÔºåÊèê‰æõ‰∫Ü‰∏Ä‰∏™Â∑•ÂéÇÂáΩÊï∞Ôºå‰∏∫Â≠óÂÖ∏Êü•ËØ¢Êèê‰æõ‰∏Ä‰∏™ÈªòËÆ§ÂÄº UserDict Â∞ÅË£Ö‰∫ÜÂ≠óÂÖ∏ÂØπË±°ÔºåÁÆÄÂåñ‰∫ÜÂ≠óÂÖ∏Â≠êÁ±ªÂåñ UserList Â∞ÅË£Ö‰∫ÜÂàóË°®ÂØπË±°ÔºåÁÆÄÂåñ‰∫ÜÂàóË°®Â≠êÁ±ªÂåñ UserString Â∞ÅË£Ö‰∫ÜÂàóË°®ÂØπË±°ÔºåÁÆÄÂåñ‰∫ÜÂ≠óÁ¨¶‰∏≤Â≠êÁ±ªÂåñ UserDict,UserList,UserStringÈÉΩÊòØÂØπ‰∫édict,listÔºåstrÁöÑÂ∞ÅË£ÖÔºåÊú¨Ë¥®ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ Âõ†‰∏∫Â∫ïÂ±ÇÁöÑÂÜÖÂÆπÂèØ‰ª•‰Ωú‰∏∫Â±ûÊÄßÊù•ËÆøÈóÆ,‰∏ÄËà¨Áî®‰ΩúÁªßÊâø‰ªéËÄåÂÆûÁé∞Ëá™ÂÆö‰πâÂäüËÉΩÔºå‰∏çÂÅöËøáÂ§öÊ¶ÇËø∞„ÄÇ ¬∂ChainMap Âú®Python‰∏≠ÔºåÂΩìÊàë‰ª¨Êúâ‰∏§‰∏™Â≠óÂÖ∏ÈúÄË¶ÅÂêàÂπ∂ÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•‰ΩøÁî®Â≠óÂÖ∏ÁöÑupdateÊñπÊ≥ïÔºå‰ΩÜËøô‰ºöÊîπÂèòÂÖ∂‰∏≠‰∏Ä‰∏™Â≠óÂÖ∏„ÄÇ Â¶ÇÊûúÊàë‰ª¨‰∏çÊÉ≥ÊîπÂèòÂéüÊúâÁöÑ‰∏§‰∏™Â≠óÂÖ∏ÔºåÈÇ£Â∞±ÈúÄË¶ÅÂçïÁã¨ÂÜçÂàõÂª∫‰∏Ä‰∏™Â≠óÂÖ∏Ôºå‰ΩÜËøô‰ºöÈ¢ùÂ§ñÂÜÖÂ≠ò„ÄÇ ChainMapÂèØ‰ª•Âú®‰∏ç‰øÆÊîπÂéüÊúâÂ≠óÂÖ∏ÂâçÊèê‰∏ãÔºåÂèà‰∏çÂè¶Â§ñÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂ≠óÂÖ∏ÔºåËØªÂÜôËøô‰∏™ÂØπË±°Â∞±ÂÉèÊòØËØªÂ≠óÂÖ∏‰∏ÄÊ†∑„ÄÇ ÂÆûÈôÖ‰∏äChainMapÂ≠òÂÇ®ÁöÑÊòØÂ≠óÂÖ∏ÁöÑÂºïÁî®„ÄÇÂú®ÂÖ∂ÂÜÖÈÉ®‰ºöÂÇ®Â≠ò‰∏Ä‰∏™KeyÂà∞ÊØè‰∏™Â≠óÂÖ∏ÁöÑÊò†Â∞ÑÔºåÂΩì‰Ω†ËØªÂèñe[key]ÁöÑÊó∂ÂÄôÔºåÂÆÉÂÖàÂéªÊü•ËØ¢Ëøô‰∏™keyÂú®Âì™‰∏™Â≠óÂÖ∏ÈáåÈù¢ÔºåÁÑ∂ÂêéÂÜçÂéªÂØπÂ∫îÁöÑÂ≠óÂÖ∏ÈáåÈù¢Êü•ËØ¢ÂØπÂ∫îÁöÑÂÄº„ÄÇ ‰ΩøÁî®ChainMapÈúÄÁü•: Â¶ÇÊûú‰∏§‰∏™Â≠óÂÖ∏ÈáåÈù¢Êúâ‰∏Ä‰∏™KeyÁöÑÂêçÂ≠óÁõ∏ÂêåÔºåÈÇ£‰πàChainMap‰ºö‰ΩøÁî®Á¨¨‰∏Ä‰∏™Êã•ÊúâËøô‰∏™KeyÁöÑÂ≠óÂÖ∏ÈáåÈù¢ÁöÑÂÄº Â¶ÇÊûú‰∏∫ChainMapÂØπË±°Ê∑ªÂä†‰∏Ä‰∏™Key-ValueÂØπÔºåÊñ∞ÁöÑKey-Value‰ºöË¢´Ê∑ªÂä†ËøõÁ¨¨‰∏Ä‰∏™Â≠óÂÖ∏ÈáåÈù¢ Â¶ÇÊûú‰øÆÊîπÂéüÂ≠óÂÖ∏Ôºå‰øÆÊîπÁöÑkeyÂú®Á¨¨‰∏Ä‰∏™Â≠óÂÖ∏ÊàñÂàôÂú®Â§ö‰∏™Â≠óÂÖ∏‰∏≠Âè™Êúâ‰∏Ä‰∏™ÔºåÈÇ£‰πàChainMapÂØπË±°‰πü‰ºöÁõ∏Â∫îÊõ¥Êñ∞„ÄÇ Â¶ÇÊûúËøô‰∏™KeyÂú®Â§ö‰∏™Â≠óÂÖ∏‰∏≠ÈÉΩÂ≠òÂú®Ôºå‰∏î‰øÆÊîπÁöÑ‰∏çÊòØÁ¨¨‰∏Ä‰∏™ÔºåÂàô‰∏çÊõ¥Êñ∞„ÄÇ Â¶ÇÊûú‰ªéChainMapÂØπË±°ÈáåÈù¢Âà†Èô§‰∏Ä‰∏™KeyÔºåÂ¶ÇÊûúËøô‰∏™KeyÂè™Âú®‰∏Ä‰∏™Ê∫êÂ≠óÂÖ∏‰∏≠Â≠òÂú®Ôºå ÈÇ£‰πàËøô‰∏™Key‰ºöË¢´‰ªéÊ∫êÂ≠óÂÖ∏‰∏≠Âà†Èô§„ÄÇÂ¶ÇÊûúËøô‰∏™KeyÂú®Â§ö‰∏™Â≠óÂÖ∏‰∏≠ÈÉΩÂ≠òÂú®ÔºåÈÇ£‰πàKey‰ºöË¢´‰ªéÁ¨¨‰∏Ä‰∏™Â≠óÂÖ∏‰∏≠Âà†Èô§„ÄÇ ÂΩìË¢´‰ªéÁ¨¨‰∏Ä‰∏™Â≠óÂÖ∏‰∏≠Âà†Èô§‰ª•ÂêéÔºåÁ¨¨‰∫å‰∏™Ê∫êÂ≠óÂÖ∏ÁöÑKeyÂèØ‰ª•ÁªßÁª≠Ë¢´ChainMapËØªÂèñ„ÄÇ Âü∫Êú¨ÂÆûÁé∞Â¶Ç‰∏ã 1234567891011121314151617181920class ChainMap(MutableMapping): def __init__(self, *maps): self.maps = list(maps) or [&#123;&#125;] def __getitem__(self, key): for mapping in self.maps: try: return mapping[key] except KeyError: pass return self.__missing__(key) def __setitem__(self, key, value): self.maps[0][key] = value def __delitem__(self, key): try: del self.maps[0][key] except KeyError: raise KeyError('Key not found in the first mapping: &#123;!r&#125;'.format(key)) ¬∂Counter CounterÊòØdictÁöÑÂ≠êÁ±ªÔºåÁî®‰∫éËÆ°Êï∞ÂèØÂìàÂ∏åÂØπË±°„ÄÇÂÆÉÊòØ‰∏Ä‰∏™ÈõÜÂêàÔºåÂÖÉÁ¥†ÂÉèÂ≠óÂÖ∏ÈîÆ(key)‰∏ÄÊ†∑Â≠òÂÇ®ÔºåÂÆÉ‰ª¨ÁöÑËÆ°Êï∞Â≠òÂÇ®‰∏∫ÂÄº„ÄÇËÆ°Êï∞ÂèØ‰ª•ÊòØ‰ªª‰ΩïÊï¥Êï∞ÂÄºÔºåÂåÖÊã¨0ÂíåË¥üÊï∞„ÄÇ ‰∏ªË¶ÅÂÆûÁé∞ÈÄªËæëÂú®updateÊñπÊ≥ï‰∏≠: 12345678910111213141516171819202122232425262728293031323334353637class Counter(dict): def __init__(*args, **kwds): if not args: raise TypeError("descriptor '__init__' of 'Counter' object " "needs an argument") self, *args = args if len(args) &gt; 1: raise TypeError('expected at most 1 arguments, got %d' % len(args)) super(Counter, self).__init__() self.update(*args, **kwds) def update(*args, **kwds): if not args: raise TypeError("descriptor 'update' of 'Counter' object " "needs an argument") self, *args = args if len(args) &gt; 1: raise TypeError('expected at most 1 arguments, got %d' % len(args)) iterable = args[0] if args else None if iterable is not None: if isinstance(iterable, Mapping): if self: self_get = self.get for elem, count in iterable.items(): self[elem] = count + self_get(elem, 0) else: super(Counter, self).update(iterable) # fast path when counter is empty else: _count_elements(self, iterable) if kwds: self.update(kwds) def _count_elements(mapping, iterable): 'Tally elements from the iterable.' mapping_get = mapping.get for elem in iterable: mapping[elem] = mapping_get(elem, 0) + 1 ÈÄöËøáÊ∫êÁ†ÅÂàÜÊûêÔºöCounterÂèØ‰ª•‰º†ÂÖ•iterableÊàñÂàôMapping„ÄÇ ÂΩì‰º†ÂÖ• iterableÊó∂Ôºå‰ºöË∞ÉÁî®_count_elementsÔºåÈÅçÂéÜÁ¥ØÂä†ÂÖÉÁ¥†‰∏™Êï∞ ÂΩì‰º†ÂÖ• MappingÊó∂Ôºå‰ºöÈÅçÂéÜÁ¥ØÂä†self[elem] = count + self_get(elem, 0)ÔºåÈÄöËøáÊ∫êÁ†ÅÂèØ‰ª•ÂèëÁé∞Ôºå‰º†ÂÖ•ÁöÑMappingÁöÑvalueÂÄºÂøÖÈ°ª‰∏∫Êï¥Êï∞„ÄÇ ¬∂deque deque‰Ωú‰∏∫ÂèåÁ´ØÈòüÂàó,ÂÖ∂Â∫ïÂ±ÇÂÆûÁé∞Âü∫‰∫éÂèåÂêëÈìæË°®,ÂÖ∂ÊèíÂÖ•ÂíåÂà†Èô§ÊïàÁéáËøúÈ´ò‰∫élist,Âõ†Ê≠§ÂèØ‰ª•Áî®Êù•ÂÆûÁé∞Ê†àÔºàstackÔºâ‰πüÂèØ‰ª•Áî®Êù•ÂÆûÁé∞ÈòüÂàóÔºàqueueÔºâ„ÄÇ ÂèåÂêëÈìæË°®ÂÆûÁé∞: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121class Node(object): def __init__(self, value=None, prev=None, next=None): self.value, self.prev, self.next = value, prev, next def __str__(self): return f"&#123;self.__class__&#125;: &#123;self.value&#125;"class CircularDoubleLinkedList(object): def __init__(self, maxsize=20): self.maxsize = maxsize node = Node() node.next, node.prev = node, node self.root = node self.length = 0 def __len__(self): return self.length def __str__(self): return f"&#123;self.__class__&#125;: &#123;self.tolist()&#125;" @property def headnode(self): return self.root.next @property def tailnode(self): return self.root.prev def append(self, value): self.is_full() node = Node(value, prev=self.tailnode, next=self.root) self.tailnode.next = node self.root.prev = node self.length += 1 def pop(self): tailnode = self.tailnode if tailnode == self.root: raise Exception("Empty") tailnode.prev.next = self.root self.root.prev = tailnode.prev self.length -= 1 return tailnode.value def pop_left(self): headnode = self.headnode if headnode == self.root: raise Exception("Empty") headnode.next.prev = self.root self.root.next = headnode.next self.length -= 1 return headnode.value def append_left(self, value): if self.root.next is self.root: return self.append(value) self.is_full() headnode = self.headnode node = Node(value, prev=self.root, next=headnode) self.root.next = node headnode.prev = node self.length += 1 def remove(self, node): if node is self.root: return node.prev.next = node.next node.next.prev = node.prev self.length -= 1 del node return 1 def iter_node_reverse(self): if self.root.prev is self.root: return node = self.root.prev while node is not None and node != self.headnode: yield node node = node.prev yield node def __iter__(self): for node in self.iter_node(): yield node.value def iter_node(self): if self.root.next is self.root: return node = self.root.next while node is not None and node != self.tailnode: yield node node = node.next yield node def tolist(self): return [i for i in self] def is_full(self): if len(self) &gt; self.maxsize: raise Exception("Full") ¬∂namedtuple collection.namedtupleËÉΩÂ§üÊñπ‰æøÂú∞Âú®Python‰∏≠ÊâãÂä®ÂÆö‰πâ‰∏Ä‰∏™ÂÜÖÂ≠òÂç†Áî®ËæÉÂ∞ëÁöÑ‰∏çÂèØÂèòÁ±ª„ÄÇ Á±ªÂÆûÁé∞: 1234class User: def __init__(self, name, age): self.name = name self.age = age namedtupleÂÆûÁé∞: 1User = namedtuple("User", ["name", "age", "height"]) namedtupleËΩ¨Êç¢‰∏∫dict: 1user_info_dict = user._asdict() namedtupleÊãÜÂåÖ: 1name, age, *others = user ¬∂defaultdict defaultdictÂ±û‰∫éÂÜÖÂª∫ÂáΩÊï∞dictÁöÑ‰∏Ä‰∏™Â≠êÁ±ªÔºåË∞ÉÁî®Â∑•ÂéÇÂáΩÊï∞Êèê‰æõÁº∫Â§±ÁöÑÂÄº„ÄÇ ¬∂ÂØπÊØî ÂÅáÂ¶ÇÊàë‰ª¨Ë¶ÅÂØπ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Â≠óÁ¨¶ËÆ°Êï∞ 1234import randomimport string # ÂØπ_strÂ≠óÁ¨¶ËÆ°Êï∞ _str = ''.join(random.choices(string.ascii_lowercase, k=20)) usual: 123456counter = &#123;&#125;for s in _str: try: counter[s] += 1 except KeyError: counter[s] = 1 setdefault: 1234counter = &#123;&#125;for s in _str: counter.setdefault(s, 0) counter[s] += 1 defaultdict: 123counter = defaultdict(int)for s in _str: counter[s] += 1 ¬∂ÂéüÁêÜ defaultdictÊòØÊÄé‰πàÂÆûÁé∞Ëøô‰∏ÄÂäüËÉΩÁöÑÂë¢ÔºåÊàë‰ª¨ÂèØ‰ª•Áúã‰∏Ä‰∏ãUserDictÊ∫êÁ†ÅÁöÑ12345678```python def __getitem__(self, key): if key in self.data: return self.data[key] if hasattr(self.__class__, &quot;__missing__&quot;): return self.__class__.__missing__(self, key) raise KeyError(key) ÂèØ‰ª•ÁúãÂà∞ÂΩìdict‰∏≠‰∏çÂ≠òÂú®Êüê‰∏ÄkeyÊó∂Ôºå‰ºöËØïÂõæÊâßË°å1234567891011121314Âõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Ëá™ÂÆö‰πâdefaultdict:```pythonfrom collections import UserDictclass CustomDefaultDict(UserDict): def __init__(self, default_factory=None, *arg, **kwargs): super().__init__(*arg, **kwargs) self.default_factory = default_factory def __missing__(self, key): self[key] = value = self.default_factory() return value ¬∂OrderedDict dictÂü∫‰∫éhashÂÆûÁé∞ÔºåÂÖ∑Â§á‰ºòÁßÄÁöÑÊèíÂÖ•ÊïàÁéáÂíåÊü•ËØ¢ÊïàÁéáÔºå‰ΩÜÂç¥Êó†Ê≥ïÂÅöÂà∞ÊúâÂ∫èÊèíÂÖ•„ÄÇ Âú®‰∏Ä‰∫õÈúÄË¶ÅÊèíÂÖ•È°∫Â∫èÁöÑÂú∫ÊôØ‰∏ãÊòæÂæó‰πèÂäõ„ÄÇÊÄé‰πàÂÅöÂà∞ÔºåÊó¢‰øùËØÅÂÖ∂Êó∂Â∫èÊÄßÁöÑÂêåÊó∂ÂèàÂÖ∑Â§áÂæàÂ•ΩÁöÑÊ£ÄÁ¥¢ÊïàÁéáÂë¢Ôºå Êàë‰ª¨ÂèØ‰ª•ËÆæËÆ°‰∏Ä‰∏™ÈìæË°®ÔºåÁî®‰∫éÂ≠òÂÇ®keyÊèíÂÖ•ÁöÑÂÖàÂêéÈ°∫Â∫è„ÄÇËøôÂ∞±ÊòØOrderedDictÁöÑÊòØÂÆûÁé∞ÂéüÁêÜ„ÄÇ ¬∂Ê∫êÁ†ÅËß£Êûê OrderedDictÂú®python‰∏≠ÈÄöËøáÂèåÂêëÈìæË°®ÂíådictÂÆûÁé∞„ÄÇÂú®python 3.6 ÁâàÊú¨‰∏≠ÔºådictÈªòËÆ§ÂÖ∑Â§áÊèíÂÖ•È°∫Â∫è„ÄÇ ÈÄöËøáÈòÖËØªÊ∫êÁ†ÅÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÔºåOrderedDictÂÆö‰πâ‰∫Ü‰∏§‰∏™ÂÆû‰æãÂèòÈáè12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152```self.__root```ÂÅö‰∏∫ÈìæË°®ÁöÑÂ§¥ËäÇÁÇπÁî®‰∫éÂÆûÁé∞Âæ™ÁéØÂèåÂêëÈìæË°®```self.__map```Â∞ÜÂ≠óÂÖ∏ÁöÑkey‰∏éÂèåÂêëÈìæË°®‰∏≠ËäÇÁÇπËøõË°åÂÖ≥ËÅîÂÄüÂä©Ëøô‰∏§‰∏™ÂèòÈáèOrderedDictÁöÑÂÆûÁé∞Â∞±ÂæàÁÆÄÂçï‰∫Ü```pythonclass OrderedDict(dict): def __init__(*args, **kwds): if not args: raise TypeError(&quot;descriptor &apos;__init__&apos; of &apos;OrderedDict&apos; object &quot; &quot;needs an argument&quot;) self, *args = args if len(args) &gt; 1: raise TypeError(&apos;expected at most 1 arguments, got %d&apos; % len(args)) try: self.__root except AttributeError: self.__hardroot = _Link() self.__root = root = _proxy(self.__hardroot) root.prev = root.next = root self.__map = &#123;&#125; self.__update(*args, **kwds) def __setitem__(self, key, value, dict_setitem=dict.__setitem__, proxy=_proxy, Link=_Link): if key not in self: self.__map[key] = link = Link() root = self.__root last = root.prev link.prev, link.next, link.key = last, root, key last.next = link root.prev = proxy(link) dict_setitem(self, key, value) def __delitem__(self, key, dict_delitem=dict.__delitem__): dict_delitem(self, key) link = self.__map.pop(key) link_prev = link.prev link_next = link.next link_prev.next = link_next link_next.prev = link_prev link.prev = None link.next = None def __iter__(self): root = self.__root curr = root.next while curr is not root: yield curr.key curr = curr.next ¬∂LRUÁÆóÊ≥ïÂÆûÁé∞ Âú®ÊúâÈôêÁöÑÁ©∫Èó¥‰∏≠Â≠òÂÇ®ÂØπË±°Êó∂ÔºåÂΩìÁ©∫Èó¥Êª°Êó∂Ôºå‰ºöÊåâÁÖß‰∏ÄÂÆöÁÆóÊ≥ï‰ªéÊúâÈôêÁ©∫Èó¥Âà†Èô§ÈÉ®ÂàÜÂØπË±°„ÄÇ Â∏∏Áî®ÁöÑÁÆóÊ≥ïÊúâLRUÔºåFIFOÔºåLFUÁ≠â„ÄÇ LRUÔºöleast recently usedÔºåÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁÆóÊ≥ï„ÄÇÂú®ËÆ°ÁÆóÊú∫ÁöÑCacheÁ°¨‰ª∂Ôºå‰ª•Âèä‰∏ªÂ≠òÂà∞ËôöÊãüÂÜÖÂ≠òÁöÑÈ°µÈù¢ÁΩÆÊç¢ÔºåËøòÊúâRedisÁºìÂ≠òÁ≥ªÁªü‰∏≠ÈÉΩÁî®Âà∞‰∫ÜËØ•ÁÆóÊ≥ï„ÄÇ Âú®Python‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî®collections.OrderedDictÂæàÊñπ‰æøÁöÑÂÆûÁé∞LRUÁÆóÊ≥ï 123456789101112131415161718192021222324252627282930from collections import OrderedDict class LRUCache(OrderedDict): def __init__(self,capacity): self.capacity = capacity self.cache = OrderedDict() def get(self,key): if self.cache.has_key(key): value = self.cache.pop(key) self.cache[key] = value else: value = None return value def set(self,key,value): if self.cache.has_key(key): value = self.cache.pop(key) self.cache[key] = value else: if len(self.cache) == self.capacity: self.cache.popitem(last = False) self.cache[key] = value else: self.cache[key] = value ÂèÇËÄÉ: https://juejin.im/post/6844903875711860750]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>lru</tag>
        <tag>collections</tag>
        <tag>linked list</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[geventÈ≠îÊ≥ïÂíåtest‰∏≠ÁöÑÂ∫îÁî®ÂÆûË∑µ]]></title>
    <url>%2F2020%2F08%2F26%2F1%2F</url>
    <content type="text"><![CDATA[‰∫ÜËß£ÂºÇÊ≠•ÁºñÁ®ãÁöÑÂêåÂ≠¶ÂØπ‰∫égevent‰∏ÄÂÆö‰∏ç‰ºöÈôåÁîü,‰ΩÜÂ§ßÈÉ®ÂàÜ‰∫∫ÂØπ‰∫égeventÂèØ‰ª•Âú®‰∏ç‰øÆÊîπ‰ªª‰Ωï‰ª£Á†ÅÁöÑÂâçÊèê‰∏ãÂ∞ÜÂéüÂßãÂêåÊ≠•‰ª£Á†ÅÊõ¥ÊõøÊàêÂºÇÊ≠•‰ª£Á†ÅÁöÑÂéüÁêÜÁü•‰πãÁîöÂ∞ë„ÄÇ ÂæàÂ§ö‰∫∫ÂæàËÉÜÊÄØÈòÖËØªÊ∫êÁ†Å,‰ΩÜÈÄöËøáÈòÖËØªÊ∫êÁ†ÅÔºå‰Ω†Êó¢ËÉΩÂ≠¶‰π†Âà∞Ê≠£Á°ÆÁöÑÁºñÁ†ÅËßÑËåÉÔºå‰πüËÉΩÂ≠¶‰π†Âà∞Â•ΩÁöÑÁºñÁ®ãÊÄùË∑Ø„ÄÇ Êé•‰∏ãÊù•ÊàëÂ∏¶È¢ÜÂ§ßÂÆ∂‰∏ÄËµ∑Êù•Êè≠ÂºÄgeventËøôÂ±ÇÁ•ûÁßòÈù¢Á∫±ÔºåÂèäÂÄüÂä©geventÊÄùÊÉ≥Âú®È°πÁõÆtest‰∏≠ÁöÑÂ∫îÁî®„ÄÇ ¬∂geventÁå¥Â≠êË°•‰∏Å geventÁöÑÁî®ÈÄîÊòØÂú®‰∏ç‰æµÂÖ•ÂéüÂßã‰ª£Á†ÅÁöÑÂâçÊèê‰∏ãÔºåËÆ©‰Ω†ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑÂØºÂÖ•ÈùûÈòªÂ°ûÁöÑÊ®°ÂùóÔºåÊó†ÈúÄÁâπÊÑèÂºïÂÖ•„ÄÇ ÂÖ∂ÂÆûÁé∞ÂéüÁêÜÊòØÂ∞ÜÂéüÂßãÂ∫ìÁöÑsync funcÊõøÊç¢ÊàêgeventÂÜÖÁΩÆÁöÑ async func„ÄÇ ¬∂Ê®°ÂùóË°•‰∏ÅÂÆûÁé∞ Êö¥ÂäõÊõøÊç¢:Âú®python sysÂèòÈáè‰∏≠Â∞ÜÁõÆÊ†áÊ®°ÂùóÁõ¥Êé•ÊõøÊç¢ÊàêÊñ∞ÁöÑÊ®°Âùó 123# module_1.pydef print1(): print("print 1") 123# module_2.pydef print2(): print("print 2") 1234567891011# test.pyimport sysimport module_1module_1.pprint()del sys.modules['module_1']sys.modules['module_1'] = __import__('module_2')import module_1module_1.pprint() output: 12print 1print 2 ÈùûÊö¥ÂäõÊõøÊç¢:Â∞ÜÁõÆÊ†áÊ®°ÂùóÁâπÂÆöfunc ÊõøÊç¢ÊàêÊñ∞Ê®°ÂùóÁöÑÁâπÂÆöfunc 12345678910import module_1import module_2def monkey_patch(): module_1.pprint = module_2.pprintmonkey_patch()module_1.pprint() output: 1print 2 ‰ªé‰∏äÈù¢‰∏§‰∏™‰æãÂ≠ê‰∏≠‰Ω†ÂèØ‰ª•ÂæàÊ∏ÖÊô∞ÁöÑÁúãÂà∞ËôΩÁÑ∂Ë∞ÉÁî®ÁöÑÊòØÁõÆÊ†áÂáΩÊï∞,‰ΩÜÂÆûÈôÖ‰∏äÊâßË°åÁöÑÁ°ÆÂÆûË¢´ÊõøÊç¢ÁöÑÊñ∞ÁöÑÂáΩÊï∞„ÄÇ ¬∂gevent monkey.parch_allÊ∫êÁ†ÅËß£Êûê patch_all Â∞±ÊòØÁî®geventÁöÑasyncÁöÑfuncÊõøÊç¢python ÂéüÁîüÂ∫ì syncÁöÑfunc patch_allÈíàÂØπÊ®°ÂùóÁöÑÂºïÂÖ•ÊòØÊúâÈ°∫Â∫èÁöÑ, Âõ†‰∏∫‰ªñ‰ª¨‰πãÈó¥Êúâ‰æùËµñÁöÑÂÖ≥Á≥ª„ÄÇ 1234567891011121314151617181920def patch_all(socket=True, dns=True, time=True, select=True, thread=True, os=True, ssl=True, httplib=False, # Deprecated, to be removed. subprocess=True, sys=False, aggressive=True, Event=True, builtins=True, signal=True, queue=True, **kwargs): # locals() ÂáΩÊï∞‰ºö‰ª•Â≠óÂÖ∏Á±ªÂûãËøîÂõûÂΩìÂâç‰ΩçÁΩÆÁöÑÂÖ®ÈÉ®Â±ÄÈÉ®ÂèòÈáè„ÄÇ _warnings, first_time, modules_to_patch = _check_repatching(**locals()) # Â≠òÂú® warning Âπ∂‰∏î‰∏çÊòØÁ¨¨‰∏ÄÊ¨°Âä†ËΩΩ return if not _warnings and not first_time: return # ÁúÅÁï• ... # ÂÜÖÁΩÆÂØπ‰∫épythonÂéüÁîüÂ∫ìÁöÑÂ∞ÅË£ÖÔºåËøõË°åsyncÂêëaysncÁöÑÊõøÊç¢Êìç‰Ωú if os: patch_os() if time: patch_time() # ÁúÅÁï• ... _check_repatchingÂØπpatch_all ÂáΩÊï∞Â±ÄÈÉ®ÂèòÈáèÊ†°È™å: ÊòØÂê¶Á¨¨‰∏ÄÊ¨°Âä†ËΩΩ ÂèòÈáèÂèÇÊï∞‰π¶Âê¶‰∏Ä‰∏ÄËá¥ 1234567891011121314saved = &#123;&#125;def _check_repatching(**module_settings): _warnings = [] key = '_gevent_saved_patch_all' del module_settings['kwargs'] # ÂâçÂêéÂä†ËΩΩÁöÑÂèÇÊï∞‰∏ç‰∏ÄËá¥ warning if saved.get(key, module_settings) != module_settings: _queue_warning("Patching more than once will result in the union of all True" " parameters being patched", _warnings) first_time = key not in saved saved[key] = module_settings return _warnings, first_time, module_settings _patch_moduleËé∑ÂèñgeventÂÜÖÁΩÆÁöÑmoduleÂíåÁõÆÊ†ámodule 12345678910111213141516@_ignores_DoNotPatchdef patch_os(): _patch_module('os') def _patch_module(name, items=None, _warnings=None, _notify_did_subscribers=True):gevent_module = getattr(__import__('gevent.' + name), name)module_name = getattr(gevent_module, '__target__', name)target_module = __import__(module_name)patch_module(target_module, gevent_module, items=items, _warnings=_warnings, _notify_did_subscribers=_notify_did_subscribers)return gevent_module, target_module patch_module Ëé∑Âèñtarget_moduleÈúÄË¶ÅË¢´ÊõøÊç¢ÁöÑattr list ÂèØ‰ª•ÈÄöËøá items ÊåáÂÆöÔºå ‰πüÂèØ‰ª•Âú®source_moduleÁöÑÂèòÈáèÔºà__ implements __Ôºâ‰∏≠ÂÜôÂÖ•„ÄÇÁÑ∂ÂêéË∞ÉÁî®patch_itemËøõË°å ÂáΩÊï∞ÊõøÊç¢Êìç‰Ωú„ÄÇ 123456789101112131415161718192021_NONE = object()def patch_module(target_module, source_module, items=None, _warnings=None, _notify_did_subscribers=True): if items is None: items = getattr(source_module, '__implements__', None) if items is None: raise AttributeError('%r does not have __implements__' % source_module) for attr in items: patch_item(target_module, attr, getattr(source_module, attr))def patch_item(module, attr, newitem): olditem = getattr(module, attr, _NONE) if olditem is not _NONE: saved.setdefault(module.__name__, &#123;&#125;).setdefault(attr, olditem) setattr(module, attr, newitem) ‰ª•‰∏äÂ∞±ÊòØgevent ÈÄöËøá ÂÜÖÁΩÆÁöÑasync func ÊõøÊç¢ python ÂÜÖÁΩÆtarget sync func ÁöÑÂü∫Êú¨ÊµÅÁ®ãÔºåÊòØ‰∏çÊòØ‰πüÂπ∂‰∏çÈöæÁêÜËß£„ÄÇ ¬∂test‰∏≠ÁöÑÂêØÂèë Â∑•‰Ωú‰∏≠,‰∏∫‰∫Ü‰øùËØÅ‰ª£Á†ÅË¥®ÈáèÔºåÈÅøÂÖçÂá∫Áé∞‰∏ÄÊÉ≥‰∏çÂà∞ÁöÑÈîôËØØÔºåÁºñÂÜôÊµãËØïÁî®‰æãÊòØÂú®ÂºÄÂèëËøáÁ®ã‰∏≠ËßÜ‰∏∫‰∏çÂèØÂøΩËßÜÁöÑ‰∏ÄÁéØÔºåÁîöËá≥ËøòÂá∫Áé∞‰∫ÜTDDÁ≠âÂºÄÂèëÊµÅÁ®ã„ÄÇ ÊµãËØï‰∏ÄËà¨ÈÉΩÊòØÊú¨ÁùÄ‰∏ç‰æµÂÖ•ÁõÆÊ†á‰ª£Á†ÅÁöÑÂâçÊèê‰∏ãÔºåÂØπÁõÆÊ†á‰ª£Á†ÅÂäüËÉΩËøõË°åÊµãËØï„ÄÇ ‰ΩÜÂæàÂ§öÊó∂ÂÄô‰∏çÈÅøÂÖçÁöÑÂ∞±‰ºöÈúÄË¶ÅÂú®ÁõÆÊ†á‰ª£Á†Å‰∏äÂÅö‰∏Ä‰∫õÂæÆË∞ÉÊù•ÈÄÇÈÖçÊµãËØï„ÄÇ Â¶Ç:È°πÁõÆ‰∏≠‰ΩøÁî®‰∫Ürequest,‰ΩÜÊòØÂú®ÊµãËØïÁéØÂ¢É‰∏ãÔºå‰∏çÈúÄË¶ÅÁúüÊ≠£ÁöÑËØ∑Ê±ÇÂèëÈÄÅÔºåÂèØ‰ª•ÂèÇËÄÉhttmock„ÄÇ ÂÄòËã•Ë¶ÅÊª°Ë∂≥‰∏ç‰æµÂÖ•ÁöÑÂâçÊèêÊù°‰ª∂ÔºåÂ∞±ÈúÄË¶ÅmockÂá∫‰∏Ä‰∏™ÊúçÂä°„ÄÇÂú®ÊµãËØïÈò∂ÊÆµ‰ΩøÁî®mockÁöÑÊúçÂä°„ÄÇ Êú¨‰∫∫‰ªé‰∫ãÁöÑÈ°πÁõÆËøòÂèÇ‰∏éÁ°¨‰ª∂ÁöÑ‰∫§‰∫í„ÄÇÈ°πÁõÆ‰∏≠ÂÜÖÁΩÆ‰∫Ü‰∏Ä‰∏™Ê®°ÂùóÂ∞ÅË£Ö‰∏éËÆæÂ§áÁöÑ‰∫§‰∫í„ÄÇ‰∏äÂ±Ç‰∏öÂä°‰ª£Á†ÅÂè™ÈúÄË¶ÅË∞ÉÁî®Ê®°ÂùóÁöÑfuncÂç≥ÂèØ„ÄÇ ‰ΩÜÊòØÂú®testÊó∂ÔºåÂ≠òÂú®‰∏Ä‰∏™ÈöæÁÇπ: ÈúÄË¶ÅÊúâÂ∑≤ÁªèËøûÊé•ÁöÑËÆæÂ§á„ÄÇ ÊÄé‰πàÂâîÈô§Ëøô‰∏™‰æùËµñÂë¢? ¬∂Ë£ÖÈ•∞Âô®ÊõøÊç¢ Â∞ÜË£ÖÈ•∞Âô®‰ΩúÁî®‰∫éË¢´Ë∞ÉÁî®Ê®°ÂùóÁöÑclassÊàñÂàôfuncÔºåÊõøÊç¢ÁõÆÊ†áÂáΩÊï∞ ÁÆÄÂçïdemo: 12345678910111213141516171819def pprint(x): print(222, x)def deco(item): def inner(): setattr(item, "pprint", pprint) return item return inner@decoclass TT: def pprint(self, x): print(111, x)TT().pprint(233) output: 1222 233 Áº∫ÁÇπÔºö Â≠òÂú®‰æµÂÖ•‰ª£Á†ÅÁöÑÊÉÖÂÜµ ÂØπ‰∫éÊ∫êÁ†ÅÂ∫ìÊàñÂàôÁ¨¨‰∏âÊñπ‰ª£Á†ÅÂπ∂‰∏çËÉΩÁõ¥Êé•Âä†Ë£ÖÈ•∞Âô®ÔºåÈúÄË¶ÅÂÅö‰∏ÄÂ±ÇÂ∞ÅË£ÖÂêéÊâçËÉΩÂÆûÁé∞ ¬∂geventÊñπÊ°àËøõË°åÊõøÊç¢ Â¶Ç‰∏ãÁõÆÂΩïÁªìÊûÑ 1234567‚îú‚îÄ‚îÄ app‚îÇ ‚îî‚îÄ‚îÄ libs‚îÇ ‚îî‚îÄ‚îÄ http_client.py‚îî‚îÄ‚îÄ mock ‚îî‚îÄ‚îÄ monkey ‚îî‚îÄ‚îÄ http_client.py‚îî‚îÄ‚îÄ test.py Ê®°ÂùóÊõøÊç¢‰ª£Á†Å 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162# mock.monkey.pyimport importlibsaved = &#123;&#125;_NONE = object()def patch_all(httpclint=True, **kwargs): first_time, modules_to_patch = _check_repatching(**locals()) if not first_time: return if httpclint: patch_httpclint()def _check_repatching(**module_settings): key = '_gevent_saved_patch_all' del module_settings['kwargs'] first_time = key not in saved saved[key] = module_settings return first_time, module_settingsdef patch_httpclint(): _patch_module('http_client')def _patch_module(name, items=None, _warnings=None, _notify_did_subscribers=True): gevent_module = importlib.import_module('mock.' + name) module_name = getattr(gevent_module, '__target__', name) target_module = importlib.import_module(module_name) patch_module(target_module, gevent_module, items=items, _warnings=_warnings, _notify_did_subscribers=_notify_did_subscribers) return gevent_module, target_moduledef patch_module(target_module, source_module, items=None, _warnings=None, _notify_did_subscribers=True): if items is None: items = getattr(source_module, '__implements__', None) if items is None: raise AttributeError('%r does not have __implements__' % source_module) for attr in items: patch_item(target_module, attr, getattr(source_module, attr)) return Truedef patch_item(module, attr, newitem): olditem = getattr(module, attr, _NONE) if olditem is not _NONE: saved.setdefault(module.__name__, &#123;&#125;).setdefault(attr, olditem) setattr(module, attr, newitem) 12345678910111213# mock.monkey.py# ÈúÄË¶ÅË¢´ÊõøÊç¢ÁöÑÊ®°ÂùóÁöÑ‰ΩçÁΩÆ__target__ = "app.libs.http_client"# Ë¢´ÊõøÊç¢Ê®°ÂùóÁöÑÊñπÊ≥ï__implements__ = ['request']def request(method="GET", url="", **kwargs): if method == "GET": return 11111111 return 22222222 123456789# test.pyimport proxy.monkeyproxy.monkey.patch_all()from app.libs.http_client import requestprint(request(method="POST")) output: 122222222 ÊòØ‰∏çÊòØÂæàÈÖ∑ÔºåÈùûÂ∏∏‰ºòÈõÖÁöÑÂº•Ë°•‰∫ÜË£ÖÈ•∞Âô®ÁöÑ‰∏çË∂≥„ÄÇÂú®ÊµãËØïÁöÑÊó∂ÂÄôÂºÄÂêØÊõøÊç¢ÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ËßÑÈÅøÁ°¨‰ª∂ÊàñÂàôÁΩëÁªúÁ≠âÂ§çÊùÇÂõ†Á¥†„ÄÇ‰πüËÆ©ÊµãËØïÂèòÂæóÊõ¥Âä†È´òÊïàËµ∑Êù• ÂèÇËÄÉ ÊçïËõáËÄÖËØ¥ http://xiaorui.cc/archives/3248]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>Ê∫êÁ†Å</tag>
        <tag>test</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[conditionÊ∫êÁ†ÅËß£Êûê]]></title>
    <url>%2F2020%2F07%2F20%2F1%2F</url>
    <content type="text"><![CDATA[ConditionÊòØ‰∏ÄÁßçÂ§öÁ∫øÁ®ãÈÄö‰ø°Â∑•ÂÖ∑ÔºåË°®Á§∫Â§öÁ∫øÁ®ã‰∏ãÂèÇ‰∏éÊï∞ÊçÆÁ´û‰∫âÁöÑÁ∫øÁ®ãÁöÑ‰∏ÄÁßçÁä∂ÊÄÅÔºå‰∏ªË¶ÅË¥üË¥£Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ãÂØπÁ∫øÁ®ãÁöÑÊåÇËµ∑ÂíåÂî§ÈÜíÂ∑•‰Ωú ¬∂ÂÆû‰æãÂåñ ÂÆû‰æãConditionÊó∂ÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™lockÔºåÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÔºåÈªòËÆ§ÂàõÂª∫RLockÁöÑÂÆû‰æã„ÄÇÂêåÊó∂ConditionÊã•Êúâ‰∏éRLock‰∏ÄÊ†∑ÁöÑ‰∏äÈîÅÊñπÊ≥ïacquire()ÂíåËß£ÈîÅÊñπÊ≥ïrelease()„ÄÇ Âπ∂ÂàùÂßãÂåñÂèåÁ´ØÈòüÂàówaitersÔºåÁî®‰∫éÂ≠òÊîæ waitÁöÑthread 123456789101112131415161718192021222324class Condition: def __init__(self, lock=None): if lock is None: lock = RLock() self._lock = lock # Export the lock's acquire() and release() methods self.acquire = lock.acquire self.release = lock.release # Â¶ÇÊûúÈîÅÂÆö‰πâ‰∫Ü_release_save()Êàñ_acquire_restore()Ôºå # Ëøô‰∫õË¶ÜÁõñÈªòËÆ§ÂÆûÁé∞(Âè™ÊòØË∞ÉÁî®RlockÁöÑrelease()Âíåacquire())„ÄÇ_is_ownedÂêå‰∏ä()„ÄÇ try: self._release_save = lock._release_save except AttributeError: pass try: self._acquire_restore = lock._acquire_restore except AttributeError: pass try: self._is_owned = lock._is_owned except AttributeError: pass self._waiters = _deque()` ÂÆûÁé∞‰∏ä‰∏ãÊñáËØ≠Ê≥ï 12345def __enter__(self): return self._lock.__enter__()def __exit__(self, *args): return self._lock.__exit__(*args) ¬∂ÂàùÊé¢notifyÂíåwait Êù°‰ª∂ÈîÅÁöÑ‰∏§‰∏™ÈáçË¶ÅÊñπÊ≥ïÊòØnotify()Âíåwait()„ÄÇnotify()Âíåwait()ÂøÖÈ°ªÂú®Êù°‰ª∂ÈîÅ‰∏äÈîÅÁöÑÁä∂ÊÄÅ‰∏ã‰ΩøÁî® notify()Âíåwait()Ë¢´Ë∞ÉÁî®ÔºåÁ®ãÂ∫è‰ºöÂÖàÂéªË∞ÉÁî®self._is_owned()ÔºåÂà§Êñ≠ÂΩìÂâçÁ∫øÁ®ãÂè∑‰∏éÊù°‰ª∂ÈîÅ‰∏≠ÁöÑself._owerÊòØÂê¶‰∏ÄËá¥ÔºåÂ¶ÇÊûú‰∏ç‰∏ÄËá¥ÔºåÊäõÂá∫ÂºÇÂ∏∏RuntimeError„ÄÇ 1234567def _is_owned(self): # Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊã•ÊúâÈîÅÔºå_lock.acquire(0)ËøîÂõûFalse if self._lock.acquire(0): self._lock.release() return False else: return True wait()ÂÖàÂõûÈáäÊîæÁ¨¨‰∏ÄÂ±ÇRlock,ÂÖ∂‰ªñÁ∫øÁ®ãÂ∞±ÂèØ‰ª•Ëé∑ÂèñÈîÅÊâßË°åÔºåÁÑ∂Âêé‰ºöÁîüÊàê‰∏Ä‰∏™Lock,ÂÜôÂÖ•waiterÂπ∂Â∞ÜËá™Â∑±ÈîÅ‰ΩèÔºåÁ≠âÂæÖÂÖ∂‰ªñÁ∫øÁ®ãÈáäÊîæ 1234567891011121314151617181920212223242526272829303132333435def wait(self, timeout=None): if not self._is_owned(): raise RuntimeError("cannot wait on un-acquired lock") # ÂàõÂª∫‰∏Ä‰∏™ÈîÅÂØπË±°LockÔºåÂπ∂Ëé∑ÂèñÂÆÉÔºåÁÑ∂ÂêéÊääÂÆÉÊîæÂà∞waitingÊ±†ÔºåÈúÄË¶ÅÂèØ‰ª•Ë¢´ÂÖ∂‰ªñÁ∫øÁ®ãÈáäÊîæ waiter = _allocate_lock() waiter.acquire() self._waiters.append(waiter) # ÈáäÊîæÂ∫ïÂ±ÇÈîÅÔºåÂπ∂‰øùÂ≠òÈîÅÂØπË±°ÁöÑÂÜÖÈÉ®Áä∂ÊÄÅ saved_state = self._release_save() gotit = False try: if timeout is None: # Â¶ÇÊûútimeoutÊòØNoneÔºåÈÇ£‰πàÂÜçÊ¨°‰ª•ÈòªÂ°ûÁöÑÊñπÂºèËé∑ÂèñÈîÅÂØπË±° # ÂΩìÂâçÁ∫øÁ®ãÂ∑≤ÁªèËé∑Âèñ‰∫Ü‰∏ÄÊ¨°ËØ•ÈîÅÔºåÂÜçÊ¨°acquire()ÂΩìÂâçÁ∫øÁ®ã‰ºöÈòªÂ°ûÔºåÁõ¥Âà∞ÂÖ∂‰ªñÁ∫øÁ®ãÈáäÊîæËØ•ÈîÅ waiter.acquire() gotit = True else: # Â¶ÇÊûútimeout‰∏çÊòØNoneÔºåÈÇ£‰πàÈáçÂ§ç‰∏ãÈù¢ÁöÑÊµÅÁ®ãÔºö # time &gt; 0 ÈòªÂ°ûÊñπÂºèËé∑ÂèñÈîÅ,timeoutÊó∂Èó¥ÂÜÖblock # time &lt;0 ‰ª•ÈùûÈòªÂ°ûÊñπÂºèËé∑ÂèñÈîÅ if timeout &gt; 0: gotit = waiter.acquire(True, timeout) else: gotit = waiter.acquire(False) return gotit finally: # ÈáçÊñ∞‰∏äÁ¨¨‰∏ÄÂ±ÇÈîÅ self._acquire_restore(saved_state) if not gotit: try: # Â¶ÇÊûúÂõ†‰∏∫Ë∂ÖÊó∂ÔºåËÄå‰∏çÊòØË¢´Âî§ÈÜíÔºåÈÄÄÂá∫ÁöÑwait()ÔºåÈÇ£‰πàÂ∞ÜÈîÅ‰ªéwaitingÊ±†‰∏≠ÁßªÈô§ self._waiters.remove(waiter) except ValueError: pass notify()ÊòØÂú®‰∏Ä‰∏™ÂèåÁ´ØÈòüÂàó‰∏≠ËøõË°åÊìç‰ΩúÔºåËøô‰∏™ÈòüÂàóÂú®Condition‰∏≠Âêç‰∏∫_waiters„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºånotifyÂè™‰ºöÈáäÊîæ‰∏Ä‰∏™ÈîÅÔºàÊåâÂÖàËøõÂÖàÂá∫ÂéüÂàôÔºâ„ÄÇ Â¶ÇÊûúÈòüÂàó‰∏≠Ê≤°ÊúâÈîÅÔºåÁõ¥Êé•ÈÄÄÂá∫ÂáΩÊï∞Ôºå‰∏çÊä•‰ªª‰ΩïÂºÇÂ∏∏„ÄÇ 12345678910111213def notify(self, n=1): if not self._is_owned(): raise RuntimeError("cannot notify on un-acquired lock") all_waiters = self._waiters waiters_to_notify = _deque(_islice(all_waiters, n)) if not waiters_to_notify: return for waiter in waiters_to_notify: waiter.release() try: all_waiters.remove(waiter) except ValueError: pass Condition‰∏≠ËøòÊúâ‰∏Ä‰∏™notify_all()ÊñπÊ≥ïÔºåË∞ÉÁî®ÂÆÉ‰ºöÈáäÊîæÈòüÂàó‰∏≠ÂÖ®ÈÉ®ÁöÑÈîÅ„ÄÇ 1234def notify_all(self): self.notify(len(self._waiters))notifyAll = notify_all ¬∂ÊÄªÁªì condition ÈùûÂ∏∏ÈáçË¶ÅÔºåÂú®Queue,Semaphore,ThreadExecutorPoolÈÉΩÊúâÂ∫îÁî®„ÄÇ conditionÂÆûÁé∞‰∏ªË¶Å‰æùÈù†‰∏§Â±ÇÈîÅÔºö conditionÂàùÂßãÂåñÊó∂ÂàõÂª∫‰∏ÄÊääÈîÅ(Â§ñÈÉ®ÈîÅ)Ôºå‰ΩøÁî®Êó∂ÈúÄË¶ÅÂÖàÂØπÂ§ñÈÉ®ÈîÅ‰∏äÈîÅ ÊØèÊ¨°Ë∞ÉÁî®waitÊó∂Ôºå‰ºöÂÖàÁîüÊàê‰∏Ä‰∏™lockÈîÅ(ÂÜÖÈÉ®ÈîÅ)ÔºåÂ∞ÜÂÜÖÈÉ®ÈîÅÊîæÂà∞ÁÆóÂèåÁ´ØÈòüÂàówaiters‰∏≠Ôºå ÁÑ∂Âêé‰∏äÈîÅÔºåÂÜçÂ∞ÜÂ§ñÈÉ®ÈîÅÈáäÊîæ„ÄÇÂπ∂ÂÜçÊ¨°Ëé∑ÂèñÂÜÖÈÉ®ÈîÅblock,Á≠âÂæÖÂÖ∂‰ªñÁ∫øÁ®ãË∞ÉÁî®notifyÈáäÊîæËØ•ÂÜÖÈÉ®ÈîÅÔºå ÁÑ∂ÂêéËØ•Á∫øÁ®ã‰ºöÂéªËØïÂõæËé∑ÂèñÂÜÖÈÉ®ÈîÅ„ÄÇ]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>condition</tag>
        <tag>Ê∫êÁ†Å</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rlockÊ∫êÁ†ÅËß£Êûê]]></title>
    <url>%2F2020%2F07%2F07%2F1%2F</url>
    <content type="text"><![CDATA[ÂèØÈáçÂÖ•ÈîÅRLockÂÖÅËÆ∏Âú®Âêå‰∏ÄÁ∫øÁ®ã‰∏≠Ë¢´Â§öÊ¨°acquireÔºåÊàë‰ª¨Â∞Ü‰∏Ä‰∏ÄÊè≠ÊôìÂÆÉÁöÑÂÆûÁé∞ËøáÁ®ã„ÄÇ ¬∂Lock 123456import _thread_allocate_lock = _thread.allocate_lockLock = _allocate_lock LockÂè™ÊòØÁÆÄÂçïÁöÑÂØπÂ∫ïÂ±ÇÂ∫ìÂÅö‰∫Ü‰∏™‰ª£ÁêÜ„ÄÇÈîÅÂπ∂‰∏çÂ±û‰∫éÈîÅÂÆöÂÆÉÁöÑÁ∫øÁ®ã;Âè¶‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•Ëß£ÈîÅÂÆÉ„ÄÇÁî±C‰ª£Á†ÅÂÆûÁé∞„ÄÇ 12345678910111213141516171819202122232425import threadingimport timedef worker1(lock): lock.acquire() print("worker1 running") time.sleep(5) lock.release() passdef worker2(lock): lock.release() print("worker2 running") time.sleep(2) lock.acquire() passlock = threading.Lock()t = threading.Thread(target=worker1, args=(lock,))t1 = threading.Thread(target=worker2, args=(lock,))t.start()t1.start() worker2ÂèØ‰ª•ÈáäÊîæworker1Ëé∑ÂæóÁöÑÈîÅÔºåËé∑ÂæóÁöÑÈîÅ‰πüËÉΩË¢´worker1ÈáäÊîæ ¬∂RLock ‰∏§‰∏™ÁâπÊÄß: ÂèØÈáçÂÖ•:ÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÂèØ‰ª•Â§öÊ¨°acquire,release Á∫øÁ®ãÁã¨Âç†:ÂΩìÂâçÁ∫øÁ®ãËé∑ÂèñÁöÑÈîÅÂÖ∂‰ªñÁ∫øÁ®ã‰∏çËÉΩÈáäÊîæ 12345678def RLock(*args, **kwargs): """ ËØ•Â∑•ÂéÇÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÂèØÈáçÂÖ•ÈîÅ„ÄÇ ‰∏Ä‰∏™ÂèØÈáçÂÖ•ÈîÅÂøÖÈ°ªÁî±ÂàõÂª∫ÂÆÉÁöÑÁ∫øÁ®ãÈáäÊîæ„ÄÇ‰∏ÄÊó¶‰∏Ä‰∏™Á∫øÁ®ãËé∑Âæó‰∫Ü‰∏Ä‰∏™ÂèØÈáçÂÖ•ÈîÅÔºåËØ•Á∫øÁ®ãÂèØÁî®Êó†ÈòªÂ°ûÁöÑÂÜçÊ¨°Ëé∑Âèñ„ÄÇÊØèÊ¨°Ëé∑ÂèñÈîÅÂêéÂøÖÈ°ªËøõË°åÈáäÊîæ„ÄÇ """ if _CRLock is None: return _PyRLock(*args, **kwargs) return _CRLock(*args, **kwargs) Âú®3.6.5ÁâàÊú¨‰∏≠„ÄÇÈªòËÆ§ÈááÁî®ÁöÑÊòØC ËØ≠Ë®ÄÂÆûÁé∞ÁöÑÔºåÂç≥_CRLock„ÄÇËøòÊúâ‰∏Ä‰∏™PythonÁâàÊú¨ÂÆûÁé∞ÁöÑÔºåÂç≥_PyRLockÔºà‰πüÂ∞±ÊòØÁ±ª_RLockÔºâ 123456class _RLock: def __init__(self): self._block = _allocate_lock() self._owner = None self._count = 0 ÈÄöËøáÊü•ÁúãRlock ÂÆû‰æãÂåñÂèØ‰ª•ÂæóÁü•ÔºåRlockÂè™ÊòØÂú®LockÂü∫Á°Ä‰∏äÂè¶Â§ñÁª¥Êä§‰∫Ü_owner,_count‰ªéËÄåËææÂà∞-ÂèØÈáçÂÖ•ÁöÑÊïàÊûúÔºõ _block :ÂÜÖÈÉ®‰∫íÊñ•Êéí‰ªñÈîÅÂêåLock _owner :ËÆ∞ÂΩïRLockÈîÅÁöÑÊåÅÊúâËÄÖÁöÑÁ∫øÁ®ãid,Âà§Êñ≠ÈîÅÁöÑÊåÅÊúâËÄÖÂíåÂΩìÂâçÁöÑÁ∫øÁ®ãÊòØÂê¶‰∏ÄËá¥ _count : ÂÜÖÈÉ®ÁöÑËÆ°Êï∞Âô®ÔºåÁî®Êù•ËÆ∞ÂΩïÈîÅË¢´ÊåÅÊúâÁöÑÊ¨°Êï∞ÔºåÂØπ‰∫éRLockÁöÑÂ±û‰∏ªÁ∫øÁ®ãÔºåÊØèËé∑Âèñ‰∏ÄÊ¨°ÈîÅÂ∞±+1ÔºåÂèç‰πãÊØèÈáäÊîæ‰∏ÄÊ¨°ÈîÅÂ∞±-1ÔºåÂΩìËÆ°Êï∞Âô®‰∏∫0Êó∂ÔºåÂ∞±ÈáäÊîæÂÜÖÈÉ®ÁöÑÈîÅÔºåËøôÊ†∑ÂÖ∂‰ªñÁ∫øÁ®ãÂèØ‰ª•ÁªßÁª≠Ëé∑ÂèñËØ•ÂÜÖÈÉ®ÈîÅÔºåÁªßËÄåËé∑Âèñ‰∫ÜËøô‰∏™Rlock 1234567891011121314151617def acquire(self, blocking=True, timeout=-1): me = get_ident() if self._owner == me: # Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÁöÑpidÊòØRLockÂØπË±°ÊâÄÂú®ÁöÑÁ∫øÁ®ãÔºåÈÇ£‰πàÂØπËÆ°Êï∞Âô®ËøõË°åÂä†‰∏ÄÊìç‰Ωú self._count += 1 return 1 # ‰∏çÊª°Ë∂≥‰∏äËø∞Êù°‰ª∂Ôºö # 1. ÂΩìÂâçÁ∫øÁ®ãÈùûRLockÂØπË±°ÊâÄÂú®Á∫øÁ®ã # 2. RLockÂØπË±°ËøòÊú™ÊåÅÊúâÈîÅÔºåÂç≥ self.owner = None # ÂØπLock‰∏äÈîÅÔºö # ÂΩì blocking=True Êó∂ÔºåÂΩìÂâçÁ∫øÁ®ãË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÂ∞ÜÈîÅÈáäÊîæÂêéÔºårc = True # ÂΩì blocking=False Êó∂ÔºåÂèØ‰ª•ÈùûÈòªÂ°ûÁöÑËé∑Âèñ„ÄÇÂ¶ÇÊûúËé∑ÂèñÈîÅÊàêÂäüÔºårc = TrueÔºõËé∑ÂèñÂ§±Ë¥•Ôºårc = False rc = self._block.acquire(blocking, timeout) if rc: self._owner = me self._count = 1 return rc acquireÊñπÊ≥ïÁöÑÊµÅÁ®ãÂõæÂ¶Ç‰∏ã: 1234567def release(self): if self._owner != get_ident(): # Â¶ÇÊûúÊåÅÊúâÈîÅÁöÑÁ∫øÁ®ãÈùûÂΩìÂâçÁ∫øÁ®ãÔºåÂàôÊäõÂºÇÂ∏∏ raise RuntimeError("cannot release un-acquired lock") self._count = count = self._count - 1 if not count: # Â¶ÇÊûúËÆ°Êï∞Âô®ÂáèÂà∞0ÔºåÈÇ£‰πàÈáäÊîæRLockÂÜÖÈÉ®ÁöÑÈîÅÔºåÊ≠§Êó∂ÂÖ∂‰ªñÁ∫øÁ®ãÂ∞±ÂèØ‰ª•Ëé∑ÂèñÂà∞ÈîÅ self._owner = None self._block.release() releaseÊñπÊ≥ïÁöÑÊµÅÁ®ãÂõæÂ¶Ç‰∏ã: ÂèÇËÄÉÔºö https://blog.csdn.net/u010301542/article/details/80144643 https://reishin.me/python-source-code-parse-with-rlock/ https://www.cnblogs.com/buwu/p/12740646.html]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>Ê∫êÁ†Å</tag>
        <tag>lock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python‰∏≠ÁöÑÂ§öÁªßÊâø]]></title>
    <url>%2F2020%2F04%2F26%2F1%2F</url>
    <content type="text"><![CDATA[Áõ∏‰ø°Â≠¶ËøájavaÁöÑÂêåÂ≠¶‰ª¨ÈÉΩÁü•ÈÅìjavaÂπ∂‰∏çÊîØÊåÅÂ§öÁªßÊâøÔºå‰ΩÜpython‰∏≠Âç¥ÊòØÊîØÊåÅÂ§öÁªßÊâøÁöÑÔºåËÄå‰∏îÂÉèpythonÁ§æÂå∫‰∏≠ÈùûÂ∏∏ÊúâÂêçÁöÑÊ°ÜÊû∂‰∏≠Â∞±ÁñØÁãÇÂºïÂÖ•Â§öÁªßÊâøÊù•Êâ©Â±ïÁ±ªÁöÑÂäüËÉΩ„ÄÇpythonÂ§öÁªßÊâøÂü∫‰∫émroÁÆóÊ≥ïÊù•ÂÆûÁé∞ÁöÑ„ÄÇ ¬∂MRO ÂèëÂ±ïÂè≤ ‰∫å‰πâÊÄßÈóÆÈ¢òÔºöÂΩìb1,b2ÈÉΩÁªßÊâøAÊó∂ÔºåÂÅáËÆæAÁ±ªÊúâ‰∏™f()ÊñπÊ≥ïÈÉΩË¢´b1,b2ÈáçÂÜô„ÄÇÊ≠§Êó∂cÂú®ÂêåÊó∂ÁªßÊâøb1,b2ÂΩìË∞ÉÁî®f()ÊñπÊ≥ïÊó∂ÔºåÂ∞±Êó†Ê≥ïÁ°ÆÂÆöË∞ÉÁî®ÈÇ£‰∏™ÊñπÊ≥ï„ÄÇ python ‰∏∫‰∫ÜÂ§ÑÁêÜ‰∫å‰πâÊÄßÈóÆÈ¢òÔºåPythonÈááÁî®MROÊú∫Âà∂„ÄÇÂú®pythonÂèëÂ±ïËøáÁ®ã‰πüÈÄêÊ≠•ÂØπMROÁÆóÊ≥ïËøõË°å‰ºòÂåñ„ÄÇ ¬∂before python2.2 Python2.2‰ª•ÂâçÁöÑÁâàÊú¨ÔºöÁªèÂÖ∏Á±ª MROÁÆóÊ≥ï‰æùÊçÆ:DFS DFS(Ê∑±Â∫¶‰ºòÂÖàÁÆóÊ≥ï)ÈááÁî®ÈÄíÂΩíÁöÑÂΩ¢ÂºèÔºåÁî®Âà∞‰∫ÜÊ†àÁªìÊûÑÔºåÂÖàËøõÂêéÂá∫ÔºåÂ≠òÂú®‰∏ÄÂÆöÁº∫Èô∑„ÄÇ Âú®Ê≠£Â∏∏ÁªßÊâøÊ®°Âºè‰∏ãÔºåÁ¨¶ÂêàÈ¢ÑÊúüÔºå‰ΩÜÊòØÂú®Ê£±ÂΩ¢ÁªßÊâøÊ®°Âºè‰∏ãCÁ±ªÂç≥‰æøÁªßÊâøDÁ±ªÁöÑÊñπÊ≥ïÔºå‰ΩÜÁî±‰∫éDÁ±ªÂú®DFS‰∏ãÂÖà‰∫éCÁ±ªÔºåÂõ†Ê≠§CÁ±ªÁöÑÊñπÊ≥ïÊ∞∏Ëøú‰∏ç‰ºöË¢´ÊâßË°å ¬∂python2.2 python2.2ÂºÄÂßãÂºïÂÖ•Êñ∞ÂºèÁ±ªÔºåÁªèÂÖ∏Á±ª‰æùÊóßÈááÁî®DFS,ËÄåÊñ∞ÂºèÁ±ªÈááÁî®BFS pythonÊñ∞ÂºèÁ±ªÂíåÁªèÂÖ∏Á±ªÁöÑÂå∫Âà´ BFS(ÂπøÂ∫¶‰ºòÂÖàÁÆóÊ≥ï)ÈÄâÂèñÁä∂ÊÄÅÁî®ÈòüÂàóÁöÑÂΩ¢ÂºèÔºåÂÖàËøõÂÖàÂá∫Ôºå‰æùÊóßÂ≠òÂú®Áº∫Èô∑„ÄÇËôΩÁÑ∂Ê£±ÂΩ¢ÁªßÊâøÊ®°Âºè‰∏ãÁöÑÁº∫Èô∑Ë¢´Ëß£ÂÜ≥‰∫ÜÔºå‰ΩÜÊ≠£Â∏∏ÁªßÊâøÊ®°Âºè‰∏ãÊòæÂæó‰∏çÂ§™Â∏∏ËßÑ„ÄÇ ¬∂python2.3~2.7 ‰ªépython2.3ÂºÄÂßãpythonÂØπÊñ∞ÂºèÁ±ªÁöÑMROÁÆóÊ≥ïËøõË°åË∞ÉÊï¥,ÈááÁî®C3ÁÆóÊ≥ï„ÄÇ‰∏Ä‰∏æËß£ÂÜ≥‰∫ÜDFS BFS Â≠òÂú®ÁöÑÂ±ÄÈôê„ÄÇ ¬∂after python3 python3ÂºÄÂßã,pythonÊîæÂºÉ‰∫ÜÁªèÂÖ∏Á±ªÔºåÊâÄÊúâÁöÑÁ±ªÈÉΩÊòØÊñ∞ÂºèÁ±ªÈááÁî®C3ÁÆóÊ≥ï„ÄÇ ¬∂ÊÄªÁªì pythonÁâàÊú¨ MROÁÆóÊ≥ï‰æùÊçÆ before python2.2 DFS(ÁªèÂÖ∏Á±ª) python2.2 DFS(ÁªèÂÖ∏Á±ª),BFS(Êñ∞ÂºèÁ±ª) python2.3~2.7 DFS(ÁªèÂÖ∏Á±ª),C3(Êñ∞ÂºèÁ±ª) python3 C3(Êñ∞ÂºèÁ±ª) ¬∂C3 Á∫øÊÄßÁÆóÊ≥ïÂéüÁêÜ Êàë‰ª¨Áî® C1C2‚ãØCNË°®Á§∫ÂåÖÂê´ N ‰∏™Á±ªÁöÑÂàóË°®ÔºåÂπ∂‰ª§ head(C1C2‚ãØCN)=C1 tail(C1C2‚ãØCN)=C2C3‚ãØCN ÂÅáËÆæÁ±ª CÁªßÊâøËá™Áà∂Á±ª B1,‚ãØ,BNB1,‚ãØ,BNÔºåÈÇ£‰πàÊ†πÊçÆ C3 Á∫øÊÄßÂåñÔºåÁ±ª CÁöÑÊñπÊ≥ïËß£ÊûêÂàóË°®ÈÄöËøáÂ¶Ç‰∏ãÂÖ¨ÂºèÁ°ÆÂÆöÔºö L[C(B1‚ãØBN)]=C+merge(L[B1],‚ãØ,L[BN],B1‚ãØBN) ËØ•Êìç‰ΩúÂèØ‰ª•ÂàÜ‰∏∫‰ª•‰∏ãÂá†‰∏™Ê≠•È™§: 1.ÈÄâÂèñ merge ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂàóË°®ËÆ∞‰∏∫ÂΩìÂâçÂàóË°® K„ÄÇ 2.‰ª§ h=head(K) ÔºåÂ¶ÇÊûú hÊ≤°ÊúâÂá∫Áé∞Âú®ÂÖ∂‰ªñ‰ªª‰ΩïÂàóË°®ÁöÑ tail ÂΩì‰∏≠ÔºåÈÇ£‰πàÂ∞ÜÂÖ∂Âä†ÂÖ•Âà∞Á±ª C ÁöÑÁ∫øÊÄßÂåñÂàóË°®‰∏≠ÔºåÂπ∂Â∞ÜÂÖ∂‰ªé merge ‰∏≠ÊâÄÊúâÂàóË°®‰∏≠ÁßªÈô§Ôºå‰πãÂêéÈáçÂ§çÊ≠•È™§ 2„ÄÇ 3.Âê¶ÂàôÔºåËÆæÁΩÆ KK ‰∏∫ merge ‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™ÂàóË°®ÔºåÂπ∂ÈáçÂ§ç 2 ‰∏≠ÁöÑÊìç‰Ωú„ÄÇ 4.Â¶ÇÊûú merge ‰∏≠ÊâÄÊúâÁöÑÁ±ªÈÉΩË¢´ÁßªÈô§ÔºåÂàôËæìÂá∫Á±ªÂàõÂª∫ÊàêÂäüÔºõÂ¶ÇÊûú‰∏çËÉΩÊâæÂà∞‰∏ã‰∏Ä‰∏™ hÔºåÂàôËæìÂá∫ÊãíÁªùÂàõÂª∫Á±ª CC Âπ∂ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ ÁÆóÊ≥ïÊºîÁÆóÂ¶Ç‰∏ãÔºö 123456789101112L[E] = L[E(O)] = E + merge(L[O],O) = [E,O] L[D] = [D,O] L[F] = [F,O] L[B] = B + merge(L[E],L[D],E,D) = B + merge([E,O],[D,O],E,D) = [B,E,D,O] L[C] = C + merge(L[D],L[F],D,F) = [C,D,F,O] L[A] = A + merge([B,E,D,O],[C,D,F,O],B,C) = [A,B,E,C,D,F,O] Êü•ÁúãMRO ÁªßÊâøÂÖ≥Á≥ªÔºö __MRO__ ‰ª•‰∏ãÊòØÊú¨‰∫∫‰πãÂâçÂÜôÁöÑppt,Êèê‰æõÂèÇËÄÉ: MRO_PPT]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>mro</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[redisÂºïÁî®‰πãËÆ°Êï∞Âô®]]></title>
    <url>%2F2020%2F04%2F03%2F1%2F</url>
    <content type="text"><![CDATA[ÂΩìÊàë‰ª¨ÁöÑÁΩëÁ´ô‰∏äÁ∫ø‰πãÂêé,Êàë‰ª¨ÂæàÂ§öÊó∂ÂÄôÈúÄË¶ÅÂØπÁΩëÁ´ôÊµèËßàËÆ∞ÂΩïËøõË°åÂàÜÊûêÔºå‰ªéËÄåÂÅöÂá∫ÂØπÁ≠ñ„ÄÇ Â¶Ç:Êàë‰ª¨ÈúÄË¶ÅÂØπÁÉ≠ÁÇπÈ°µÈù¢ËøõË°åÁºìÂ≠òÔºåÂõ†Ê≠§Êàë‰ª¨Â∞±ÈúÄË¶ÅÁü•ÈÅìÈ°µÈù¢ÁÇπÂáªÊï∞Á≠âÁ≠â„ÄÇ Áî±‰∫éredisÁöÑÂ§ÑÁêÜÂëΩ‰ª§ÂÅöÂà∞Á∫øÁ®ãÂÆâÂÖ®ÔºåÂπ∂‰∏îÊîØÊåÅÂ§ßÈáèÁöÑËØªÂÜôÊìç‰ΩúÔºåÂõ†Ê≠§Â∞ÜËÆ°Êï∞Âô®ÂÇ®Â≠òÂà∞redisÈáåÈù¢ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑÊñπÊ°à„ÄÇ ¬∂ËÆæËÆ°ÊÄùË∑Ø Êàë‰ª¨ÈúÄË¶ÅËÆ∞ÂΩï‰∏çÂêåÊó∂Èó¥Á≤æÂ∫¶‰∏ãÁöÑÁî®Êà∑ÁÇπÂáªÊï∞ÔºåÈ¶ñÂÖàÁõ∏ÂêåÁ≤æÂ∫¶Âè™ÈúÄÂ≠òÂÇ®ÂçïÊ¨°ÔºåÂÖ∂ÂÆûÊàë‰ª¨ÈúÄË¶ÅÂèØ‰ª•ÈÅçÂàóË°®Ëé∑ÂèñÁ≤æÂ∫¶, ÊòæÁÑ∂ÈúÄË¶ÅÂÖ∑Â§áÂéªÈáçÂπ∂‰∏îÊéíÂ∫èÁöÑÁâπÊÄß„ÄÇËøôÈáåÊàë‰ª¨ÈÄâÊã©zsetÁî®‰∫éÂ≠òÂÇ®Á≤æÂ∫¶Êï∞ÊçÆ„ÄÇÂ∞ÜÂàÜÂÄºËÆæ‰∏∫0Ôºå‰ΩøÂÖ∂Ê†πÊçÆÊàêÂëòÂêçËøõË°åÊéíÂ∫è„ÄÇ 1234567# keyÔºöknown# type:zset1:hits 05:hits 060:hits 060*60:hits 0 ËÄåÂØπ‰∫éÊüê‰∏Ä‰∏™Á≤æÂ∫¶‰∏ãÁöÑÁÇπÂáªÊï∞ÈáèÁöÑËÆ∞ÂΩïÔºåÊàë‰ª¨ÈááÁî®hash Êù•ËøõË°åÂ≠òÂÇ®Ôºåkey ‰∏∫Êó∂Èó¥Êà≥ÂèØ‰ª•‰øùËØÅÂîØ‰∏ÄÊÄßÔºåÂØπvalue ËøõË°åincr , Áî±‰∫éredis ÁöÑÂçïÁ∫øÁ®ãÁâπÊÄßÔºåÂ∑≤Áªè‰øùËØÅÂØπÊìç‰ΩúÁöÑÂéüÂ≠êÊÄß„ÄÇ 1234567# key: count:1:hits # type:hashtime1 70time2 40time3 50time4 50 ¬∂ÂØπËÆ°Êï∞Âô®ËøõË°åÊõ¥Êñ∞ ÈÄöËøápipelineÊó¢ÂèØ‰ª•ÂáèÂ∞ëÈÄö‰ø°Ê¨°Êï∞ÔºåËøòÂèØ‰ª•‰øùËØÅËøô‰∫õÂëΩ‰ª§ÊâßË°åËøáÁ®ã‰∏≠‰∏ç‰ºöÊèíÂÖ•ÂÖ∂‰ªñÂëΩ‰ª§„ÄÇ 1234567891011121314151617181920212223import timePRECISION = (1, 5, 60, 5 * 60, 60 * 60, 5 * 60 * 60, 24 * 60 * 60,)def update_counter(conn, name, count=1, now=None): """ :param conn: redisËøûÊé•ÂØπË±° :param name: ÁªüËÆ°Âêç(ÁÇπÂáªÈáèÔºåÈîÄÈáè...) :param count: ËÆøÈóÆÊï∞ :param now: ÂΩìÂâçÊó∂Èó¥ :return: """ now = now or time.time() pipe = conn.pipeline() for prec in PRECISION: # ÂèñÂæóÂΩìÂâçÁ≤æÂ∫¶ÁöÑÂºÄÂßãÊó∂Èó¥ pnow = now // prec * prec hash = f'&#123;prec&#125;:&#123;name&#125;' pipe.zadd('known:', &#123;hash: 0&#125;) pipe.hincrby('count:' + hash, pnow, count) pipe.execute() ¬∂Ëé∑ÂèñÊåáÂÆöÁ≤æÂ∫¶ÁöÑÊï∞ÊçÆ ÈÄöËøáËé∑ÂèñprecisionÁ≤æÂ∫¶hash Ë°®‰∏ãÁöÑÊâÄÊúâÊï∞ÊçÆÔºåÂπ∂ÂØπÊó∂Èó¥Êà≥ËøõË°åÊéíÂ∫èÂπ∂Ê†ºÂºèÂåñÔºåÂ±ïÁ§∫ÁªôÁî®Êà∑„ÄÇ 123456def get_counter(conn, name, precision, data_format="%Y-%m-%d %H:%M:%S"): hash = f'&#123;precision&#125;:&#123;name&#125;' all_counter = conn.hgetall('count:' + hash) return sorted( map(lambda obj: (time.strftime(data_format, time.localtime(int(obj[0]))), int(obj[1])), all_counter.items()), key=lambda obj: (obj[0], obj[1],)) ¬∂Ê∏ÖÁêÜÊóßËÆ°Êï∞Âô® Âú®redis‰∏≠ÔºåÈíàÂØπzsetÂπ∂Ê≤°ÊúâÂØπ‰∫éÂÖ∂ÂÜÖÈÉ®keyÂØπÂ∫îÁöÑexpireÊìç‰ΩúÔºåÂõ†Ê≠§ÈúÄË¶ÅÊèê‰æõ‰∏Ä‰∏™Âà†Èô§Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ ÈúÄË¶ÅÊ≥®ÊÑè‰ª•‰∏ãÂá†ÁÇπÔºö Âú®Âà†Èô§ËøáÁ®ã‰∏≠ÔºåÈöèÊó∂ÂèØËÉΩÊúâÊñ∞ÁöÑËÆ°Êï∞Âô®Êõ¥Êñ∞ÊàñÊ∑ªÂä†ËøõÊù•ÔºåÂõ†Ê≠§Âú®Âà†Èô§ËÆ°Êï∞Âô®ÁöÑÊó∂ÂÄôÈúÄË¶Å‰ΩøÁî®redis‰∫ãÂä°„ÄÇ ÈíàÂØπ‰∏Ä‰∫õÊõ¥Êñ∞È¢ëÁéáËøáÈïøÁöÑËÆ°Êï∞Âô®ÔºåÂèØ‰ª•Èôç‰ΩéÊ∏ÖÁêÜÈ¢ëÁéá„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263QUIT = Falsedef clean_counters(conn): pipe = conn.pipeline(True) # Á®ãÂ∫èÊ∏ÖÁêÜÊìç‰ΩúÊâßË°åÁöÑÊ¨°Êï∞,ÊØèÊâßË°å‰∏ÄÊ¨°Âä†‰∏Ä passes = 0 # ÊåÅÁª≠Âú∞ÂØπËÆ°Êï∞Âô®ËøõË°åÊ∏ÖÁêÜÔºåÁõ¥Âà∞ÈÄÄÂá∫‰∏∫Ê≠¢„ÄÇ while not QUIT: # ËÆ∞ÂΩïÊ∏ÖÁêÜÊìç‰ΩúÂºÄÂßãÊâßË°åÁöÑÊó∂Èó¥ÔºåÁî®‰∫éËÆ°ÁÆóÊ∏ÖÁêÜÊìç‰ΩúÊâßË°åÁöÑÊó∂Èïø„ÄÇ start = time.time() # ‰Ωú‰∏∫ÈÅçÂéÜ known(zset)Ë°® value ÁöÑ index index = 0 while index &lt; conn.zcard('known:'): # ÂèñÁâπÂÆöÁ≤æÂ∫¶ÁöÑËÆ°Êï∞Âô®Ë°® key (hash) hash = conn.zrange('known:', index, index) index += 1 if not hash: break hash = hash[0] # ÂèñÂæóËÆ°Êï∞Âô®ÁöÑÁ≤æÂ∫¶„ÄÇ prec = int(hash.partition(':')[0]) # ÈÄöËøáÁ≤æÂ∫¶ËÆ°ÁÆóÊ∏ÖÁêÜÁöÑÈ¢ëÁéá(Á≤æÂ∫¶‰∏∫ 1 min ‰ª•ÂÜÖÁöÑËÆæÁΩÆÊØèÊ¨°ËΩÆËØ¢ÈÉΩ‰ºöÊ∏ÖÁêÜÔºåÂ§ß‰∫é1min ËÆæÁΩÆ int(prec // 60)Ê¨°ËøõË°åÊ∏ÖÁêÜ) bprec = int(prec // 60) or 1 # Âà§Êñ≠ÂΩìÂâçÁ≤æÂ∫¶Â§Ñ‰∫éÂΩìÂâçËΩÆËØ¢Ê¨°Êï∞‰∏ãÊòØÂê¶ÈúÄË¶ÅË¢´Ê∏ÖÁêÜ if passes % bprec: continue hkey = 'count:' + hash # ËÆ°ÁÆóËØ• Èó¥ cutoff = time.time() - SAMPLE_COUNT * prec # Ëé∑ÂèñËØ•Á≤æÂ∫¶‰∏ãÊâÄÊúâÊ†∑Êú¨Âπ∂ÊéíÂ∫è samples = sorted(map(int, conn.hkeys(hkey))) # ÈÄöËøá‰∫åÂàÜÊü•ÊâæÂ∑≤ÁªèÊéíÂ∫èÁöÑÂàóË°®‰∏≠ËøáÊúüÁöÑkey remove = bisect.bisect_right(samples, cutoff) if remove: # ÁßªÈô§ËøáÊúüËÆ°Êï∞Ê†∑Êú¨ conn.hdel(hkey, *samples[:remove]) # Âà§Êñ≠ËÆ°Êï∞Ê†∑Êú¨ÊòØÂê¶ÂÖ®ÈÉ®ËøáÊúüÔºåËøáÊúüÂà†Èô§Âú®zset‰∏≠ÁöÑÂÜÖÂÆπ if remove == len(samples): try: # Âú®Â∞ùËØï‰øÆÊîπËÆ°Êï∞Âô®Êï£Âàó‰πãÂâçÔºåÂØπÂÖ∂ËøõË°åÁõëËßÜ„ÄÇÁ°Æ‰øùÂà†Èô§Êó∂ÊúâÊ∑ªÂä†ÂèØ‰ª•ÊãíÁªùÂà†Èô§Êìç‰Ωú pipe.watch(hkey) # È™åËØÅËÆ°Êï∞Âô®Êï£ÂàóÊòØÂê¶‰∏∫Á©∫ÔºåÂ¶ÇÊûúÊòØÁöÑËØùÔºåÈÇ£‰πà‰ªéËÆ∞ÂΩïÂ∑≤Áü•ËÆ°Êï∞Âô®ÁöÑÊúâÂ∫èÈõÜÂêàÈáåÈù¢ÁßªÈô§ÂÆÉ if not pipe.hlen(hkey): pipe.multi() pipe.zrem('known:', hash) pipe.execute() # Âà†Èô§‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåzsetÁöÑzcardÂáè‰∏Ä,Âõ†Ê≠§index‰∏çÂèòÂç≥ÂèØËé∑Âèñ‰∏ã‰∏Ä‰∏™Á≤æÂ∫¶ index -= 1 else: # ËÆ°Êï∞Âô®Êï£ÂàóÂπ∂‰∏ç‰∏∫Á©∫ÔºåÁªßÁª≠ËÆ©ÂÆÉÁïôÂú®ËÆ∞ÂΩïÂ∑≤ÊúâËÆ°Êï∞Âô®ÁöÑÊúâÂ∫èÈõÜÂêàÈáåÈù¢ pipe.unwatch() # Âà†Èô§ËøáÁ®ã‰∏≠ÊúâÂÖ∂‰ªñÁ®ãÂ∫èÂêëËøô‰∏™ËÆ°ÁÆóÂô®Êï£ÂàóÊ∑ªÂä†‰∫ÜÊñ∞ÁöÑÊï∞ÊçÆÔºåÁªßÁª≠ËÆ©ÂÆÉÁïôÂú®ËÆ∞ÂΩïÂ∑≤Áü•ËÆ°Êï∞Âô®ÁöÑÊúâÂ∫èÈõÜÂêàÈáåÈù¢ except WatchError: pass # Ê∏ÖÁêÜÊ¨°Êï∞Âä†‰∏Ä passes += 1 duration = min(int(time.time() - start) + 1, 60) # Â¶ÇÊûúËøôÊ¨°Âæ™ÁéØÊú™ËÄóÂ∞Ω60ÁßíÈíüÔºåÈÇ£‰πàÂú®‰Ωô‰∏ãÁöÑÊó∂Èó¥ÂÜÖËøõË°å‰ºëÁú†Ôºõ # Â¶ÇÊûú60ÁßíÈíüÂ∑≤ÁªèËÄóÂ∞ΩÔºåÈÇ£‰πà‰ºëÁú†‰∏ÄÁßíÈíü‰ª•‰æøÁ®ç‰Ωú‰ºëÊÅØ„ÄÇ time.sleep(max(60 - duration, 1)) ‰ª•‰∏äÂ∞±ÊòØÈÄöËøáredis ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑËÆ°Êï∞Âô®ÂäüËÉΩ„ÄÇ]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RedisÊï∞ÊçÆÁªìÊûÑÂ∫ïÂ±Ç_String]]></title>
    <url>%2F2020%2F03%2F25%2F1%2F</url>
    <content type="text"><![CDATA[StringÂú®Redis‰∏≠ÊòØÂèØÂèòÂ≠óËäÇÊï∞ÁªÑÁöÑÂΩ¢ÂºèÂ≠òÂú®,‰ΩÜÂÆÉÂπ∂‰∏çÊòØCÊâÄÊèê‰æõÁöÑÂéüÂßãÂ≠óÁ¨¶Êï∞ÁªÑ„ÄÇRedisÈÄöËøáËá™Âª∫Simple dynamic string(SDS)ÂÆûÁé∞„ÄÇ ¬∂SDS redisÂú®ÂÜÖÈÉ®Â≠òÂÇ®stringÈÉΩÊòØÁî®sdsÁöÑÊï∞ÊçÆÁªìÊûÑÂÆûÁé∞„ÄÇÁªìÊûÑÊ∫êÁ†ÅÂ¶Ç‰∏ã: 12345678struct sdshdr&#123; //ËÆ∞ÂΩïbufÊï∞ÁªÑ‰∏≠Â∑≤‰ΩøÁî®Â≠óËäÇÁöÑÊï∞Èáè,Á≠â‰∫éSDS‰øùÂ≠òÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ int len; //ËÆ∞ÂΩïbufÊï∞ÁªÑ‰∏≠Êú™‰ΩøÁî®Â≠óËäÇÁöÑÊï∞Èáè int free; //Â≠óËäÇÊï∞ÁªÑ,Áî®‰∫é‰øùÂ≠òÂ≠óÁ¨¶‰∏≤ char buf[]; &#125; redisÁöÑÊï∞ÊçÆÂ≠òÂÇ®ËøáÁ®ã‰∏≠‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩÔºåÂÜÖÈÉ®ÂÅö‰∫ÜÂæàÂ§ö‰ºòÂåñ„ÄÇstring ÂÜÖÈÉ®ËøòË¢´ÊãÜÂàÜÊàê‰∏â‰∏≠ÁºñÁ†Å: intÁºñÁ†Å: Â≠òÂÇ®Â≠óÁ¨¶‰∏≤ÈïøÂ∫¶Â∞è‰∫é20‰∏îËÉΩÂ§üËΩ¨Âåñ‰∏∫Êï¥Êï∞ÁöÑÂ≠óÁ¨¶‰∏≤ embstrÁºñÁ†Å: ‰øùÂ≠òÈïøÂ∫¶Â∞è‰∫é44Â≠óËäÇÁöÑÂ≠óÁ¨¶‰∏≤(redis3.2ÁâàÊú¨‰πãÂâçÊòØ39Â≠óËäÇÔºå‰πãÂêéÊòØ44Â≠óËäÇ) rawÁºñÁ†Å: ‰øùÂ≠òÈïøÂ∫¶Â§ß‰∫é44Â≠óËäÇÁöÑÂ≠óÁ¨¶‰∏≤(redis3.2ÁâàÊú¨‰πãÂâçÊòØ39Â≠óËäÇÔºå‰πãÂêéÊòØ44Â≠óËäÇ) embstrÁºñÁ†ÅÁöÑÁªìÊûÑÂõæÔºö rawÁºñÁ†ÅÁöÑÁªìÊûÑ: ‰∏äÈù¢ÁªìÊûÑÂõæÂèØ‰ª•ÁúãÂá∫embstrÂíårawÈÉΩÊòØÁî±redisObjectÂíåsdsÁªÑÊàêÁöÑ„ÄÇ ‰ΩÜÊòØembstrÁöÑredisObjectÂíåsdsÊòØËøûÁª≠ÁöÑ,Âè™ÈúÄË¶Å‰ΩøÁî®mallocÂàÜÈÖç‰∏ÄÊ¨°ÂÜÖÂ≠ò; ËÄårawÈúÄË¶Å‰∏∫redisObjectÂíåsdsÂàÜÂà´ÂàÜÈÖçÂÜÖÂ≠òÔºåÂç≥ÈúÄË¶ÅÂàÜÈÖç‰∏§Ê¨°ÂÜÖÂ≠ò„ÄÇ Âõ†Ê≠§Êï∞ÊçÆÈáèÂ∞èÁöÑÊÉÖÂÜµ‰∏ãÔºåembstrÊòæÁÑ∂Êõ¥Âä†ÊïàÁéá„ÄÇ ‰ΩÜÊòØÂΩìÊï∞ÊçÆÈáèÂèòÂ§ß,free‰∏çË∂≥,embstrÂõ†‰∏∫ÊòØËøûÁª≠Â≠òÂÇ®Âú∞ÂùÄ,ÈúÄË¶ÅÂØπredisObjectÂíåsdsÈáçÊñ∞ÂàÜÈÖç, ËÄårawÂè™ÈúÄË¶ÅsdsÂàÜÂà´ÂàÜÈÖçÂÜÖÂ≠ò„ÄÇÂõ†Ê≠§redis‰ºöÂ∞ÜembstrËΩ¨ÂåñÊàêraw‰ªéËÄåÂÆûÁé∞Êâ©ÂÆπ„ÄÇ Redis‰ºöËá™Âä®ÂØπÁºñÁ†ÅËøõË°åËΩ¨Êç¢Êù•ÈÄÇÂ∫îÂíå‰ºòÂåñÊï∞ÊçÆÁöÑÂ≠òÂÇ®,ÂØπ int(Âä†ÂáèÈô§Â§ñ) embstr ÁöÑ‰øÆÊîπ(append,setrange‚Ä¶)Ôºå redis‰ºöÂÖàÂ∞ÜÂÖ∂ËΩ¨Êç¢ÊàêrawÔºåÁÑ∂ÂêéÊâçËøõË°å‰øÆÊîπ„ÄÇÊâÄ‰ª•embstrÂÆûÈôÖ‰∏äÊòØÂè™ËØªÊÄßË¥®ÁöÑ„ÄÇ Êâ©ÂÆπÁ≠ñÁï•Ôºö - string ÂÆπÈáè &lt; 1 M ,Êâ©Â§ß‰∏ÄÂÄç - string ÂÆπÈáè &gt; 1 M ,Êâ©Â§ß 1 M - string ÂÆπÈáè MAX : 512M ÂèÇËÄÉ https://redis.io/topics/internals-sds http://blog.itpub.net/69918724/viewspace-2647282/ https://database.51cto.com/art/201906/598234.htm https://www.lagou.com/lgeduarticle/16158.html https://www.jianshu.com/p/160fb0f73841]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê∑±ÂÖ•ÁêÜËß£pythonË£ÖÈ•∞Âô®]]></title>
    <url>%2F2020%2F01%2F16%2F1%2F</url>
    <content type="text"><![CDATA[Ë£ÖÈ•∞Âô®Âú®python‰∏≠Â∫îÁî®ÈùûÂ∏∏ÂπøÊ≥õÔºåËøôÁßçÊ®°ÂºèÂÖÅËÆ∏Âêë‰∏Ä‰∏™Áé∞ÊúâÁöÑÂØπË±°Ê∑ªÂä†Êñ∞ÁöÑÂäüËÉΩÔºåÂêåÊó∂Âèà‰∏çÊîπÂèòÂÖ∂ÁªìÊûÑ„ÄÇ ‰∏ÄÁõ¥‰ª•Êù•ÊàëÈÉΩË£ÖÈ•∞Âô®ÁöÑÁâπÊÄßÊòØÂèØ‰ª•Â∞ÜË¢´Ë£ÖÈ•∞ÁöÑÂáΩÊï∞ÊõøÊç¢ÊàêÂÖ∂‰ªñÂáΩÊï∞ÔºåÂÆûÁé∞ÂäüËÉΩÁöÑÊâ©ÂÖÖ„ÄÇ ‰ΩÜÊúÄËøëÈòÖËØª&lt;&lt;ÊµÅÁïÖÁöÑpython&gt;&gt;ÁöÑÊó∂ÂÄôÔºåÊâçÊÑèËØÜÂà∞ÂÖ∂Âè¶‰∏ÄÂ§ßÁâπÊÄßÊòØË£ÖÈ•∞Âô®Âú®Âä†ËΩΩÊ®°ÂùóÊòØ‰ºöÁ´ãÂç≥ÊâßË°å„ÄÇ ¬∂ÊºîÁ§∫ ÈÄöÂ∏∏ÔºåÊ®°ÂùóË¢´Âä†ËΩΩÊó∂ÔºåÊ®°ÂùóÂÜÖÁöÑË£ÖÈ•∞Âô®Â∞±‰ºöË¢´ÊâßË°åÔºåÂíåÁ±ªÂèòÈáèÁöÑË¢´ÊâßË°åÊñπÂºè‰∏ÄÊ†∑„ÄÇ Âá≠ÂÄüËøô‰∏™ÁâπÊÄßÔºå‰∏ãÈù¢ÁöÑÁªìÊûúÂ∞±ÊòæÂæóÂêàÁêÜÔºö 12345678910111213141516171819202122232425262728293031323334func_list = []def promotion(func): func_list.append(func) return func@promotiondef add(x, y): return x + y@promotiondef sub(x, y): return x - y@promotiondef mul(x, y): return x * y@promotiondef div(x, y): return x / ydef output(x, y): return &#123;func.__name__: func(x, y) for func in func_list&#125;if __name__ == '__main__': print(output(10, 2)) output: 1&#123;'add': 12, 'sub': 8, 'mul': 20, 'div': 5.0&#125; ¬∂Êâ©Â±ï Â¶ÇÊûúÊúâÂèÇ‰∏éËøáÂºÇÊ≠•Ê°ÜÊû∂‰∏ãÁöÑÂºÄÂèëÂ∑•‰ΩúÔºåËÇØÂÆö‰ºöÂá∫Áé∞Â∫ïÂ±ÇÊú™ÊîØÊåÅÊàñÊó†Áé∞ÊàêÂèØÁî®ÁöÑÂºÇÊ≠•packageÊó∂Ôºå Â∞±‰ºöÈÄöËøá run_in_executorËÆ©ÂΩìÂâçÈòªÂ°ûÊñπÂºèÂºÇÊ≠•ÊâßË°åÊù•ÈÅøÂÖçÂºÇÊ≠•Ê°ÜÊû∂Âõ†‰∏∫Â±ÄÈÉ®ÈòªÂ°ûÂØºËá¥Âπ∂Âèë‰∏•Èáç‰∏ãÈôç„ÄÇ ÊØè‰∏Ä‰∏™ÊñπÊ≥ïÈÉΩÁöÑÈáçÂ§çÊ≠§Êìç‰ΩúÔºåÊú™ÂÖçÂ§™ÁπÅÁêêÔºåË£ÖÈ•∞Âô®Â∞±ÂæàÂ•ΩÁöÑÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò 123456def coroutine_executor(func): @wraps(func) def wrapper(*args, **kwargs): return asyncio.get_event_loop().run_in_executor(ThreadPoolExecutor(), partial(func, *args, **kwargs)) return wrapper ÊÉ≥Ë¶ÅÂºÄÂßã‰ΩøÁî®ÂçèÁ®ãÁöÑÊó∂ÂÄôÂøÖÈ°ªÈÄöËøánext(‚Ä¶)ÊñπÂºèÊøÄÊ¥ªÂçèÁ®ãÔºåÂ¶ÇÊûú‰∏çÈ¢ÑÊøÄÔºåËøô‰∏™ÂçèÁ®ãÂ∞±Êó†Ê≥ï‰ΩøÁî®ÔºåËøôÁßçÈáçÂ§çÁπÅÁêêÁöÑ‰∫ãÊÉÖ‰∫§ÁªôË£ÖÈ•∞Âô®ÂÜçÂêàÈÄÇ‰∏çËøá‰∫Ü 1234567def coroutine(func): @wraps(func) def primer(*args,**kwargs): gen = func(*args,**kwargs) next(gen) return gen return primer ÂÄòËã•Êúâ‰∫õÊñπÊ≥ïÊâßË°åËÄóÊó∂Êú™Áü•Ôºå‰ΩÜÂèà‰∏çÊÉ≥ÊîπÂèòÂÖ∂ÂêåÊ≠•ÁöÑËøêË°åÊ®°ÂºèÔºåÁêÜËÆ∫‰∏äÂú®‰∏ÄÂÆöÊó∂Èó¥ËåÉÂõ¥ÂÜÖÂèØ‰ª•Êé•Âèó„ÄÇ ËøôÊó∂ÂÄôÔºåÂèØ‰ª•ÈÄöËøáThreadPoolExecutorÂíåË£ÖÈ•∞Âô®Êù•ÂÆûÁé∞Ëøô‰∏™ÂäüËÉΩ„ÄÇ 123456789def async_timeout(timeout=20): def decorate(func): @wraps(func) def wrapper(*args, **kwargs): return ThreadPoolExecutor().submit(partial(func, *args, **kwargs)).result(timeout=timeout) return wrapper return decorate ÊúÄËøëÂèëÁé∞‰∏Ä‰∏™ÂºÄÊ∫êÁöÑpackage timeout-decorator, ÊµèËßà‰∫Ü‰∏Ä‰∏ãÊ∫êÁ†ÅÔºåÂ∞±‰∏Ä‰∏™Êñá‰ª∂ÔºåÂÜôÁöÑÈùûÂ∏∏ËØ¶Â∞ΩÂèØ‰ª•ÊµèËßà‰ΩøÁî®„ÄÇ‰ΩÜÂπ¥‰ª£ÊÑüÊ≤âÈáçÔºå‰ΩÜËøòÊòØÊå∫ÊúâÂÄüÈâ¥‰ª∑ÂÄºÁöÑ„ÄÇ ‰ª•‰∏äÂ∞±ÊòØÂú®ÊàëÂºÄÂèëËøáÁ®ã‰∏≠ÈÄöËøáË£ÖÈ•∞Âô®Â∏¶Êù•ÁöÑ‰æøÂà©„ÄÇ]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>Ë£ÖÈ•∞Âô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[annual_summary]]></title>
    <url>%2F2020%2F01%2F15%2F1%2F</url>
    <content type="text"><![CDATA[2019Â∑≤ÊÇÑÁÑ∂Á¶ªÂéªÔºåÂõûÈ°æËøô‰∏ÄÊï¥Âπ¥ÔºåÊÄùËÄÉËâØÂ§ö„ÄÇ2019Âπ¥‰πüÊòØÊ≠£ÂºèÊ≠•ÂÖ•Á§æ‰ºöÁöÑ‰∏ÄÂπ¥ÔºåÂú®ÊäÄÊúØÈ¢ÜÂüüÔºåÂú®Âõ¢ÈòüÂçè‰ΩúÊñπÈù¢ÈÉΩÊúâÂæàÂ§öÊèêÂçáÔºåËØù‰∏çÂ§öËØ¥ÔºåÂàáÂÖ•Ê≠£È¢ò„ÄÇ 2018Âπ¥‰∏ãÂçäÂπ¥‰ª•Â∞èËêåÊñ∞ÁöÑÂßøÊÄÅ‰ªéÊ†°Âõ≠Ê≠•ÂÖ•Á§æ‰ºöÔºåÂõ†ÂÖ¨Âè∏ÊäÄÊúØÊ†àÈúÄÊ±ÇÔºå‰ªéJava ËΩ¨Âêë python,Âπ∂ÈÄêÊ∏êËø∑ÊÅãËøôÊ¨æÊñπ‰æøÂø´Êç∑ÔºåËØ≠‰πâÊ∏ÖÊô∞ÁöÑËØ≠Ë®Ä„ÄÇ Âú®2019Âπ¥ÔºåÈöèÁùÄpythonËØ≠Ë®ÄÁöÑÊ∑±ÂÖ•Ôºå‰πüÂºÄÂ±ï‰∫ÜÂæàÂ§öÁõ∏ÂÖ≥Â∑•‰Ωú„ÄÇËµ∑ÂàùÊé•Ëß¶‰∫ÜÂÖ¨Âè∏apiÂºÄÂèëÔºåÂØπdjangoÊúâ‰∫Ü‰∏ÄÂÆö‰∫ÜËß£„ÄÇ ÈöèÂêéËΩ¨Âêë‰∏öÂä°ÂºÄÂèëÔºåÂèóËø´‰∫éÂàùÂàõÂÖ¨Âè∏ËÆæËÆ°ÊñáÊ°£ÔºåÊ≥®Èáä‰∏•ÈáçÂåÆ‰πèÔºåÈÄªËæëÂ§çÊùÇ‰∏îÁºñÁ†ÅÈ£éÊ†ºÂ±ÇÂá∫‰∏çÁ©∑ÔºåÂêÉÂä≤Ëã¶Âè£Ôºå ‰πüÊ∑±ÂàªÊÑèËØÜÂà∞pythonËøôÁßçÂä®ÊÄÅÁöÑÂº∫Á±ªÂûãËß£ÈáäËØ≠Ë®ÄÂú®Âõ¢ÈòüÂºÄÂèë‰∏≠ÔºåÂú®Áº∫Â∞ëËØ≠Ë®ÄÊú¨ÁîüÂº∫Ê†°È™åÁöÑÂâçÊèê‰∏ãÔºå Êõ¥ÈúÄË¶ÅÂà∂ÂÆö‰∏Ä‰∫õÊé™ÊñΩÊù•ÈÅøÂÖçÁºñÂÜôËøôÁ±ªÂä®ÊÄÅËØ≠Ë®Ä‰ª£Á†ÅÈáçÊûÑÁÅ´Ëë¨Âú∫ÁöÑÁé∞Ë±°ÔºåÂõ†Ê≠§Âú®‰∏™‰∫∫Êó•Â∏∏ÁºñÁ†ÅËøáÁ®ã‰∏≠Â∞ΩÂèØËÉΩËØ¶Â∞ΩÁöÑÊèê‰æõÊèèËø∞‰ø°ÊÅØÔºå Âπ∂ÈÖçÂêà Type Hint ÂÅöÂà∞Â∞ΩÂèØËÉΩÂáèÂ∞ëÂõ¢ÈòüÂºÄÂèë‰∏≠‰∏çÂøÖË¶ÅÁöÑÂÖ∂‰ªñÂõ†Á¥†ÁöÑË¥üÊãÖ„ÄÇ ÂÖ¨Âè∏È°πÁõÆÂú®Ëøô‰∏ÄÂπ¥Èáå‰πüÁªèÂéÜ‰∫ÜÈÄêÊ≠•ÊºîÂåñÁöÑËøáÁ®ãÔºåÊàëÊúâÂπ∏ÂèÇ‰∏éÂÖ∂‰∏≠ÔºåÂπ∂‰∏ªÂØº‰∫ÜÈÉ®ÂàÜÊºîËøõÂ∑•‰ΩúÔºåÂèóÁõäÈ¢áÂ§ö„ÄÇ Ëµ∑ÂàùÂêéÁ´Ø‰∏öÂä°Áõ∏ÂÖ≥ÁöÑÈ°πÁõÆserver‰ΩøÁî® HTTPServer (pythonÂéüÁîüÊîØÊåÅÁöÑÊñπÂºè),Ëøá‰∫éÂ∫ïÂ±Ç‰∏îÂäüËÉΩÂçï‰∏ÄÔºåÁªùÂ§ßÂ§öÊï∞ÂäüËÉΩÈÉΩÈúÄË¶ÅËá™Â∑±ÈÄê‰∏ÄÂÆûÁé∞Ôºå Â¶ÇÈúÄË¶ÅÊª°Ë∂≥È´òÂπ∂ÂèëÁöÑÂú∫ÊôØËøòÈúÄË¶ÅÈÅµÂÆàWSGI APPLICATION ËßÑËåÉÊù•Êê≠ÈÖçÁé∞Âú®‰∏ªÊµÅÁöÑWSGI SERVERÔºåÁ≠âÁ≠â‰∏ÄÁ≥ªÂàóÂõ†Á¥†‰ΩøÂæóÁª¥Êä§ÊàêÊú¨Â¢ûÈ´òÔºå ‰∏îÂêÉÂäõ‰∏çËÆ®Â•Ω(pythonÁ§æÂå∫ ÊòéÊòéÂ∞±ÂØπ app Âíå sever ËøõË°åÊãÜÂàÜÔºåËÆ©Á®ãÂ∫èÂëò‰∏ìÊ≥®Ëß£ÂÜ≥Ëá™Â∑±ÁöÑ‰∏öÂä°ÈúÄÊ±Ç)ÔºåÊàë‰ª¨Âõ¢Èòü‰æøÁùÄÊâãÁ≠πÂàíÈ°πÁõÆÊºîËøõ„ÄÇ Áé∞Âú®‰∏ªÊµÅÁöÑweb server ‰∏ªË¶ÅÂàÜ‰∏∫‰∏§Â§ßÁ±ª:ÂêåÊ≠•Ê°ÜÊû∂ÂíåÂºÇÊ≠•Ê°ÜÊû∂„ÄÇÂΩìÊó∂‰∏ªË¶ÅËÄÉËôëÂõ†Á¥†Âú®‰∏çÂΩ±ÂìçÁé∞ÊúâÊû∂ÊûÑÁöÑÂâçÊèê‰∏ã‰øùËØÅËΩªÈáè‰∏îÈ´òÂπ∂Âèë„ÄÇ ÊòæÁÑ∂ÂºÇÊ≠•Ê°ÜÊû∂Êõ¥ËÉΩÊª°Ë∂≥È´òÂπ∂ÂèëÈúÄÊ±ÇÔºåÊúÄÁªàÈÄâÊã©aiohttp‰Ωú‰∏∫ÊúçÂä°Âô®Ê°ÜÊû∂„ÄÇÊé•Ëß¶Âà∞ÂºÇÊ≠•ÁºñÁ®ãÔºåÂØπËøô‰∏™ÈÇªÂüüÊúâ‰∫ÜÊõ¥Ê∑±ÁöÑÁêÜËß£„ÄÇ ‰ΩÜÂú®ÂΩìÂâçÁéØÂ¢É‰∏ãÔºåÂÖ∂ÂÆûÂºÇÊ≠•Ê°ÜÊû∂ÁîüÊÄÅËøòÂπ∂‰∏çÂèãÂ•ΩÔºåÂ∫ïÂ±ÇÊîØÊåÅ‰πü‰∏çÂ§™ÂÆåÂñÑÔºåËÄå‰∏îÂíå‰πãÂâçÂêåÊ≠•Ê®°ÂºèÂ∑ÆÂºÇËøáÂ§ß„ÄÇÂØºËá¥Âú®ËøÅÁßªËøáÁ®ãËøáÁ®ãÁπÅÁêê„ÄÇ ÈöèÂêéËÄÅÊùø‰æøÊåáÊ¥æÊàëË∞ÉÁ†îÂπ∂‰∏ªÂØºÊû∂ÊûÑÁöÑÊºîËøõÔºåÊàëÂèÇËÄÉÊ°ÜÊû∂ÂíåÁé∞ÊúâÈ°πÁõÆÁöÑÈÄÇÈÖçÁ®ãÂ∫¶ÂíåÊ°ÜÊû∂ÁîüÊÄÅÂÆåÂñÑÁ®ãÂ∫¶Ôºå ÁªìÂêà‰∏ªÊµÅÊû∂ÊûÑËÆæËÆ°ÊÄùË∑ØÔºåÊúÄÁªàÈÄâÊã©‰∫Ü flask + redis + gunicorn + nginx + docker ÁöÑÊû∂ÊûÑ„ÄÇ Ëøô‰∏™ËøáÁ®ãÊé•Ëß¶Âà∞‰∫ÜÂæàÂ§ö‰πãÂâçÂ∞öÊú™Êé•Ëß¶ÊàñÁï•Êúâ‰∫ÜËß£ÁöÑÁü•ËØÜÈ¢ÜÂüüÔºå‰πüÊÑèËØÜÂà∞‰∫ÜËá™Â∑±Áü•ËØÜÁöÑÊµÖÊòæÔºåÊ±ÇÁü•ÁöÑÈÅìË∑ØËøòÂæàÊº´Èïø„ÄÇ Âú®Ê≠§ÊúüÈó¥ÔºåËøò‰∏ªÂØºÊê≠Âª∫‰∫Ü‰∏Ä‰∏™ÂâçÁ´ØÈ°πÁõÆÔºåÈááÁî® vue + iview + nginx + docker ÁöÑÊû∂ÊûÑ„ÄÇÂæóÊÑè‰∫éÊû∂ÊûÑÁöÑÁ≤æËâØËÆæËÆ°ÂíåÂâçÁ´ØÁîüÊÄÅÁöÑ‰∏çÊñ≠ÂÆåÂñÑÔºå ËÆ©Êàë‰∏Ä‰∏™‰∏çÊÄé‰πà‰ºöÂÜôcss html ÁöÑÊñ∞Êâã‰πüËÉΩ‰ø°ÊâãÊçèÊù•„ÄÇ ÂΩìÁÑ∂ÔºåÂú®Âõ¢ÈòüÂçè‰Ωú‰∏ä‰πüÊúâ‰∫ÜÂæàÂ§ßÁöÑÊèêÂçáÔºåÂú®ËÆ®ËÆ∫ÈóÆÈ¢òÁöÑÊó∂ÂÄôÊúÄÂ•ΩÈ¢ÑÂÖàÊèê‰æõ‰∏ä‰∏ãÊñáÔºåÂÜçÊèêÂá∫ÈóÆÈ¢òÁöÑÊó∂ÂÄôÊúÄÂ•ΩÊúâÊ∑±Â∫¶ÁöÑÊÄùËÄÉÔºåÂú®Ëß£ÂÜ≥ÈóÆÈ¢òÁöÑÊó∂ÂÄô‰πüË¶ÅÊúâÊõ¥È´òÁöÑÊâ©Â±ïÊÄß„ÄÇ ÂØπ‰ªªÂä°Ë¶ÅÊúâ‰ºòÂÖàÁ∫ßÁöÑÂàíÂàÜÔºå‰∏çËá≥‰∫éÊâãË∂≥Êó†Êé™ÔºåÂØπÂ§ßÂûã‰ªªÂä°Ë¶ÅËÆæÂÆöÊéíÊúüÔºå‰øùËØÅÂ∑•Êúü‰∏çË¢´Âª∂ËØØ„ÄÇ ÊÄªÁöÑÊù•ËØ¥Ôºå2019ÊòØËΩ¨ÂèòÁöÑ‰∏ÄÂπ¥Ôºå‰ªéÂ∞èËêåÊñ∞ÂàùÂÖ•ËÅåÂú∫ÔºåÂà∞ËÄÅÊ≤πÊù°ËΩ¶Ëá£Ê≤ôÂú∫„ÄÇ‰ª•‰∏äÂ∞±ÊòØÊàëÂØπËá™Â∑±ÁöÑ‰∏Ä‰∏™ÊÄªÁªì„ÄÇ2020Ôºåfighting!!!]]></content>
      <categories>
        <category>summary</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[middleware]]></title>
    <url>%2F2019%2F06%2F13%2F1%2F</url>
    <content type="text"><![CDATA[middleware‰∏éDjangoÁöÑËØ∑Ê±Ç/ÂìçÂ∫îÁîüÂëΩÂë®ÊúüÊåÇÈí©Ôºåmiddleware‰∏≠ÂÆö‰πâÁöÑÈí©Â≠êÂáΩÊï∞ÂèØ‰ª•Áî®‰∫éÂÖ®Â±ÄÊîπÂèòDjangoÁöÑËæìÂÖ•ÊàñËæìÂá∫„ÄÇ Êú¨ÊñáÂ∞Ü‰ªé‰ª•‰∏ãÂá†ÁÇπ‰ªãÁªçDjangoÁöÑmiddlewareÔºö ‰ªÄ‰πàÊó∂ÂÄô‰ΩøÁî® middleware middlewareÊòØÊÄé‰πàËøê‰ΩúÁöÑ Ëá™ÂÆö‰πâ StackOverflowMiddleware ¬∂‰ªÄ‰πàÊó∂ÂÄô‰ΩøÁî® middleware ÂΩì‰Ω†ÈúÄË¶Å‰øÆÊîπËØ∑Ê±ÇÔºå‰æãÂ¶ÇË¢´‰º†ÈÄÅÂà∞view‰∏≠ÁöÑHttpRequestÂØπË±°„ÄÇ ÊàñËÄÖ‰øÆÊîπviewËøîÂõûÁöÑHttpResponseÂØπË±°Ôºå‰∫¶ÊàñËÄÖÂØπËøêË°å‰∏≠ÁöÑÂºÇÂ∏∏‰ΩúÈÄöÁî®Â§ÑÁêÜÔºå‰ΩøÁî®‰∏≠Èó¥‰ª∂ÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ Êú¨‰∫∫‰πãÂâçÂ≠¶‰π†javaWebÊó∂Êé•Ëß¶Âà∞filterÂèØ‰ª•Áî®Êù•ËØÜÂà´Áî®Êà∑ÊòØÂê¶ÁôªÂΩïÔºåDjango‰∏≠ÁöÑmiddlewareÂíåËøô‰∏™ÂäüËÉΩÈùûÂ∏∏Áõ∏‰ººÔºåÂèØ‰ª•Âú®ËØ∑Ê±ÇË∞ÉÁî®ËßÜÂõæÂâçÂÅöËØ∑Ê±ÇÂ§ÑÁêÜÔºå‰ªéËÄåÂÆûÁé∞Ê†°È™åÈÄªËæë„ÄÇ ¬∂ÂÖ®Â±ÄÊã¶Êà™ ÁªüËÆ°‰∏ÄÂàÜÈíüËÆøÈóÆÈ°µÈù¢Êï∞ÔºåÂØπ‰∫éËÆøÈóÆÊ¨°Êï∞ËøáÂ§öÁöÑ IP Â∞ÜÂÖ∂Âà∞ÈªëÂêçÂçï BLOCKED_IPSÔºåÂπ∂ÊãíÁªùËÆøÈóÆ 1234class BlockedIpMiddleware(object): def process_request(self, request): if request.META['REMOTE_ADDR'] in getattr(settings, "BLOCKED_IPS", []): return http.HttpResponseForbidden('&lt;h1&gt;Forbidden&lt;/h1&gt;') ¬∂ÈîôËØØÊòæÁ§∫ ÁΩëÁ´ôÊîæÂà∞ÊúçÂä°Âô®‰∏äÊ≠£ÂºèËøêË°åÂêéÔºåDEBUGÊîπ‰∏∫‰∫ÜFalseÔºåËøôÊ†∑Êõ¥ÂÆâÂÖ®Ôºå‰ΩÜÊòØÊúâÊó∂ÂÄôÂèëÁîüÈîôËØØÊàë‰ª¨‰∏çËÉΩÁúãÂà∞ÈîôËØØËØ¶ÊÉÖÔºåÂèØ‰ª•ËÆæÁΩÆÁÆ°ÁêÜÂëòÁúãÂà∞ÁöÑÊòØÈîôËØØËØ¶ÊÉÖÔºåËÄåÊ≠£Â∏∏Áî®Êà∑ÂàôÊòæÁ§∫ÂèãÂ•ΩÁöÑÊä•Èîô‰ø°ÊÅØ„ÄÇ 12345678import sysfrom django.views.debug import technical_500_responsefrom django.conf import settingsclass UserBasedExceptionMiddleware(object): def process_exception(self, request, exception): if request.user.is_superuser or request.META.get('REMOTE_ADDR') in settings.INTERNAL_IPS: return technical_500_response(request, *sys.exc_info()) ¬∂middlewareÊòØÊÄé‰πàËøê‰ΩúÁöÑ Êàë‰ª¨‰ªéÊµèËßàÂô®ÂèëÂá∫‰∏Ä‰∏™ËØ∑Ê±Ç RequestÔºåÂæóÂà∞‰∏Ä‰∏™ÂìçÂ∫îÂêéÁöÑÂÜÖÂÆπ HttpResponse ÔºåËøô‰∏™ËØ∑Ê±Ç‰º†ÈÄíÂà∞ DjangoÁöÑËøáÁ®ãÂ¶Ç‰∏ãÔºö Django Êèê‰æõ‰∫Ü‰∏Ä‰∏ã‰∫îÁßçÈí©Â≠êÂáΩÊï∞Ôºö 12345process_request(self,request)process_view(self, request, view_func, view_args, view_kwargs)process_template_response(self,request,response)process_exception(self, request, exception)process_response(self, request, response) ÊÉ≥Ë¶Å‰ΩøÁî®middlewareÔºåÈúÄË¶ÅÂú®setting‰∏≠ÁöÑMIDDLEWARE‰∏≠Ê≥®ÂÜå‰ªéËÄåËøõË°åÊøÄÊ¥ª„ÄÇmiddlewareÂèØ‰ª•Â≠òÂú®‰æùËµñÂÖ≥Á≥ªÔºåÊâÄ‰ª•Âú®Ê≥®ÂÜåÊó∂ÔºåÈúÄË¶ÅÁ°ÆÂÆö‰æùËµñÂÖ≥Á≥ªÔºå‰ªéËÄåÊéíÂàóÂêàÈÄÇÁöÑÈ°∫Â∫è„ÄÇ ‰∏äÈù¢ÁöÑÊñπÊ≥ïÔºåÂâç‰∏§‰∏™ÊñπÊ≥ïÊòØËØ∑Ê±ÇËøõÊù•Êó∂Ë¶ÅÁ©øË∂äÁöÑÔºåËÄåÂêé‰∏â‰∏™ÊñπÊ≥ïÊòØËØ∑Ê±ÇÂá∫ÂéªÊó∂Ë¶ÅÁ©øË∂äÁöÑÔºåÂú®MIDDLEWAREÊ≥®ÂÜåÁöÑmiddlewareÔºåËØ∑Ê±ÇÊòØÈ°∫Â∫èÊâßË°åÁöÑÔºåÂìçÂ∫îÊòØÈÄÜÂ∫èÊâßË°åÁöÑ„ÄÇ ¬∂ÊÄªÁªì ‰∏≠Èó¥‰ª∂ÁöÑÂÆö‰πâÔºöwsgi‰πãÂêé urls.py‰πãÂâç Âú®ÂÖ®Â±ÄÊìç‰ΩúDjangoËØ∑Ê±ÇÂíåÂìçÂ∫îÁöÑÊ®°Âùó ¬∂‰∏≠Èó¥‰ª∂ÁöÑ‰ΩøÁî® ¬∂process_request(self, request) ÊâßË°åÈ°∫Â∫èÔºöÊåâÁÖßÊ≥®ÂÜåÁöÑÈ°∫Â∫èÔºàÂú®settings.pyÈáåÈù¢ËÆæÁΩÆ‰∏≠ ‰ªé‰∏äÂà∞‰∏ãÁöÑÈ°∫Â∫èÔºâ ‰ΩïÊó∂ÊâßË°åÔºöËØ∑Ê±Ç‰ªéwsgiÊãøÂà∞‰πãÂêé ËøîÂõûÂÄºÔºö ËøîÂõûNoneÔºåÁªßÁª≠ÊâßË°åÂêéÁª≠ÁöÑ‰∏≠Èó¥‰ª∂ÁöÑprocess_requestÊñπÊ≥ï ËøîÂõûresponse , ‰∏çÊâßË°åÂêéÁª≠ÁöÑ‰∏≠Èó¥‰ª∂ÁöÑprocess_requestÊñπÊ≥ï ¬∂process_response(self, request, response) ÊâßË°åÈ°∫Â∫èÔºöÊåâÁÖßÊ≥®ÂÜåÈ°∫Â∫èÁöÑÂÄíÂ∫èÔºàÂú®settings.pyÈáåÈù¢ËÆæÁΩÆ‰∏≠ ‰ªé‰∏ãÂà∞‰∏äÁöÑÈ°∫Â∫èÔºâ ‰ΩïÊó∂ÊâßË°åÔºöËØ∑Ê±ÇÊúâÂìçÂ∫îÁöÑÊó∂ÂÄô ËøîÂõûÂÄºÔºöÂøÖÈ°ªËøîÂõû‰∏Ä‰∏™responseÂØπË±° ¬∂process_view(self, request, view_func, view_args, view_kwargs) ÊâßË°åÈ°∫Â∫èÔºöÊåâÁÖßÊ≥®ÂÜåÁöÑÈ°∫Â∫èÔºàÂú®settings.pyÈáåÈù¢ËÆæÁΩÆ‰∏≠ ‰ªé‰∏äÂà∞‰∏ãÁöÑÈ°∫Â∫èÔºâ ‰ΩïÊó∂ÊâßË°åÔºöÂú®urls.py‰∏≠ÊâæÂà∞ÂØπÂ∫îÂÖ≥Á≥ª‰πãÂêé Âú®ÊâßË°åÁúüÊ≠£ÁöÑËßÜÂõæÂáΩÊï∞‰πãÂâç ËøîÂõûÂÄºÔºö ËøîÂõûNoneÔºåÁªßÁª≠ÊâßË°åÂêéÁª≠ÁöÑ‰∏≠Èó¥‰ª∂ÁöÑprocess_viewÊñπÊ≥ï ËøîÂõûresponse, ¬∂process_exception(self, request, exception) ÊâßË°åÈ°∫Â∫èÔºöÊåâÁÖßÊ≥®ÂÜåÈ°∫Â∫èÁöÑÂÄíÂ∫èÔºàÂú®settings.pyÈáåÈù¢ËÆæÁΩÆ‰∏≠ ‰ªé‰∏ãÂà∞‰∏äÁöÑÈ°∫Â∫èÔºâ ‰ΩïÊó∂ÊâßË°åÔºöËßÜÂõæÂáΩÊï∞‰∏≠ÊäõÂá∫ÂºÇÂ∏∏ÁöÑÊó∂ÂÄôÊâçÊâßË°å ËøîÂõûÂÄºÔºö ËøîÂõûNone,ÁªßÁª≠ÊâßË°åÂêéÁª≠‰∏≠Èó¥‰ª∂ÁöÑprocess_exception ËøîÂõûresponseÔºå ¬∂process_template_response(self, request, response) ÊâßË°åÈ°∫Â∫èÔºöÊåâÁÖßÊ≥®ÂÜåÈ°∫Â∫èÁöÑÂÄíÂ∫èÔºàÂú®settings.pyÈáåÈù¢ËÆæÁΩÆ‰∏≠ ‰ªé‰∏ãÂà∞‰∏äÁöÑÈ°∫Â∫èÔºâ ‰ΩïÊó∂ÊâßË°åÔºöËßÜÂõæÂáΩÊï∞ÊâßË°åÂÆåÔºåÂú®ÊâßË°åËßÜÂõæÂáΩÊï∞ËøîÂõûÁöÑÂìçÂ∫îÂØπË±°ÁöÑrenderÊñπÊ≥ï‰πãÂâç ËøîÂõûÂÄºÔºö ËøîÂõûNone,ÁªßÁª≠ÊâßË°åÂêéÁª≠‰∏≠Èó¥‰ª∂ÁöÑprocess_exception ËøîÂõûresponseÔºå ¬∂DjangoË∞ÉÁî® Ê≥®ÂÜåÁöÑ‰∏≠Èó¥‰ª∂ÈáåÈù¢‰∫î‰∏™ÊñπÊ≥ïÁöÑÈ°∫Â∫è 12345671. process_requesturls.py2. process_viewview3. ÊúâÂºÇÂ∏∏Â∞±ÊâßË°å process_exception4. Â¶ÇÊûúËßÜÂõæÂáΩÊï∞ËøîÂõûÁöÑÂìçÂ∫îÂØπË±°ÊúârenderÊñπÊ≥ï,Â∞±ÊâßË°åprocess_template_response5. process_response ¬∂Ëá™ÂÆö‰πâ StackOverflowMiddleware Êú¨Â∞èËäÇÂ∞Ü‰ºöÂàõÂª∫‰∏Ä‰∏™ÂºÇÂ∏∏Â§ÑÁêÜÁöÑMiddlewareÔºåÂπ∂Êé•ÂÖ•StackOverflow APi Âú®Debug Ê®°Âºè‰∏ã ÁªàÁ´ØËøîÂõûÊúÄÈ´òÁ•®Êï∞ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ ÈúÄË¶Å‰ΩøÁî®requests ÂíåStackOverflow APIÂíåpython3.6ËøêË°åÁéØÂ¢É 12345678910111213141516171819202122232425262728293031323334# middleware.pyimport requestsfrom django.utils.deprecation import MiddlewareMixin__author__ = 'Darr_en1'class StackOverflowMiddleware(MiddlewareMixin): def process_exception(self, request, exception): intitle = f'&#123;exception.__class__.__name__&#125;: &#123;exception.args[0]&#125;' url = 'https://api.stackexchange.com/2.2/search' headers = &#123;'User-Agent': 'github.com/vitorfs/seot'&#125; params = &#123; 'order': 'desc', 'sort': 'votes', 'site': 'stackoverflow', 'pagesize': 3, 'tagged': 'python;django', 'intitle': intitle &#125; r = requests.get(url, params=params, headers=headers) questions = r.json() print('') for question in questions['items']: print(question['title']) print(question['link']) print('') Â∞æÈÉ®ËøΩÂä†Ôºå‰øùËØÅÂºÇÂ∏∏ÂèëÁîüÊó∂Á¨¨‰∏Ä‰∏™ÊâßË°å 1234# setting.pyif DEBUG: MIDDLEWARE += ['middleware.StackOverflowMiddleware', ] ÂèÇËÄÉÔºö http://www.xuyasong.com/?p=927 https://www.cnblogs.com/bainianminguo/p/9440610.html https://www.cnblogs.com/bainianminguo/p/9440610.html https://docs.djangoproject.com/en/2.2/topics/http/middleware]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sort]]></title>
    <url>%2F2019%2F05%2F08%2F1%2F</url>
    <content type="text"><![CDATA[ÊéíÂ∫èÂú®ÁºñÁ®ã‰∏≠ÈùûÂ∏∏Â∏∏ËßÅÔºåpythonÂÜÖÁΩÆsort()Âíåsorted()‰∏§‰∏≠ÊéíÂ∫èÊñπÂºè„ÄÇ ¬∂list.sort() sorted() Âå∫Âà´ 1234# python3 ÂèñÊ∂àcmpsorted(iterable, key=None, reverse=False) list.sort(self, key=None, reverse=False) sort()‰∏ésorted()ÁöÑ‰∏çÂêåÂú®‰∫éÔºåsortÊòØÂú®Âéü‰ΩçÈáçÊñ∞ÊéíÂàólistÔºå sort() ÂáΩÊï∞‰∏çÈúÄË¶ÅÂ§çÂà∂ÂéüÊúâÂàóË°®ÔºåÊ∂àËÄóÁöÑÂÜÖÂ≠òËæÉÂ∞ëÔºåÊïàÁéá‰πüËæÉÈ´ò„ÄÇ sorted()ÊòØ‰∫ßÁîü‰∏Ä‰∏™Êñ∞ÁöÑÂàóË°®ÔºåÂπ∂ÂèØ‰ª•Êé•Âèó‰ªª‰ΩïÂΩ¢ÂºèÁöÑÂèØËø≠‰ª£ÂØπË±°ÔºàÂåÖÊã¨‰∏çÂèØÂèòÂ∫èÂàóÂíåÁîüÊàêÂô®ÔºâÔºåÂπ∂ËøîÂõûlistÔºåÂõ†Ê≠§ÂèØ‰ª•Êª°Ë∂≥‰∏çÂêåÈúÄÊ±Ç„ÄÇ ¬∂‰ªãÁªç ÂèÇÊï∞Áî®Ê≥ïÂ§ß‰Ωì‰∏ÄËá¥ ¬∂sorted() iterableÔºöÊòØÂèØËø≠‰ª£Á±ªÂûã; keyÔºöÁî®ÂàóË°®ÂÖÉÁ¥†ÁöÑÊüê‰∏™Â±ûÊÄßÂíåÂáΩÊï∞ËøõË°å‰Ωú‰∏∫ÂÖ≥ÈîÆÂ≠óÔºåÊúâÈªòËÆ§ÂÄºÔºåËø≠‰ª£ÈõÜÂêà‰∏≠ÁöÑ‰∏ÄÈ°π; reverseÔºöÊéíÂ∫èËßÑÂàô. reverse = True ÊàñËÄÖ reverse = FalseÔºåÊúâÈªòËÆ§ÂÄºÔºõ returnÔºölist ¬∂list.sort() sort() ÊòØlistÁöÑÂÜÖÁΩÆÂáΩÊï∞ÈÄöËøálist.sort()Ë∞ÉÁî® keyÔºöÁî®ÂàóË°®ÂÖÉÁ¥†ÁöÑÊüê‰∏™Â±ûÊÄßÂíåÂáΩÊï∞ËøõË°å‰Ωú‰∏∫ÂÖ≥ÈîÆÂ≠óÔºåÊúâÈªòËÆ§ÂÄºÔºåËø≠‰ª£ÈõÜÂêà‰∏≠ÁöÑ‰∏ÄÈ°π; reverseÔºöÊéíÂ∫èËßÑÂàô. reverse = True ÊàñËÄÖ reverse = FalseÔºåÊúâÈªòËÆ§ÂÄº„ÄÇ returnÔºöNone ¬∂ÂØπstrÂéªÈáçÊéíÂ∫è 12345678910# sort()In [2]: str="cdsciolsdruikcadssv" ...: s = list(set(str)) ...: s.sort(reverse=False) ...: print("".join(s))acdiklorsuv# sorted()In [3]: print("".join(sorted(set(str),reverse=False)))acdiklorsuv ¬∂sort ‰πãÈ≠Ö ÁªôÂÆö‰∏Ä‰∏™Âè™ÂåÖÂê´Â§ßÂ∞èÂÜôÂ≠óÊØçÔºåÊï∞Â≠óÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂØπÂÖ∂ËøõË°åÊéíÂ∫èÔºå‰øùËØÅÔºö ÊâÄÊúâÁöÑÂ∞èÂÜôÂ≠óÊØçÂú®Â§ßÂÜôÂ≠óÊØçÂâçÈù¢ ÊâÄÊúâÁöÑÂ≠óÊØçÂú®Êï∞Â≠óÂâçÈù¢ ÊâÄÊúâÁöÑÂ•áÊï∞Âú®ÂÅ∂Êï∞ÂâçÈù¢ 123In [5]: s = "Sorting1234" ...: "".join(sorted(s, key=lambda x: (x.isdigit(), x.isdigit() and int(x) % 2 == 0, x.isupper(), x.islower(), x)))Out[5]: 'ginortS1324' ÂàÜÊûêÔºö key Áî®Êù•ÂÜ≥ÂÆöÂú®ÊéíÂ∫èÁÆóÊ≥ï‰∏≠ cmp ÊØîËæÉÁöÑÂÜÖÂÆπÔºåkey ÂèØ‰ª•ÊòØ‰ªª‰ΩïÂèØË¢´ÊØîËæÉÁöÑÂÜÖÂÆπÔºålambda ÂáΩÊï∞Â∞ÜËæìÂÖ•ÁöÑÂ≠óÁ¨¶ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™ÂÖÉÁªÑÔºåÁÑ∂Âêé sorted ÂáΩÊï∞Â∞ÜÊ†πÊçÆÂÖÉÁªÑÔºàËÄå‰∏çÊòØÂ≠óÁ¨¶ÔºâÊù•ËøõË°åÊØîËæÉÔºåËøõËÄåÂà§Êñ≠ÊØè‰∏™Â≠óÁ¨¶ÁöÑÂâçÂêéÈ°∫Â∫è„ÄÇ ÂÖÉÁªÑÂ§ßÂ∞èÊØîËæÉÔºöÂ∞ÜÁ¨¨‰∏ÄÂÖÉÁªÑÁöÑÁ¨¨‰∏ÄÈ°π‰∏éÁ¨¨‰∫åÂÖÉÁªÑÁöÑÁ¨¨‰∏ÄÈ°πËøõË°åÊØîËæÉ;Â¶ÇÊûúÂÆÉ‰ª¨‰∏çÁõ∏Á≠âÔºåËøôÊòØÊØîËæÉÁöÑÁªìÊûúÔºåÂê¶ÂàôÁ¨¨‰∫åÈ°πË¢´ËÄÉËôëÔºåÁÑ∂ÂêéÁ¨¨‰∏âÈ°πÔºåÁ≠âÁ≠â„ÄÇ ¬∂sortÂáΩÊï∞ÂÜÖÈÉ®ÂÆûÁé∞ÂéüÁêÜ sort ÂÜÖÈÉ®ÈÄöËøáTimsortÂÆûÁé∞ÔºåËØ¶ÊÉÖÊü•Áúãpython sortÂáΩÊï∞ÂÜÖÈÉ®ÂÆûÁé∞ÂéüÁêÜ]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Python ‰∏≠ÁöÑ‰∏ãÂàíÁ∫ø]]></title>
    <url>%2F2019%2F05%2F07%2F1%2F</url>
    <content type="text"><![CDATA[python ‰Ωú‰∏∫Âä®ÊÄÅËØ≠Ë®ÄÔºå‰∏çÂêå‰∫éjavaÈÄöËøáÂÖ≥ÈîÆÂ≠ó‰øÆÈ•∞ÂèòÈáè‰ΩúÁî®ÂüüÔºåPython‰∏≠ÔºåËß£ÈáäÂô®ÈÄöËøáËØªÂèñÂçï‰∏ãÂàíÁ∫øÂíåÂèå‰∏ãÂàíÁ∫øÊù•ÂÆûÁé∞‰∏çÂêåÁöÑÂê´‰πâ„ÄÇ python‰∏≠ÔºåÈÄöËøáÂÆö‰πâ‰ª•‰∏ã‰∫îÁßç‰∏ãÂàíÁ∫øÊ®°ÂºèÂíåÂëΩÂêçÁ∫¶ÂÆöÔºö ÂçïÂâçÂØº‰∏ãÂàíÁ∫øÔºö_var ÂçïÊú´Â∞æ‰∏ãÂàíÁ∫øÔºövar_ ÂèåÂâçÂØº‰∏ãÂàíÁ∫øÔºö__var ÂèåÂâçÂØºÂíåÊú´Â∞æ‰∏ãÂàíÁ∫øÔºö__ var__ Âçï‰∏ãÂàíÁ∫øÔºö_ ¬∂ÂçïÂâçÂØº‰∏ãÂàíÁ∫øÔºö_var python‰∏≠ÁöÑÂçïÂâçÂØº‰∏ãÂàíÁ∫øÂú®python‰∏≠Êúâ‰∏Ä‰∏™Á∫¶ÂÆö‰øóÊàêÁöÑÂê´‰πâÔºåÂΩìÂÆÉÂÆö‰πâ‰∏Ä‰∏™ÂèòÈáèÊàñÂàôÂáΩÊï∞ÂêçÊó∂ÔºåË°®ÊòéËØ•ÁöÑÂèòÈáèÊàñÂáΩÊï∞‰ªÖ‰æõÂÜÖÈÉ®‰ΩøÁî®„ÄÇ‰ΩÜËøô‰∏çÊòØÂº∫Âà∂ËßÑÂÆöÔºåÂ§ñÈÉ®‰æùÊóßÂèØ‰ª•ËÆøÈóÆ„ÄÇ 1234567# test1.py:def a(): return 23def _b(): return 42 Â§ñÈÉ®Ë∞ÉÁî®ÈÄöËøáÈÄöÈÖçÁ¨¶ÁöÑÊñπÂºèË∞ÉÁî®‰∏çÂà∞ÂçïÂâçÂØº‰∏ãÂàíÁ∫øÂÆö‰πâÁöÑÂèòÈáèÊàñÂáΩÊï∞ÔºåÂ∏∏ËßÑÂØºÂÖ•‰∏çÂèóÂâçÂØºÂçï‰∏™‰∏ãÂàíÁ∫øÂëΩÂêçÁ∫¶ÂÆöÁöÑÂΩ±Âìç 123456789&gt;&gt;&gt; from my_module import *&gt;&gt;&gt; a()23&gt;&gt;&gt; _b()NameError: "name '_b' is not defined"&gt;&gt;&gt; from my_module import _b&gt;&gt;&gt; _b()24 ¬∂ÂçïÊú´Â∞æ‰∏ãÂàíÁ∫ø var_ Âçï‰∏ãÂàíÁ∫øÁªìÂ∞æÁöÑÂèòÈáèÔºöÁî®‰∫éÈÅøÂÖç‰∫éPythonÂÖ≥ÈîÆÂ≠óÂÜ≤Á™ÅÁöÑÂèòÈáèÔºåÂ¶Çclass_Ôºö Tkinter.Toplevel(master, class_=‚ÄòClassName‚Äô) ¬∂ÂèåÂâçÂØº‰∏ãÂàíÁ∫ø __var Âèå‰∏ãÂàíÁ∫øÂºÄÂ§¥ÁöÑÂèòÈáèÔºöÂÆÉÂú®Ê®°Âùó‰∏≠ËøòÊòØÂΩì‰ΩúÂçï‰∏ãÂàíÁ∫øÁúãÂæÖÔºå‰ΩÜÂá∫Áé∞Âú®Á±ª‰∏≠‰Ωú‰∏∫Á±ªÂ±ûÊÄßÂ∞±‰∏ç‰∏ÄÊ†∑‰∫ÜÔºå‰∏çËÉΩÁõ¥Êé•ËÆøÈóÆ. 12345678In [3]: class A(object): ...: a = 40 ...: _a = 50 ...: __a = 60 # _Foo__boo ...: def __init__(self): ...: self.__b = 70 ...: def __test(self): ...: print("__test") ÂçïÂâçÂØº‰∏ãÂàíÁ∫øÊ†áËØÜÁöÑÁ±ªÂèòÈáè‰æùÊóßÂèØ‰ª•Ë¢´Ë∞ÉÁî®Ôºå‰ΩÜÂèåÂâçÂØº‰∏ãÂàíÁ∫øÊ†áËØÜÁöÑÂèòÈáèÊàñÂáΩÊï∞‰ºöË¢´Ëß£ÈáäÂô®ÈöêËóè 12345678910In [4]: A._aOut[4]: 50In [5]: A.__a---------------------------------------------------------------------------AttributeError Traceback (most recent call last)&lt;ipython-input-9-aca55768bfd2&gt; in &lt;module&gt;----&gt; 1 A.__aAttributeError: type object 'A' has no attribute '__a' ÈÄöËøá__dict__ÂèØ‰ª•Êü•ÁúãÂØπË±°Â±ûÊÄßÔºåÈÄöËøáA._A__aÂèØËÆøÈóÆ__a„ÄÇ 1234567891011121314In [6]: A.__dict__Out[6]: mappingproxy(&#123;'__module__': '__main__', 'a': 40, '_a': 50, '_A__a': 60, '__init__': &lt;function __main__.A.__init__(self)&gt;, '_A__test': &lt;function __main__.A.__test(self)&gt;, '__dict__': &lt;attribute '__dict__' of 'A' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'A' objects&gt;, '__doc__': None&#125;) In [7]: A._A__aOut[7]: 60 ÂÆû‰æãÂåñÂØπË±°‰πüÊòØÈÄöËøáÂä†ÂâçÂçï‰∏ãÂàíÁ∫øÁ±ªÂêçËÆøÈóÆÂèòÈáèÊàñÂáΩÊï∞ 12345In [8]: a_obj._A__bOut[8]: 70In [9]: a_obj._A__test()__test ¬∂ÂèåÂâçÂØºÂíåÂèåÊú´Â∞æ‰∏ãÂàíÁ∫ø __ var__ Python‰øùÁïô‰∫ÜÊúâÂèåÂâçÂØºÂíåÂèåÊú´Â∞æ‰∏ãÂàíÁ∫øÁöÑÂêçÁß∞ÔºåÁî®‰∫éÁâπÊÆäÁî®ÈÄî„ÄÇ __ init__ÂØπË±°ÊûÑÈÄ†ÂáΩÊï∞ __ call__ÂÆÉ‰ΩøÂæó‰∏Ä‰∏™ÂØπË±°ÂèØ‰ª•Ë¢´Ë∞ÉÁî® ¬∂Âçï‰∏ãÂàíÁ∫ø _ ÂΩìËµãÂÄºÁöÑÂèòÈáèÊó†ÂÖ≥Á¥ßË¶ÅÊó∂ÔºåÂèØ‰ª•ÈÄöËøá&quot;_&quot;Ë°®Á§∫ÂÖ∂‰∏∫‰∏Ä‰∏™‰∏¥Êó∂ÂÄº 1234567In [26]: color,_,_,_ = ('red', 'auto', 12, 3812.4)In [28]: for key,_ in &#123;"a":"A","b":"B"&#125;.items(): ...: print(key) ...: ab &quot;_&quot;ÊòØÂ§ßÂ§öÊï∞Python REPL‰∏≠ÁöÑ‰∏Ä‰∏™ÁâπÊÆäÂèòÈáèÔºåÂÆÉË°®Á§∫Áî±Ëß£ÈáäÂô®ËØÑ‰º∞ÁöÑÊúÄËøë‰∏Ä‰∏™Ë°®ËææÂºèÁöÑÁªìÊûú„ÄÇ 1234567895+6Out[2]: 11_Out[3]: 11list()Out[4]: []_.append(1)_Out[6]: [1] ¬∂ALL ÁúãDjangoÊ∫êÁ†ÅÁöÑÊó∂ÂÄô‰ºöÁúãÂà∞Âú®‰ª£Á†ÅÊúÄÂâçÈù¢‰ºöÊúâ‰∏Ä‰∏™__ all__ÔºåÂÖ∂ÂÆû__all__ÂØπË±°ÊòØË£ÖÊúâÂ≠óÁ¨¶‰∏≤ÁöÑÂàóË°®ÂØπË±°Ôºå‰ªñ‰ºöË¶ÜÁõñ from import * ÁöÑÈªòËÆ§Ë°å‰∏∫ÔºåÂèØ‰ª•Êää‰∏ãÂàíÁ∫øÂºÄÂ§¥ÁöÑÂèòÈáèÁöÑÂ≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÂä†ÂÖ•Âà∞__all__‰∏≠ÔºåËøôÊ†∑ import * ‰πüËÉΩÁúãÂà∞Ëøô‰∫õÂèòÈáè„ÄÇ ÂèÇËÄÉ https://dbader.org/blog/meaning-of-underscores-in-python https://zhuanlan.zhihu.com/p/36173202 https://foofish.net/python_xiahuaxian.html]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÁªÑÂêà‰∏§‰∏™Ë°®]]></title>
    <url>%2F2019%2F04%2F10%2F1%2F</url>
    <content type="text"><![CDATA[ÈÄöËøáËøûÊé•Êü•ËØ¢ÂèñÂæóÊï∞ÊçÆÂ∫ìÂ≠óÊÆµ PersonË°® ÂàóÂêç Á±ªÂûã PersonId int Ôºà‰∏ªÔºâ FirstName varchar LastName varchar AddressË°® ÂàóÂêç Á±ªÂûã AddressId intÔºà‰∏ªÔºâ PersonId int ÔºàÂ§ñÔºâ City varchar State varchar È¢òÁõÆ ÁºñÂÜô‰∏Ä‰∏™SQLÊü•ËØ¢ÔºåÊª°Ë∂≥Êù°‰ª∂ÔºöÊó†ËÆ∫personÊòØÂê¶ÊúâÂú∞ÂùÄ‰ø°ÊÅØÔºåÈÉΩÈúÄË¶ÅÂü∫‰∫é‰∏äËø∞‰∏§Ë°®Êèê‰æõ personÁöÑ‰ª•‰∏ã‰ø°ÊÅØÔºö FirstName, LastName, City, State Êú¨È¢òÁõÆËÄÉÂØüÁöÑÁü•ËØÜÁÇπÊúâ‰∏§ÁÇπÔºåÂÖ≥ËÅîÊü•ËØ¢Ôºåon whereÂå∫Âà´ Êï∞ÊçÆÂ∫ìÂú®ÈÄöËøáËøûÊé•‰∏§Âº†ÊàñÂ§öÂº†Ë°®Êù•ËøîÂõûËÆ∞ÂΩïÊó∂ÔºåÈÉΩ‰ºöÁîüÊàê‰∏ÄÂº†‰∏≠Èó¥ÁöÑ‰∏¥Êó∂Ë°®ÔºåÁÑ∂ÂêéÂÜçÂ∞ÜËøôÂº†‰∏¥Êó∂Ë°®ËøîÂõûÁªôÁî®Êà∑„ÄÇ Êú¨È¢ò‰∏≠Êó†ËÆ∫personÊòØÂê¶ÊúâÂú∞ÂùÄ‰ø°ÊÅØÔºåÈÉΩ‰ºöËøîÂõûperson‰ø°ÊÅØÔºåÊâÄ‰ª•ÈÄâÁî®Â∑¶Â§ñËøûÊé•Ôºàleft joinÔºâ„ÄÇ on ÂíåwhereÂå∫Âà´Ôºö 1.onÊù°‰ª∂ÊòØÂú®ÁîüÊàê‰∏¥Êó∂Ë°®Êó∂‰ΩøÁî®ÁöÑÊù°‰ª∂ÔºåÂÆÉ‰∏çÁÆ°on‰∏≠ÁöÑÊù°‰ª∂ÊòØÂê¶‰∏∫ÁúüÔºåÈÉΩ‰ºöËøîÂõûÂ∑¶ËæπË°®‰∏≠ÁöÑËÆ∞ÂΩï„ÄÇ 2.whereÊù°‰ª∂ÊòØÂú®‰∏¥Êó∂Ë°®ÁîüÊàêÂ•ΩÂêéÔºåÂÜçÂØπ‰∏¥Êó∂Ë°®ËøõË°åËøáÊª§ÁöÑÊù°‰ª∂„ÄÇËøôÊó∂Â∑≤ÁªèÊ≤°Êúâleft joinÁöÑÂê´‰πâÔºàÂøÖÈ°ªËøîÂõûÂ∑¶ËæπË°®ÁöÑËÆ∞ÂΩïÔºâ‰∫ÜÔºåÊù°‰ª∂‰∏ç‰∏∫ÁúüÁöÑÂ∞±ÂÖ®ÈÉ®ËøáÊª§Êéâ„ÄÇ 3.Âõ†‰∏∫inner joinÂèñÂπ∂ÈõÜÔºåÂõ†Ê≠§on where Ê≤°Âå∫Âà´ Á≠îÊ°à 123SELECT p.FirstName, p.LastName, a.City, a.State FROM Person p LEFT JOIN Address a ON p.PersonId = a.personId; on‰∏éwhereÂå∫Âà´]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>leetcode</tag>
        <tag>join</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[decorator]]></title>
    <url>%2F2019%2F03%2F12%2F1%2F</url>
    <content type="text"><![CDATA[python‰∏≠ÔºåÂáΩÊï∞ÂèØ‰ª•ÂÉèÂèòÈáè‰∏ÄÊ†∑ÂΩì‰ΩúÂèÇÊï∞‰º†ÈÄíÁªôÂè¶‰∏Ä‰∏™ÂáΩÊï∞Ôºå Ë£ÖÈ•∞Âô®ÂàôÊ≤øÁî®‰∫ÜËøô‰∏ÄÁâπÊÄßÔºåÂú®‰∏çÊîπÂèòÊó¢Êúâ‰ª£Á†ÅÁöÑÂâçÊèê‰∏ãÔºåÂ¢ûÂä†ÂäüËÉΩ„ÄÇ ¬∂ÊèèËø∞ Ë£ÖÈ•∞Âô®Êú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™ Python ÂáΩÊï∞ÊàñÁ±ªÔºåËøîÂõûÂÄº‰πüÊòØ‰∏Ä‰∏™ÂáΩÊï∞/Á±ªÂØπË±°„ÄÇ ÂéüÂàôÔºö ‰∏ç‰øÆÊîπË¢´‰øÆÈ•∞ÂáΩÊï∞ÁöÑÊ∫ê‰ª£Á†Å ‰∏ç‰øÆÊîπË¢´‰øÆÈ•∞ÂáΩÊï∞ÁöÑË∞ÉÁî®ÊñπÂºè Ë£ÖÈ•∞Âô® = È´òÈò∂ÂáΩÊï∞+ÂáΩÊï∞ÂµåÂ•ó+Èó≠ÂåÖ ¬∂È´òÈò∂ÂáΩÊï∞ ÂáΩÊï∞Êé•ÂèóÂèÇÊï∞‰∏∫ÂáΩÊï∞ÂêçÊàñÂáΩÊï∞ËøîÂõûÂÄºÊòØÂáΩÊï∞Âêç 1234def add(x, y, f): return f(x) + f(y) add(-5,6,abs) # ‰º†ÂÖ•‰∏§‰∏™ÂèòÈáèÂíå‰∏Ä‰∏™ÁªùÂØπÂÄºÂáΩÊï∞Âêç return 11 ¬∂ÂáΩÊï∞ÂµåÂ•ó ÂáΩÊï∞ÂÜÖÈÉ®ÂÆö‰πâÂáΩÊï∞ 1234567def outer(): def inner(): print("inner") print("outer") inner() outer() ¬∂Èó≠ÂåÖ Èó≠ÂåÖÔºåÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØ‰∏Ä‰∏™Â∞ÅÈó≠ÁöÑÂåÖË£πÔºåÈáåÈù¢ÂåÖË£πÁùÄËá™Áî±ÂèòÈáèÔºåÂ∞±ÂÉèÂú®Á±ªÈáåÈù¢ÂÆö‰πâÁöÑÂ±ûÊÄßÂÄº‰∏ÄÊ†∑ÔºåËá™Áî±ÂèòÈáèÁöÑÂèØËßÅËåÉÂõ¥ÈöèÂêåÂåÖË£πÔºåÂì™ÈáåÂèØ‰ª•ËÆøÈóÆÂà∞Ëøô‰∏™ÂåÖË£πÔºåÂì™ÈáåÂ∞±ÂèØ‰ª•ËÆøÈóÆÂà∞Ëøô‰∏™Ëá™Áî±ÂèòÈáè„ÄÇ ÈÄöÂ∏∏ÂáΩÊï∞Ë¢´Ë∞ÉÁî®ÂêéÔºåÂ±ÄÈÉ®ÂèòÈáèÂèòÂ§±Âéª‰ΩúÁî®ÂüüÔºåÈó≠ÂåÖÂèØ‰ª•ÈÅøÂÖç‰ΩøÁî®ÂÖ®Â±ÄÂèòÈáèÔºå‰ΩøÂæóÂèòÈáèËÑ±Á¶ª‰∫ÜÂáΩÊï∞Êú¨Ë∫´ÁöÑ‰ΩúÁî®ËåÉÂõ¥ÔºåÂ±ÄÈÉ®ÂèòÈáè‰æùÊóßÂèØ‰ª•Ë¢´ËÆøÈóÆÂæóÂà∞ 12345678910def adder(x): def wrapper(y): return x + y return wrapper adder5 = adder(5)# ËæìÂá∫ 15adder5(10)# ËæìÂá∫ 11adder5(6) ¬∂ÁÆÄÂçïË£ÖÈ•∞Âô® ÂáΩÊï∞ËøõÂÖ•ÂíåÈÄÄÂá∫Êó∂ ÔºåË¢´Áß∞‰∏∫‰∏Ä‰∏™Ê®™ÂàáÈù¢ÔºåËøôÁßçÁºñÁ®ãÊñπÂºèË¢´Áß∞‰∏∫Èù¢ÂêëÂàáÈù¢ÁöÑÁºñÁ®ã„ÄÇÂú®java SpringÊ°ÜÊû∂aopÂ∞±ÊòØÈù¢ÂêëÂàáÈù¢ÁºñÁ®ã 12345678910111213141516import timedef timmer(func): def wrapper(*args,**kwargs): start_time=time.time() res=func(*args,**kwargs) stop_time = time.time() print(f'ËøêË°åÊó∂Èïø&#123;stop_time-start_time&#125;') return res return wrapperdef IO_operation(): time.sleep(4)IO_operation = timmer(IO_operation) # Âõ†‰∏∫Ë£ÖÈ•∞Âô® timmer(IO_operation) ËøîÂõûÊòØÂáΩÊï∞ÂØπË±° wrapperÔºåËøôÊù°ËØ≠Âè•Áõ∏ÂΩì‰∫é IO_operation = wrapperIO_operation() ¬∂@ ËØ≠Ê≥ïÁ≥ñ ÁÆÄÂåñË∞ÉÁî® 12345@timmerdef IO_operation(): time.sleep(4)IO_operation() ¬∂Â∏¶ÂèÇÊï∞ÁöÑË£ÖÈ•∞Âô® Ë£ÖÈ•∞Âô®ÁöÑËØ≠Ê≥ïÂÖÅËÆ∏Êàë‰ª¨Âú®Ë∞ÉÁî®Êó∂ÔºåÊèê‰æõÂÖ∂ÂÆÉÂèÇÊï∞,ÂÆÉÂÆûÈôÖ‰∏äÊòØÂØπÂéüÊúâË£ÖÈ•∞Âô®ÁöÑ‰∏Ä‰∏™ÂáΩÊï∞Â∞ÅË£ÖÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™Ë£ÖÈ•∞Âô®. 1234567891011121314151617181920212223def timmer(level): def decorator(func): def wrapper(*args,**kwargs): start_time=time.time() res=func(*args,**kwargs) stop_time = time.time() if level=1: print(f'1:&#123;stop_time-start_time&#125;') if level=2: print(f'2:&#123;stop_time-start_time&#125;') return res return wrapper return decorator def IO_operation(): time.sleep(4) @timmer(1)def IO_operation(): time.sleep(4)IO_operation() ¬∂Á±ªË£ÖÈ•∞Âô® Á±ªË£ÖÈ•∞Âô®‰∏ªË¶Å‰æùÈù†Á±ªÁöÑ__call__ÊñπÊ≥ï,ÂΩì‰∏Ä‰∏™Á±ªÂ¶ÇÊûúÂÆûÁé∞‰∫Ü__call__ÊñπÊ≥ïÔºåÈÇ£‰πàËØ•Á±ªÁöÑÂÆû‰æãÂØπË±°ÁöÑË°å‰∏∫Â∞±ÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÊòØ‰∏Ä‰∏™ÂèØ‰ª•Ë¢´Ë∞ÉÁî®Ôºàcallable)ÁöÑÂØπË±°„ÄÇ 123456789class Add: def __init__(self, n): self.n = n def __call__(self, x): return self.n + x&gt;&gt;&gt; add = Add(1)&gt;&gt;&gt; add(4)&gt;&gt;&gt; 5 Á°ÆÂÆöÂØπË±°ÊòØÂê¶‰∏∫ÂèØË∞ÉÁî®ÂØπË±°ÈÄöËøáÂÜÖÁΩÆÂáΩÊï∞callableÊù•Âà§Êñ≠ 123456&gt;&gt;&gt; callable(foo)True&gt;&gt;&gt; callable(1)False&gt;&gt;&gt; callable(int)True ¬∂Á±ªË£ÖÈ•∞Âô®ÂÆûÁé∞ 123456789101112131415class Foo(object): def __init__(self, func): self._func = func def __call__(self): print ('class decorator runing') self._func() print ('class decorator ending')@Foodef bar(): print ('bar')bar() ¬∂functools.wraps‰øùÁïôÂáΩÊï∞ÂÖÉ‰ø°ÊÅØ ‰ΩøÁî®Ë£ÖÈ•∞Âô®ÊûÅÂ§ßÂú∞Â§çÁî®‰∫Ü‰ª£Á†ÅÔºå‰ΩÜÊòØ‰ªñÊúâ‰∏Ä‰∏™Áº∫ÁÇπÂ∞±ÊòØÂéüÂáΩÊï∞ÁöÑÂÖÉ‰ø°ÊÅØË¢´ÂÜÖÈÉ®ÂáΩÊï∞ÂæóÂÖÉ‰ø°ÊÅØÊõø‰ª£ÔºåpythonÂÜÖÈÉ®Êèê‰æõfunctools.wrapsË£ÖÈ•∞Âô®ÔºåÂÆÉËÉΩÊääÂéüÂáΩÊï∞ÁöÑÂÖÉ‰ø°ÊÅØÊã∑Ë¥ùÂà∞Ë£ÖÈ•∞Âô®ÈáåÈù¢ÁöÑ func ÂáΩÊï∞‰∏≠ÔºåËøô‰ΩøÂæóË£ÖÈ•∞Âô®ÈáåÈù¢ÁöÑ func ÂáΩÊï∞‰πüÊúâÂíåÂéüÂáΩÊï∞ foo ‰∏ÄÊ†∑ÁöÑÂÖÉ‰ø°ÊÅØ‰∫Ü„ÄÇ 12345678910111213from functools import wrapsdef logged(func): @wraps(func) def with_logging(*args, **kwargs): print func.__name__ # ËæìÂá∫ 'f' print func.__doc__ # ËæìÂá∫ 'does some math' return func(*args, **kwargs) return with_logging@loggeddef f(x): """does some math""" return x + x * x ¬∂Ë£ÖÈ•∞Âô®È°∫Â∫è ‰∏Ä‰∏™ÂáΩÊï∞ËøòÂèØ‰ª•ÂêåÊó∂ÂÆö‰πâÂ§ö‰∏™Ë£ÖÈ•∞Âô®ÔºåÊØîÂ¶ÇÔºö 1234567@a@b@cdef f (): pass &gt;&gt;&gt;f = a(b(c(f))) #ÊâßË°åÈ°∫Â∫èÊòØ‰ªéÈáåÂà∞Â§ñ ÂèÇËÄÉÔºö https://foofish.net/python-closure.html https://foofish.net/python-decorator.html https://foofish.net/function-is-first-class-object.html]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
        <tag>Ë£ÖÈ•∞Âô®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[uWSGI_nginx_Django]]></title>
    <url>%2F2019%2F03%2F11%2F1%2F</url>
    <content type="text"><![CDATA[ÈÄöËøáuWSGI+nginx+DjangoÊê≠Âª∫Áîü‰∫ßwebÊúçÂä° ¬∂Á≥ªÁªüÁéØÂ¢ÉÂèÇÊï∞ Êìç‰ΩúÁ≥ªÁªüÔºöUbuntu 18.04.1 LTS pythonÁâàÊú¨Ôºö3.6.7 DjangoÁâàÊú¨Ôºö2.1.7 nginxÁâàÊú¨Ôºönginx/1.14.0 (Ubuntu) ¬∂ÊúçÂä°Êê≠Âª∫ Êú¨Êñá‰ΩøÁî®ËôöÊãüÁéØÂ¢É‰øùËØÅÁéØÂ¢ÉÁ∫ØÂáÄ 12345virtualenv -p /usr/bin/python3 uwsgi-tutorialcd uwsgi-tutorialsource bin/activatepip install uwsgipip install django ÈÄÄÂá∫ÂΩìÂâçËôöÊãüÁéØÂ¢Édeactivate ¬∂uWSGI‰ªãÁªç ‰∏Ä‰∏™webÊúçÂä°Âô®Èù¢ÂØπÁöÑÊòØÂ§ñÈÉ®‰∏ñÁïå„ÄÇÂÆÉËÉΩÁõ¥Êé•‰ªéÊñá‰ª∂Á≥ªÁªüÊèê‰æõÊñá‰ª∂ (HTML, ÂõæÂÉèÔºå CSSÁ≠âÁ≠â)„ÄÇÁÑ∂ËÄåÔºåÂÆÉÊó†Ê≥ï Áõ¥Êé•‰∏éDjangoÂ∫îÁî®ÈÄö‰ø°ÔºõÂÆÉÈúÄË¶ÅÂÄüÂä©‰∏Ä‰∫õÂ∑•ÂÖ∑ÁöÑÂ∏ÆÂä©ÔºåËøô‰∫õ‰∏úË•ø‰ºöËøêË°åËøêÁî®ÔºåÊé•Êî∂Êù•Ëá™webÂÆ¢Êà∑Á´ØÔºà‰æãÂ¶ÇÊµèËßàÂô®ÔºâÁöÑËØ∑Ê±ÇÔºåÁÑ∂ÂêéËøîÂõûÂìçÂ∫î„ÄÇ ‰∏Ä‰∏™WebÊúçÂä°Âô®ÁΩëÂÖ≥Êé•Âè£ÔºàWeb Server Gateway InterfaceÔºâ - WSGI - Â∞±ÊòØÂπ≤ËøôÊ¥ªÁöÑ„ÄÇ WSGI ÊòØ‰∏ÄÁßçPythonÊ†áÂáÜ„ÄÇ uWSGIÊòØ‰∏ÄÁßçWSGIÂÆûÁé∞„ÄÇÂú®Ëøô‰∏™ÊïôÁ®ã‰∏≠ÔºåÊàë‰ª¨Â∞ÜËÆæÁΩÆuWSGIÔºåËÆ©ÂÆÉÂàõÂª∫‰∏Ä‰∏™Unix socketÔºåÂπ∂‰∏îÈÄöËøáWSGIÂçèËÆÆÊèê‰æõÂìçÂ∫îÂà∞webÊúçÂä°Âô®„ÄÇ ¬∂Âü∫Á°ÄÊµãËØï ÂΩìÂâçÁõÆÂΩï /home/darren ÂàõÂª∫test.py vim test.py 1234def application(env, start_response): start_response('200 OK', [('Content-Type','text/html')]) return [b"Hello World"] # python3 #return ["Hello World"] # python2 uwsgi --http :8000 --wsgi-file test.py http :8000: ‰ΩøÁî®httpÂçèËÆÆÔºåÁ´ØÂè£8000 wsgi-file test.py: Âä†ËΩΩÊåáÂÆöÁöÑÊñá‰ª∂Ôºåtest.py ÊµèËßàÂô®ËÆøÈóÆhttp://192.168.98.129:8000/ ÊòæÁ§∫Hello World ÁªÑ‰ª∂Ê†à 1the web client &lt;-&gt; uWSGI &lt;-&gt; Python ¬∂ËøêË°åDjango djangoÂü∫Á°ÄËøêË°åÊñπÂºè 1234567django-admin.py startproject mysitecd mysitevim mysite/setting.py# ËÆæÁΩÆÂÖÅËÆ∏ËÆøÈóÆALLOWED_HOSTS = [&apos;*&apos;]python manage.py runserver uwsgiËøêË°åDjango 12cd mysiteuwsgi --http :8000 --module mysite.wsgi ÁªÑ‰ª∂Ê†à 1the web client &lt;-&gt; uWSGI &lt;-&gt; Django ¬∂nginx ÊµèËßàÂô®‰∏ÄËà¨‰∏ç‰ºöÁõ¥Êé•ÂíåuWSGIÊâì‰∫§ÈÅìÔºåÂÆÉÈÄöËøáËøûÊé•webÊúçÂä°Âô®ÔºåÂà©Áî®uWSGIÂàõÂª∫Unix socketÔºåÂíåDjangoÂ∫îÁî®Âª∫Á´ãÂÖ≥Á≥ª„ÄÇ 1234567# installsudo apt-get install nginx# basic operationsudo /etc/init.d/nginx startsudo /etc/init.d/nginx stopsudo /etc/init.d/nginx restart ¬∂‰∏∫Á´ôÁÇπÈÖçÁΩÆnginx ÈúÄË¶Å uwsgi_paramsÊñá‰ª∂ 12345678910111213141516uwsgi_param QUERY_STRING $query_string;uwsgi_param REQUEST_METHOD $request_method;uwsgi_param CONTENT_TYPE $content_type;uwsgi_param CONTENT_LENGTH $content_length;uwsgi_param REQUEST_URI $request_uri;uwsgi_param PATH_INFO $document_uri;uwsgi_param DOCUMENT_ROOT $document_root;uwsgi_param SERVER_PROTOCOL $server_protocol;uwsgi_param REQUEST_SCHEME $scheme;uwsgi_param HTTPS $https if_not_empty;uwsgi_param REMOTE_ADDR $remote_addr;uwsgi_param REMOTE_PORT $remote_port;uwsgi_param SERVER_PORT $server_port;uwsgi_param SERVER_NAME $server_name; vim mysite_nginx.conf ÈÄöËøáÈÖçÁΩÆÂëäËØânginxÊèê‰æõÊù•Ëá™Êñá‰ª∂Á≥ªÁªüÁöÑÂ™í‰ΩìÂíåÈùôÊÄÅÊñá‰ª∂Ôºå‰ª•ÂèäÂ§ÑÁêÜÈÇ£‰∫õÈúÄË¶ÅDjangoÂπ≤È¢ÑÁöÑËØ∑Ê±Ç 123456789101112131415161718192021222324252627282930313233# mysite_nginx.conf# the upstream component nginx needs to connect toupstream django &#123; # server unix:///home/darren/mysite/mysite.sock; # for a file socket server 127.0.0.1:8001; # for a web port socket (we&apos;ll use this first)&#125;# configuration of the serverserver &#123; # the port your site will be served on listen 8000; # the domain name it will serve for server_name .example.com; # substitute your machine&apos;s IP address or FQDN charset utf-8; # max upload size client_max_body_size 75M; # adjust to taste # Django media location /media &#123; alias /home/darren/mysite/media; # your Django project&apos;s media files - amend as required &#125; location /static &#123; alias /home/darren/mysite/static; # your Django project&apos;s static files - amend as required &#125; # Finally, send all non-media requests to the Django server. location / &#123; uwsgi_pass django; include /home/darren/mysite/uwsgi_params; # the uwsgi_params file you installed &#125;&#125; ËÆæÁΩÆÈìæÊé•ËÆ©nginxÂèØ‰ª•ËØªÂèñ sudo ln -s /home/darren/mysite/mysite_nginx.conf /etc/nginx/sites-enabled/ ¬∂ÈÉ®ÁΩ≤ÈùôÊÄÅÊñá‰ª∂ 12vim mysite.setting.pySTATIC_ROOT = os.path.join(BASE_DIR, &quot;static/&quot;) ËøêË°å python manage.py collectstatic ÈáçÂêØnginx sudo /etc/init.d/nginx restart ¬∂uwsgi + nginx +Django ÂÆ¢Êà∑Á´Ø‰ªéÂèëÈÄÅ‰∏Ä‰∏™ HTTP ËØ∑Ê±ÇÂà∞ Django Â§ÑÁêÜËØ∑Ê±ÇÔºåÂàÜÂà´ÁªèËøá‰∫Ü webÊúçÂä°Âô®Â±ÇÔºåWSGIÂ±ÇÔºåwebÊ°ÜÊû∂Â±Ç. WebÊúçÂä°Âô®Â±Ç ÂØπ‰∫é‰º†ÁªüÁöÑÂÆ¢Êà∑Á´ØÊúçÂä°Âô®Êû∂ÊûÑÔºåÂÖ∂ËØ∑Ê±ÇÁöÑÂ§ÑÁêÜËøáÁ®ãÊòØÔºåÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®ÂèëÈÄÅËØ∑Ê±ÇÔºåÊúçÂä°Âô®Êé•Êî∂ËØ∑Ê±ÇÂπ∂Â§ÑÁêÜËØ∑Ê±ÇÔºåÁÑ∂ÂêéÁªôÂÆ¢Êà∑Á´ØËøîÂõûÂìçÂ∫î„ÄÇ WSGIÂ±Ç ÂÆö‰πâ‰∫Ü webÊúçÂä°Âô®Âíå webÂ∫îÁî®‰πãÈó¥ÁöÑÊé•Âè£ËßÑËåÉ„ÄÇuWSGI‰Ωú‰∏∫‰∏≠Èó¥Â±ÇÂ≠òÂú® WebÊ°ÜÊû∂Â±Ç Â§ÑÁêÜÂÆûÁé∞‰∏öÂä°ÁöÑÈÄªËæë ¬∂TCPÁ´ØÂè£socket ‰ΩøÁî®uwsgiÂçèËÆÆÔºåÁ´ØÂè£‰∏∫8001,nginxÈÖçÁΩÆ‰∏≠Êö¥Èú≤8000Á´ØÂè£‰∏éuWSGIÈÄö‰ø° uwsgi --socket :8001 --module mysite.wsgi ¬∂‰ΩøÁî®Unix socket ÁºñËæë mysite_nginx.conf: 12server unix:///home/darren/mysite/mysite.sock; # for a file socket# server 127.0.0.1:8001; # for a web port socket (we&apos;ll use this first) ËøêË°å uwsgi --socket mysite.sock --module mysite.wsgi ÂèØËÉΩ‰ºöÂá∫Áé∞ÂêØÂä®Â§±Ë¥•ÔºåÂèØ‰ª• tail -f /var/log/nginx/error.logÂä®ÊÄÅÊü•ÁúãÈîôËØØ‰ø°ÊÅØ„ÄÇ Êú¨‰∫∫Âú®Êìç‰ΩúÁöÑÊó∂ÂÄôÂá∫Áé∞ÁöÑÈîôËØØ 12019/03/11 07:18:51 [crit] 51025#51025: *55 connect() to unix:///home/darren/mysite/mysite.sock failed (13: Permission denied) while connecting to upstream, client: 192.168.98.1, server: example.com, request: "GET / HTTP/1.1", upstream: "uwsgi://unix:///home/darren/mysite/mysite.sock:", host: "192.168.98.129:8000" Êõ¥ÊîπÂ•óÊé•Â≠óÊñá‰ª∂ÁöÑÊùÉÈôêÔºå‰ª•‰æøwww-dataÂèØ‰ª•ÂÜôÂÖ•ÂÆÉ„ÄÇ uwsgi --socket mysite.sock --module mysite.wsgi --chmod-socket=666 ÁªÑ‰ª∂Ê†à the web client &lt;-&gt; the web server &lt;-&gt; the socket &lt;-&gt; uWSGI &lt;-&gt; Django ¬∂ÈÖçÁΩÆuWSGI‰ª•ÂÖÅËÆ∏.iniÊñá‰ª∂ ÂëΩ‰ª§Ë°åÂêØÂä®ÂèÇÊï∞ËøáÂ§öÂèØ‰ª•ÈÄöËøáÂêØÂä®ÈÖçÁΩÆÊñá‰ª∂ÁöÑÊñπÂºè ÂàõÂª∫vim mysite_uwsgi.ini 123456789101112131415161718192021# mysite_uwsgi.ini file[uwsgi]# Django-related settings# the base directory (full path)chdir = /home/darren/mysite# Django's wsgi filemodule = mysite.wsgi# the virtualenv (full path)home = /home/darren/uwsgi-tutorial# process-related settings# mastermaster = true# maximum number of worker processesprocesses = 2# the socket (use the full path to be safesocket = /home/darren/mysite/mysite.sock# ... with appropriate permissions - may be neededchmod-socket = 666# clear environment on exitvacuum = true ËøêË°åÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®ÊúçÂä° uwsgi --ini mysite_uwsgi.ini Êú¨‰∫∫Âú®Êìç‰ΩúÊó∂Âá∫Áé∞ÈîôËØØÔºåÂ¶Ç‰∏ãÔºö 1no request plugin is loaded, you will not be able to manage requests. you may need to install the package for your language of choice, or simply load it with --plugin. Âú®stackoverflowÊâæÂà∞Ëß£ÂÜ≥ÊñπÊ°à: 1apt-get install uwsgi-plugin-python3 Âú®mysite_uwsgi.iniÊ∑ªÂä† 1plugins = python3 ¬∂Êé¢ËÆ® ¬∂Django Ëá™Â∑±Â∞±ÂèØ‰ª•Êê≠Âª∫webÊúçÂä°,‰∏∫‰ªÄ‰πàÁî®uWsgi? DjangoËá™Â∏¶wsgiÊúçÂä°Âô®Ôºå‰ΩÜÊòØÊÄßËÉΩ‰∏çÂ•ΩÔºåÂçïËøõÁ®ã„ÄÇuWSGIÊîØÊåÅÁöÑÂπ∂ÂèëÈáèÊõ¥È´ò Êñπ‰æøÁÆ°ÁêÜÂ§öËøõÁ®ãÔºåÂèëÊå•Â§öÊ†∏ÁöÑ‰ºòÂäøÊèêÂçáÊÄßËÉΩ„ÄÇ ¬∂uWSGIÂèØ‰ª•‰Ωú‰∏∫Django webÊúçÂä°Á´ØÔºå‰∏∫‰ªÄ‰πàËøòÈúÄË¶ÅÁî®Âà∞nginx? uWSGIÔºåÊòØ‰∏Ä‰∏™Á®ãÂ∫èÔºåÂÖÖÂΩìWebÊúçÂä°Âô®Êàñ‰∏≠Èó¥‰ª∂„ÄÇÂ¶ÇÊûúÊû∂ÊûÑÊòØNginx+uWSGI+APPÔºåuWSGIÊòØ‰∏Ä‰∏™‰∏≠Èó¥‰ª∂.Â¶ÇÊûúÊû∂ÊûÑÊòØuWSGI+APPÔºåuWSGIÊòØ‰∏Ä‰∏™ÊúçÂä°Âô®„ÄÇ nginxÊîπËøõ‰∫ÜÈùôÊÄÅËµÑÊ∫êÁöÑÂ§ÑÁêÜÔºåÂèØ‰ª•ÊòæÁùÄÂáèÂ∞ëÊúçÂä°Âô®ÂíåÁΩëÁªúË¥üËΩΩ nginx‰πüÂèØ‰ª•ÁºìÂ≠ò‰∏Ä‰∫õÂä®ÊÄÅÂÜÖÂÆπ nginx ‰Ωú‰∏∫‰∏ì‰∏öÊúçÂä°Âô®ÔºåÊö¥Èú≤Âú®ÂÖ¨ÁΩëÁõ∏ÂØπÊØîËæÉÂÆâÂÖ® nginxÂèØ‰ª•ËøõË°åÂ§öÂè∞Êú∫Âô®ÁöÑË¥üËΩΩÂùáË°° nginxÂèØ‰ª•Êõ¥Â•ΩÂú∞ÈÖçÂêàCDN ÂèÇËÄÉÔºö uwsgi Nginx+uWSGI+DjangoÂéüÁêÜ stackExchage Â¶Ç‰ΩïÁêÜËß£Nginx, WSGI, Flask‰πãÈó¥ÁöÑÂÖ≥Á≥ª]]></content>
      <categories>
        <category>django</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>django</tag>
        <tag>uWSGI</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dockerÂü∫Á°Ä]]></title>
    <url>%2F2019%2F03%2F05%2Fdocker-basis%2F</url>
    <content type="text"><![CDATA[dockerÁöÑÂá∫Áé∞‰∏∫ÁéØÂ¢ÉÈÖçÁΩÆÔºåÈ°πÁõÆÈÉ®ÁΩ≤Êèê‰æõ‰∫ÜÁ©∫Ââç‰æøÊç∑„ÄÇÁõ∏ËæÉ‰∫éËôöÊãüÊú∫ÁöÑËáÉËÇøÔºåËøêË°åÁºìÊÖ¢ÔºådockerÊó¢ËΩªÈáèÊúâÂø´Êç∑ÔºåÊàêÊú¨ÂºÄÈîÄÈÉΩÊõ¥Â∞è ¬∂docker install ‰∏ãËΩΩÈÄÇÈÖçÂΩìÂâçliunxÁâàÊú¨ÁöÑdocker sudo wget -q0- https://get.docker.com | sh dockerÈúÄË¶Å‰ΩøÁî®rootÁî®Êà∑ËøêË°åÔºåÂèØ‰ª•ÈÄöËøáÂ∞ÜÁî®Êà∑Ê∑ªÂä†Âà∞&quot;docker&quot; group,Ê≥®ÈîÄÂπ∂ÈáçÊñ∞ÁôªÂΩï‰ΩøÂÖ∂ÁîüÊïà sudo usermod -aG docker [USER] ¬∂ÂëΩ‰ª§ ¬∂image Êìç‰ΩúÂëΩ‰ª§ Êü•Êâæimage(ÊîØÊåÅÈÄöÈÖçÁ¨¶) docker search [IMAGE] Ëé∑Âèñ image docker pull [IMAGE] Êü•Áúã image(ÊîØÊåÅÈÄöÈÖçÁ¨¶) docker images Âà†Èô§ image docker rmi [IMAGE] Êü•Áúãimage ÂéÜÂè≤ÔºàÂàõÂª∫ËøáÁ®ãÔºâ docker history ubuntu:latest Êü•ÁúãËØ¶ÁªÜ‰ø°ÊÅØ docker inspect ubuntu:latest Ê∑ªÂä†ÈïúÂÉèÊ†áÁ≠æÔºàÊåáÂêëÂêå‰∏Ä‰∏™ÈïúÂÉèÊñá‰ª∂ÔºåÂè™ÊòØÂà´Âêç‰∏çÂêåÔºâ docker tag ubuntu:latest myubuntu:latest ÂàõÂª∫ image docker build [IMAGE] ¬∂container Êìç‰ΩúÂëΩ‰ª§ ÂêØÂä®ÂÆπÂô®(ÈÄöËøáÊú¨Âú∞ÈïúÂÉèÂàõÂª∫ÂÆπÂô®Âπ∂ÂêØÂä®ÔºåÊú¨Âú∞Ê≤°ÊúâËøúÁ´ØÊãâÂèñ) docker run [IMAGE] ÁªàÁ´ØÂêØÂä®ÂÆπÂô® docker run -it -p 80:80 [IMAGE] \bin\bash ÂÆàÊä§ËøõÁ®ãÂêØÂä®ÂÆπÂô® docker run --name webserver -d -p 80:80 [IMAGE] -d ÂÆàÊä§ËøõÁ®ãÂêéÂè∞ÂêØÂä® ‚Äìname ÂÆπÂô®Âêç -p Á´ØÂè£Êò†Â∞Ñ ÂÆπÂô®ÂÖ≥Èó≠Êó∂Ê∏ÖÁêÜÂÆπÂô®ÁöÑÂåøÂêçdata volumes docker run --rm -it [IMAGE] ÈÄöËøá‰∫§‰∫íÁªàÁ´ØÊâìÂºÄÂÆπÂô®Ôºà‰∏ÄËà¨Áî®‰∫éÊâìÂºÄÂÆàÊä§ËøõÁ®ãÂú®ÂêéÁ´ØÂêØÂä®ÁöÑÂÆπÂô®Ôºâ docker exec -it webserver bash Êü•ÁúãÂÆπÂô®‰øÆÊîπÔºà‰ºöÊúâÂ§ßÈáèÊó†ÂÖ≥ÂÜÖÂÆπÔºâ docker diff webserver Ê∏ÖÁêÜÊâÄÊúâÂ§Ñ‰∫éÁªàÊ≠¢Áä∂ÊÄÅÁöÑÂÆπÂô® docker container prune Êü•ÁúãÂΩìÂâçËøêË°åÁöÑ container(options -a ÊâÄÊúâÂÆπ) docker ps ÂÖ≥Èó≠ÂÆπÂô®(start ÂêØÂä® restart ÈáçÂêØ) docker stop [IMAGE] Âà†Èô§ÂÆπÂô®(ÈúÄË¶ÅÂÖ≥Èó≠) docker rm [IMAGE] ¬∂ÂÖ≥‰∫éÈïúÂÉèÂà†Èô§ Âà†Èô§Ë°å‰∏∫ÂàÜ‰∏∫‰∏§Á±ªÔºå‰∏ÄÁ±ªÊòØ UntaggedÔºåÂè¶‰∏ÄÁ±ªÊòØ Deleted„ÄÇÂΩì‰∏Ä‰∏™ÈïúÂÉèÊúâÂ§ö‰∏™Ê†áÁ≠æÊó∂,Âà†Èô§Âè™ÊòØÂà†Èô§ËØ•ÈïúÂÉèÁöÑÁöÑÊüê‰∏Ä‰∏™Ê†áÁ≠æ(Untagged),ÂΩìÂè™Êúâ‰∏Ä‰∏™Ê†áÁ≠æÂ∞±‰ºöÂΩªÂ∫ïÂà†Èô§(Deleted)„ÄÇ ÂΩìÊúâËØ•ÈïúÂÉèÂàõÂª∫ÁöÑÂÆπÂô®Â≠òÂú®Êó∂ÔºåÈïúÂÉèÊó†Ê≥ïÂà†Èô§ÔºåÈúÄË¶ÅÂà†Èô§ÂÆπÂô®Ôºådocker rmi -f [IMAGE] Âº∫Âà∂Âà†Èô§ÈïúÂÉè Ôºà‰∏çÊé®ËçêÔºâ ¬∂ÂÖ≥‰∫é‚ÄìrmÊìç‰Ωú Âú®DockerÂÆπÂô®ÈÄÄÂá∫Êó∂ÔºåÈªòËÆ§ÂÆπÂô®ÂÜÖÈÉ®ÁöÑÊñá‰ª∂Á≥ªÁªü‰ªçÁÑ∂Ë¢´‰øùÁïôÔºå‰ª•Êñπ‰æøË∞ÉËØïÂπ∂‰øùÁïôÁî®Êà∑Êï∞ÊçÆ„ÄÇ ‰ΩÜÊòØÔºåÂØπ‰∫éforegroundÂÆπÂô®ÔºåÁî±‰∫éÂÖ∂Âè™ÊòØÂú®ÂºÄÂèëË∞ÉËØïËøáÁ®ã‰∏≠Áü≠ÊúüËøêË°åÔºåÂÖ∂Áî®Êà∑Êï∞ÊçÆÂπ∂Êó†‰øùÁïôÁöÑÂøÖË¶ÅÔºåÂõ†ËÄåÂèØ‰ª•Âú®ÂÆπÂô®ÂêØÂä®Êó∂ËÆæÁΩÆ‚ÄìrmÈÄâÈ°πÔºåËøôÊ†∑Âú®ÂÆπÂô®ÈÄÄÂá∫Êó∂Â∞±ËÉΩÂ§üËá™Âä®Ê∏ÖÁêÜÂÆπÂô®ÂÜÖÈÉ®ÁöÑÊñá‰ª∂Á≥ªÁªü„ÄÇÁ§∫‰æãÂ¶Ç‰∏ãÔºö docker run --rm [IMAGE] ÊòæÁÑ∂Ôºå‚ÄìrmÈÄâÈ°π‰∏çËÉΩ‰∏é-dÂêåÊó∂‰ΩøÁî®ÔºåÂç≥Âè™ËÉΩËá™Âä®Ê∏ÖÁêÜforegroundÂÆπÂô®Ôºå‰∏çËÉΩËá™Âä®Ê∏ÖÁêÜdetachedÂÆπÂô® Ê≥®ÊÑèÔºå‚ÄìrmÈÄâÈ°π‰πü‰ºöÊ∏ÖÁêÜÂÆπÂô®ÁöÑÂåøÂêçdata volumesÔºåÂÆπÂô®‰πü‰ºö‰∏ÄÂπ∂Âà†Èô§„ÄÇ ¬∂ÂàõÂª∫ÈïúÂÉè ‰ªéÂ∑≤ÁªèÂàõÂª∫ÁöÑÂÆπÂô®‰∏≠Êõ¥Êñ∞ÈïúÂÉèÔºåcommitÊèê‰∫§Ëøô‰∏™ÈïúÂÉè Âü∫‰∫éÊú¨Âú∞Ê®°ÊùøÂØºÂÖ• ‰ΩøÁî® DockerfileÊåá‰ª§Êù•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÈïúÂÉè ¬∂Âü∫‰∫éÂ∑≤ÊúâÂÆπÂô®ÂàõÂª∫ docker commit [ÈÄâÈ°π] &lt;ÂÆπÂô®IDÊàñÂÆπÂô®Âêç&gt; [&lt;‰ªìÂ∫ìÂêç&gt;[:&lt;Ê†áÁ≠æ&gt;]] docker commit --author 'darren' --message '‰øÆÊîπÈ¶ñÈ°µ' dad9a2486a8b nginx:darr ÈªëÁõíÊìç‰ΩúÔºåËôΩÁÑ∂ÂèØ‰ª•diffÂëΩ‰ª§Êü•ÁúãÔºå‰ΩÜÁª¥Êä§È∫ªÁÉ¶Ôºå‰ºö‰ΩøÂæóÈïúÂÉèËáÉËÇø„ÄÇ ¬∂ÂØºÂÖ•ÂàõÂª∫ ÈïúÂÉèÂØºÂá∫ docker save [IMAGE ID] &gt; save.tar ÈïúÂÉèÁöÑÂØºÂÖ• docker load &lt; save.tar ÂÆπÂô®ÂØºÂá∫(ÂØºÂá∫ÂÆπÂô®ÁöÑÂø´ÁÖß) docker export [IMAGE ID] &gt; export.tar ÂÆπÂô®ÂØºÂÖ• cat export.tar | docker import - [IMAGE NAME:TAG] ÈïúÂÉèÂØºÂÖ•ÂíåÂÆπÂô®ÂØºÂÖ•ÁöÑÂå∫Âà´Ôºö ÂÆπÂô®ÂØºÂÖ• ÊòØÂ∞ÜÂΩìÂâçÂÆπÂô® ÂèòÊàê‰∏Ä‰∏™Êñ∞ÁöÑÈïúÂÉè,ÂÆπÂô®Âø´ÁÖßÊñá‰ª∂Â∞Ü‰∏¢ÂºÉÊâÄÊúâÁöÑÂéÜÂè≤ËÆ∞ÂΩïÂíåÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºàÂç≥‰ªÖ‰øùÂ≠òÂÆπÂô®ÂΩìÊó∂ÁöÑÂø´ÁÖßÁä∂ÊÄÅÔºâ ÈïúÂÉèÂØºÂÖ• ÊòØÂ§çÂà∂ÁöÑËøáÁ®ã,‰ΩìÁßØÊõ¥Â§ß save Âíå exportÂå∫Âà´Ôºö save ‰øùÂ≠òÈïúÂÉèÊâÄÊúâÁöÑ‰ø°ÊÅØ-ÂåÖÂê´ÂéÜÂè≤ export Âè™ÂØºÂá∫ÂΩìÂâçÁöÑ‰ø°ÊÅØ ¬∂Dockerfile Âú® Dockerfile Êñá‰ª∂ÊâÄÂú®ÁõÆÂΩïÊâßË°åÔºödocker build -t [IMAGE TAG] . ÈïúÂÉèÊûÑÂª∫‰∏ä‰∏ãÊñáÔºàContextÔºâ ÂΩìÊûÑÂª∫ÁöÑÊó∂ÂÄôÔºåÁî®Êà∑‰ºöÊåáÂÆöÊûÑÂª∫ÈïúÂÉè‰∏ä‰∏ãÊñáÁöÑË∑ØÂæÑÔºådocker build ÂëΩ‰ª§ÂæóÁü•Ëøô‰∏™Ë∑ØÂæÑÂêéÔºå‰ºöÂ∞ÜË∑ØÂæÑ‰∏ãÁöÑÊâÄÊúâÂÜÖÂÆπÊâìÂåÖÔºåÁÑ∂Âêé‰∏ä‰º†Áªô Docker ÂºïÊìé„ÄÇËøôÊ†∑ DockerÂºïÊìéÊî∂Âà∞Ëøô‰∏™‰∏ä‰∏ãÊñáÂåÖÂêéÔºåÂ±ïÂºÄÂ∞±‰ºöËé∑ÂæóÊûÑÂª∫ÈïúÂÉèÊâÄÈúÄÁöÑ‰∏ÄÂàáÊñá‰ª∂„ÄÇÊâÄÈúÄÊñá‰ª∂ÈúÄÂ≠òÊîæÂú®dockerfileÂêåÁ∫ßÁõÆÂΩï„ÄÇ Êåá‰ª§Ôºö FROM RUN COPY ADD CMD ENTRYPOINT ENV ARG VOLUME EXPOSE WORKERDIR USER HEALTHCHECK ONBUILD ADD COPY Âå∫Âà´Ôºö ADDÂèØ‰ª•Â∞ÜËøúÁ´ØÁöÑÊñá‰ª∂Â§çÂà∂ËøõÂÆπÂô® ADDÂèØ‰ª•Âú®Â§çÂà∂ÂéãÁº©ÂåÖËøõÂÆπÂô®Êó∂‰ºöËá™Âä®Ëß£Âéã CMD ENTRYPOINT HEALTHCHECK Âè™ËÉΩÊúâ‰∏Ä‰∏™ÔºåËæìÂÖ•Â§ö‰∏™ÊúÄÂêé‰∏Ä‰∏™ÁîüÊïà CMD ENTRYPOINT Âå∫Âà´ run container ÂêéÈù¢Â∏¶ÁöÑÂèÇÊï∞ ‰ºöÂ∞Ü CMD Êåá‰ª§Ë¶ÜÁõñÔºå‰ΩÜÊòØ‰∏çËÉΩË¶ÜÁõñENTRYPOINTÊåá‰ª§Ôºå‰ºöÂèòÊàêENTRYPOINTÁöÑÂèÇÊï∞Ê∑ªÂä†„ÄÇ docker run -it --entrypoint=[Êåá‰ª§] [IMAGE] Â∞±ÂèØ‰ª•Ë¶ÜÁõñENTRYPOINTÊåá‰ª§ ÂØπ‰∫éÂÆπÂô®ËÄåË®ÄÔºåÂÖ∂ÂêØÂä®Á®ãÂ∫èÂ∞±ÊòØÂÆπÂô®Â∫îÁî®ËøõÁ®ãÔºåÂÆπÂô®Â∞±ÊòØ‰∏∫‰∫Ü‰∏ªËøõÁ®ãËÄåÂ≠òÂú®ÁöÑÔºå‰∏ªËøõÁ®ãÈÄÄÂá∫ÔºåÂÆπÂô®Â∞±Â§±Âéª‰∫ÜÂ≠òÂú®ÁöÑÊÑè‰πâÔºå‰ªéËÄåÈÄÄÂá∫ÔºåÂÖ∂ÂÆÉËæÖÂä©ËøõÁ®ã‰∏çÊòØÂÆÉÈúÄË¶ÅÂÖ≥ÂøÉÁöÑ‰∏úË•ø„ÄÇÂÆàÊä§ËøõÁ®ã‰∏ÄËà¨Âú®Á≥ªÁªüÂêØÂä®Êó∂ÂºÄÂßãËøêË°åÔºåÈô§ÈùûÂº∫Ë°åÁªàÊ≠¢ÔºåÂê¶ÂàôÁõ¥Âà∞Á≥ªÁªüÂÖ≥Êú∫ÈÉΩ‰øùÊåÅËøêË°å,Âõ†Ê≠§‰ºö‰ª•ÂÆàÊä§ËøõÁ®ãÁöÑÊñπÂºèÂú®ÂêéÁ´ØÂêØÂä®ÊúçÂä°„ÄÇ Docker ÂÆπÂô®ÈÄöËøáËôöÊãüÁΩëÊ°•ËøõË°åËøûÊé•]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[__dict__]]></title>
    <url>%2F2019%2F02%2F24%2Fdict%2F</url>
    <content type="text"><![CDATA[Python‰∏ã‰∏ÄÂàáÁöÜÂØπË±°ÔºåÊØè‰∏™ÂØπË±°ÈÉΩÊúâÂ§ö‰∏™Â±ûÊÄß(attribute)ÔºåPythonÂØπÂ±ûÊÄßÊúâ‰∏ÄÂ•óÁªü‰∏ÄÁöÑÁÆ°ÁêÜÊñπÊ°à„ÄÇ__dict__ÊòØÁî®Êù•Â≠òÂÇ®ÂØπË±°Â±ûÊÄßÁöÑ‰∏Ä‰∏™Â≠óÂÖ∏ÔºåÂÖ∂ÈîÆ‰∏∫Â±ûÊÄßÂêçÔºåÂÄº‰∏∫Â±ûÊÄßÁöÑÂÄº„ÄÇ ¬∂__dict__ËÆøÈóÆÂØπË±°Â±ûÊÄß __dict__Â±ûÊÄßÊòØ‰∏Ä‰∏™Â≠óÂÖ∏(dict)ÔºåÂÆÉÂåÖÂê´‰∫ÜËØ•ÂØπË±°ÊâÄÊúâÁöÑÂ±ûÊÄß„ÄÇ 12345678910111213141516class Parent(object): a = 0 b = 1 def __init__(self): self.a = 2 self.b = 3 def p_test(self): passp = Parent()print(Parent.__dict__)print(p.__dict__) OutPut: 12&#123;'__module__': '__main__', 'a': 0, 'b': 1, '__init__': &lt;function Parent.__init__ at 0x0000021251F037B8&gt;, 'p_test': &lt;function Parent.p_test at 0x000002125218DAE8&gt;, '__dict__': &lt;attribute '__dict__' of 'Parent' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'Parent' objects&gt;, '__doc__': None&#125;&#123;'a': 2, 'b': 3&#125; python‰∏≠ÁöÑÂÜÖÁΩÆÁöÑÊï∞ÊçÆÁ±ªÂûãÔºàÂ¶Çint, list, dictÔºâ‰∏çÂ≠òÂú®__dict__Â±ûÊÄß ¬∂ÁªßÊâøÁä∂ÊÄÅ‰∏ã__dict__Â±ûÊÄß Â≠êÁ±ªÊúâËá™Â∑±ÁöÑ__dict__,Áà∂Á±ª‰πüÊúâËá™Â∑±ÁöÑ__dict__,Â≠êÁ±ªÁöÑÁ±ªÂèòÈáèÂíåÂáΩÊï∞ÊîæÂú®Â≠êÁ±ªÁöÑdict‰∏≠ÔºåÁà∂Á±ªÁöÑÊîæÂú®Áà∂Á±ªdict‰∏≠„ÄÇ Áà∂Â≠êÁ±ªÂØπË±°ÊúâËá™Â∑±ÁöÑ__dict__Â±ûÊÄßÔºå Â≠òÂÇ®self.xx ‰ø°ÊÅØÔºåÂ≠êÁ±ª‰∏çÈáçÂÜôÁà∂Á±ªÂÆû‰æãÂåñÂèòÈáèÔºåÁà∂Â≠êÁ±ªÂØπË±°__dict__‰∏ÄËá¥ÔºåÂ≠êÁ±ªÈáçÂÜôÁà∂Á±ªÂÆû‰æãÂåñÂèòÈáèÔºåÂ≠êÁ±ªÂØπË±°__dict__‰ºöÂèëÁîüÊîπÂèò 123456789101112131415161718192021222324252627282930313233class Parent(object): a = 0 b = 1 def __init__(self): self.a = 2 self.b = 3 def p_test(self): passclass Child(Parent): # a = 4 # b = 5 def __init__(self): super(Child, self).__init__() # self.a = 6 # self.b = 7 def c_test(self): pass def p_test(self): passp = Parent()c = Child()print(Parent.__dict__)print(Child.__dict__)print(p.__dict__)print(c.__dict__) 1234&#123;'__module__': '__main__', 'a': 0, 'b': 1, '__init__': &lt;function Parent.__init__ at 0x000001FC798437B8&gt;, 'p_test': &lt;function Parent.p_test at 0x000001FC79ACDAE8&gt;, '__dict__': &lt;attribute '__dict__' of 'Parent' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'Parent' objects&gt;, '__doc__': None&#125;&#123;'__module__': '__main__', '__init__': &lt;function Child.__init__ at 0x000001FC79ACDB70&gt;, 'c_test': &lt;function Child.c_test at 0x000001FC79ACDBF8&gt;, 'p_test': &lt;function Child.p_test at 0x000001FC79ACDC80&gt;, '__doc__': None&#125;&#123;'a': 2, 'b': 3&#125;&#123;'a': 2, 'b': 3&#125; ¬∂__dict__Êìç‰ΩúÁßÅÊúâÂèòÈáè java‰∏≠ÂèØ‰ª•ÈÄöËøáÂèçÂ∞ÑÊú∫Âà∂Êìç‰ΩúÂà∞ÂØπË±°ÁöÑÁßÅÊúâÂ±ûÊÄß,python‰∏≠ÂèØ‰ª•ÈÄöËøá__dict__Êìç‰ΩúÁßÅÊúâÂèòÈáè __xxÔºöÂèåÂâçÁΩÆ‰∏ãÂàíÁ∫øÔºåÁßÅÊúâÂåñÂ±ûÊÄßÊàñÊñπÊ≥ïÔºåÊó†Ê≥ïÂú®Â§ñÈÉ®Áõ¥Êé•ËÆøÈóÆÔºàÂêçÂ≠óÈáçÊï¥ÊâÄ‰ª•ËÆøÈóÆ‰∏çÂà∞Ôºâ 123456789101112131415class test(object): def __init__(self): self.num = 10 self.__num = 30 def __str__(self): return f"num = &#123;self.num&#125;,__num = &#123;self.__num&#125;"t = test()print(t.num) # 10# print(t.__num) # AttributeError: 'test' object has no attribute '__num'print(t.__dict__['_test__num'])t.__dict__['num'] = 50t.__dict__['_test__num'] = 100print(t) OutPut: 1231030num = 50,__num = 100]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËøõÁ®ãÈó¥ÈÄö‰ø°]]></title>
    <url>%2F2019%2F02%2F24%2F1%2F</url>
    <content type="text"><![CDATA[Â§öËøõÁ®ã‰πãÈó¥ÊòØÂ¶Ç‰ΩïËøõË°åÈÄö‰ø°ÁöÑÂë¢Ôºü ¬∂Ê¶ÇËø∞ ¬∂ËøõÁ®ã ËøõÁ®ãÊòØÂÖ∑Êúâ‰∏ÄÂÆöÁã¨Á´ãÂäüËÉΩÁöÑÁ®ãÂ∫èÂÖ≥‰∫éÊüê‰∏™Êï∞ÊçÆÈõÜÂêà‰∏äÁöÑ‰∏ÄÊ¨°ËøêË°åÊ¥ªÂä®,ËøõÁ®ãÊòØÁ≥ªÁªüËøõË°åËµÑÊ∫êÂàÜÈÖçÂíåË∞ÉÂ∫¶ÁöÑ‰∏Ä‰∏™Áã¨Á´ãÂçï‰Ωç. ¬∂Á∫øÁ®ã Á∫øÁ®ãÊòØËøõÁ®ãÁöÑ‰∏Ä‰∏™ÂÆû‰Ωì,ÊòØCPUË∞ÉÂ∫¶ÂíåÂàÜÊ¥æÁöÑÂü∫Êú¨Âçï‰Ωç,ÂÆÉÊòØÊØîËøõÁ®ãÊõ¥Â∞èÁöÑËÉΩÁã¨Á´ãËøêË°åÁöÑÂü∫Êú¨Âçï‰Ωç.Á∫øÁ®ãËá™Â∑±Âü∫Êú¨‰∏ä‰∏çÊã•ÊúâÁ≥ªÁªüËµÑÊ∫ê,Âè™Êã•Êúâ‰∏ÄÁÇπÂú®ËøêË°å‰∏≠ÂøÖ‰∏çÂèØÂ∞ëÁöÑËµÑÊ∫ê(Â¶ÇÁ®ãÂ∫èËÆ°Êï∞Âô®,‰∏ÄÁªÑÂØÑÂ≠òÂô®ÂíåÊ†à),‰ΩÜÊòØÂÆÉÂèØ‰∏éÂêåÂ±û‰∏Ä‰∏™ËøõÁ®ãÁöÑÂÖ∂‰ªñÁöÑÁ∫øÁ®ãÂÖ±‰∫´ËøõÁ®ãÊâÄÊã•ÊúâÁöÑÂÖ®ÈÉ®ËµÑÊ∫ê. ¬∂Âå∫Âà´ ËøõÁ®ãÂíåÁ∫øÁ®ãÁöÑ‰∏ªË¶ÅÂ∑ÆÂà´Âú®‰∫éÂÆÉ‰ª¨ÊòØ‰∏çÂêåÁöÑÊìç‰ΩúÁ≥ªÁªüËµÑÊ∫êÁÆ°ÁêÜÊñπÂºè„ÄÇËøõÁ®ãÊúâÁã¨Á´ãÁöÑÂú∞ÂùÄÁ©∫Èó¥Ôºå‰∏Ä‰∏™ËøõÁ®ãÂ¥©Ê∫ÉÂêéÔºåÂú®‰øùÊä§Ê®°Âºè‰∏ã‰∏ç‰ºöÂØπÂÖ∂ÂÆÉËøõÁ®ã‰∫ßÁîüÂΩ±ÂìçÔºåËÄåÁ∫øÁ®ãÂè™ÊòØ‰∏Ä‰∏™ËøõÁ®ã‰∏≠ÁöÑ‰∏çÂêåÊâßË°åË∑ØÂæÑ„ÄÇÁ∫øÁ®ãÊúâËá™Â∑±ÁöÑÂ†ÜÊ†àÂíåÂ±ÄÈÉ®ÂèòÈáèÔºå‰ΩÜÁ∫øÁ®ã‰πãÈó¥Ê≤°ÊúâÂçïÁã¨ÁöÑÂú∞ÂùÄÁ©∫Èó¥Ôºå‰∏Ä‰∏™Á∫øÁ®ãÊ≠ªÊéâÂ∞±Á≠â‰∫éÊï¥‰∏™ËøõÁ®ãÊ≠ªÊéâÔºåÊâÄ‰ª•Â§öËøõÁ®ãÁöÑÁ®ãÂ∫èË¶ÅÊØîÂ§öÁ∫øÁ®ãÁöÑÁ®ãÂ∫èÂÅ•Â£ÆÔºå‰ΩÜÂú®ËøõÁ®ãÂàáÊç¢Êó∂ÔºåËÄóË¥πËµÑÊ∫êËæÉÂ§ßÔºåÊïàÁéáË¶ÅÂ∑Æ‰∏Ä‰∫õ„ÄÇ ¬∂Â§öËøõÁ®ãÈÄö‰ø° ¬∂ÈôàËø∞ ÊØè‰∏™ËøõÁ®ãÈÉΩÊúâÁã¨Á´ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåËÆæÁΩÆÂÖ®Â±ÄÂèòÈáèÂπ∂‰∏çËÉΩÂú®Â§öËøõÁ®ã‰∏≠ÂÖ±‰∫´ 123456789101112131415161718import timefrom multiprocessing import Processdef producer(a): a +=1 time.sleep(2)def consumer(a): time.sleep(2) print(a)if __name__ =="__main__": a = 1 my_producer = Process(target=producer,args=(a,)) my_consumer = Process(target=consumer,args=(a,)) my_producer.start() my_consumer.start() my_producer.join() my_consumer.join() OutPut: 1 ¬∂multiprocessing.Queue() ‰º†ÁªüÁöÑQueueÂπ∂‰∏çËÉΩÊª°Ë∂≥Â§öËøõÁ®ãÁöÑ‰ΩøÁî® 123456789101112131415161718import timefrom multiprocessing import Process,Queuedef producer(queue): queue.put("a") time.sleep(2)def consumer(queue): time.sleep(2) print(queue.get())if __name__ =="__main__": queue = Queue(10) my_producer = Process(target=producer,args=(queue,)) my_consumer = Process(target=consumer,args=(queue,)) my_producer.start() my_consumer.start() my_producer.join() my_consumer.join() OutPut: a ¬∂multiprocessing.Pipe() PipeÔºàÔºâÂáΩÊï∞ËøîÂõû‰∏ÄÂØπÁî±ÁÆ°ÈÅìËøûÊé•ÁöÑËøûÊé•ÂØπË±°ÔºåÂè™ÈÄÇÁî®‰∫é‰∏§‰∏™ËøõÁ®ãÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊòØÂèåÂ∑•ÔºàÂèåÂêëÔºâ„ÄÇ PipeÁöÑÊÄßËÉΩÈ´ò‰∫équeue 123456789101112131415161718192021222324import timefrom multiprocessing import Pipe, Processdef producer(pipe): pipe.send("a") time.sleep(2)def consumer(pipe): time.sleep(2) print(pipe.recv())if __name__ == "__main__": recevie_pipe, send_pipe = Pipe() my_producer = Process(target=producer, args=(send_pipe,)) my_consumer = Process(target=consumer, args=(recevie_pipe,)) my_producer.start() my_consumer.start() my_producer.join() my_consumer.join() OutPut: a ¬∂multiprocessing.Manager() ÈÄöËøáManagerËøõË°åÂÖ±‰∫´ÂÜÖÂ≠òÊìç‰Ωú 12345678910111213def add_data(p_dict,key,value): p_dict[key] = valueif __name__ =="__main__": process_dict = Manager().dict() first_process = Process(target=add_data,args=(process_dict,"Darr_en1",22)) second_process = Process(target=add_data,args=(process_dict,"Darr_en2",44)) first_process.start() second_process.start() first_process.join() second_process.join() print(process_dict) OutPut: {'Darr_en1': 22, 'Darr_en2': 44}]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>process</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËØ¶Ëß£redis install]]></title>
    <url>%2F2018%2F12%2F29%2F1%2F</url>
    <content type="text"><![CDATA[redis‰Ωú‰∏∫‰ΩøÁî®ÂÜÖÂ≠òÂ≠òÂÇ®ÁöÑNoSQL,Êï∞ÊçÆÂ≠òÂÇ®Áõ∏ËæÉ‰∫émemcachedÊúâÊõ¥Âä†‰∏∞ÂØåÁöÑÊï∞ÊçÆÁªìÊûÑÊîØÊåÅ„ÄÇËøòÈôÑÊúâÂèëÂ∏ÉËÆ¢ÈòÖÔºå‰∏ª‰ªéÂ§çÂà∂Á≠âÂäüËÉΩ„ÄÇËÆ©Êàë‰ª¨Êù•Â∞ùËØïÊÄé‰πàÂÆâË£ÖÂÆÉÂêß„ÄÇ ¬∂linux install redis ¬∂ÂÆâË£ÖÊ≠•È™§ Êú¨‰∫∫‰ΩøÁî®ÁöÑÊòØubuntu_16_server,È¶ñÂÖàÈúÄË¶ÅÂú®redisÂÆòÁΩë‰∏ãËΩΩÂéãÁº©ÂåÖ,ÂΩìÁÑ∂ÁΩëÁªúÁéØÂ¢ÉÂÖÅËÆ∏ÁöÑÊÉÖÂÜµ‰∏ãÂèØ‰ª•ÈÄöËøálinuxÂëΩ‰ª§Áõ¥Êé•‰∏ãËΩΩÔºå‰ª•‰∏ã‰∏∫Êï¥‰∏™‰ø∫ÂñúÊ¨¢ËøáÁ®ãÔºö 12345678# ‰∏ãËΩΩÂéãÁº©ÂåÖ$ wget http://download.redis.io/releases/redis-5.0.3.tar.gz # Ëß£ÂéãÁº©$ tar xzf redis-5.0.3.tar.gz # ËøõÂÖ•redisÁõÆÂΩï $ cd redis-5.0.3 # ÁºñËØëRedis$ make ¬∂ÈóÆÈ¢ò Â§ßÂ§öÊï∞Êó∂ÂÄômakeÈÉΩ‰ºöÂá∫ÈîôÔºåÈúÄË¶Å‰∏ãËΩΩgccÂ∑•ÂÖ∑ 123$ sudo apt-get clean$ sudo apt-get update $ sudo apt-get build-dep gcc ¬∂ËøúÁ®ãËÆøÈóÆ ÂæàÂ§öÊó∂ÂÄôÁ®ãÂ∫èÂíåredis‰∏çÂú®‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÔºåÂ∞±ÈúÄË¶ÅËÆøÈóÆËøúÁ®ãRedisÊúçÂä°ÔºåRedisÈªòËÆ§‰πüÂè™ÂÖÅËÆ∏Êú¨Êú∫ËÆøÔºåÂõ†Ê≠§ÈúÄË¶ÅÈúÄÊîπRedisÁöÑÈÖçÁΩÆÊñá‰ª∂ /etc/redis/redis.conf Ëß£ÂÜ≥ÂäûÊ≥ïÔºö Ê≥®ÈáäÊéâbind 127.0.0.1ÂèØ‰ª•‰ΩøÊâÄÊúâÁöÑipËÆøÈóÆredis ‰øÆÊîπ protected-mode no ÊåáÂÆöÈÖçÁΩÆÊñá‰ª∂ÁÑ∂ÂêéÈáçÂêØRedisÊúçÂä°Ôºö $ sudo redis-server /etc/redis/redis.conf ËøúÁ®ãËøûÊé•Ôºö $ redis-cli -h {redis_host} -p {redis_port} ¬∂windows install redis ¬∂windowsÂÆâË£ÖredisÂºäÁ´Ø windowsÂÆâË£ÖÊú¨‰∫∫ÊòØ‰∏çÂª∫ËÆÆÁöÑÔºåÈ¶ñÂÖàÂÆòÊñπ‰∏çÊîØÊåÅÔºåredisÂú®windows‰∏äÁöÑÁâàÊú¨‰ºöÊØîËæÉ‰ΩéÔºåÂÖ∂Ê¨°ÔºåredisÂú®Â∞ÜÊï∞ÊçÆÂ∫ìÊåÅ‰πÖÂåñÂà∞Á°¨ÁõòÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÁî®Âà∞forkÁ≥ªÁªüË∞ÉÁî®ÔºåËÄåWindowsÂπ∂‰∏çÊîØÊåÅËøô‰∏™Ë∞ÉÁî®„ÄÇÂú®Áº∫Â∞ëforkË∞ÉÁî®ÊÉÖÂÜµÔºåredisÂú®ÊåÅ‰πÖÂåñÊìç‰ΩúÊúüÈó¥Â∞±Âè™ËÉΩÂ§üÈòªÂ°ûÊâÄÊúâÂÆ¢Êà∑Á´ØÔºåÁõ¥Âà∞ÊåÅ‰πÖÂåñÊìç‰ΩúÂÆåÊØï‰∏∫Ê≠¢„ÄÇËôΩÁÑ∂‰πüÊúâÊèê‰æõÁõ∏Â∫îËß£ÂÜ≥ÊñπÊ°àÔºå‰ΩÜ‰æùÊóß‰∏çÂ¶Çlinux‰∏äÁöÑÊîØÊåÅÂÆåÊï¥„ÄÇ ¬∂ÂÆâË£ÖÊ≠•È™§ ÂÆâË£ÖredisÂèØ‰ª•Âú®windows_redis‰∏ãËΩΩ,ÊúÄÂ•Ω‰∏ãËΩΩ.msiÂêéÁºÄÁöÑÊñá‰ª∂ÔºåÂú®ÂÆâË£ÖËøáÁ®ã‰∏≠‰ºöËá™Âä®ÂÜôÂÖ•Âà∞windowsÁöÑÊúçÂä°‰∏≠ÔºåÂÆâË£ÖÂÆåÊàêÂêéÔºåËøõÂÖ•redisÁõÆÂΩïËøêË°åredis-server.exe,ÂèØËÉΩ‰ºöËøêË°å‰∏çËµ∑Êù•ÔºåËøõË°åÂ¶Ç‰∏ãÊìç‰ΩúÂç≥ÂèØÔºö 1234redis-cli.exeshutdownexitredis-server.exe]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[re(Ê≠£ÂàôË°®ËææÂºè)]]></title>
    <url>%2F2018%2F11%2F30%2Fre%2F</url>
    <content type="text"><![CDATA[Ê≠£ÂàôË°®ËææÂºèÔºàÊàñREÔºâÊåáÂÆö‰∏ÄÁªÑÂåπÈÖçÂÆÉÂ≠óÁ¨¶‰∏≤ÔºõÊ≠§Ê®°Âùó‰∏≠ÁöÑÂáΩÊï∞ËÆ©‰Ω†Ê£ÄÊü•‰∏Ä‰∏™ÁâπÂÆöÁöÑÂ≠óÁ¨¶‰∏≤ÊòØÂê¶ÂåπÈÖçÁªôÂÆöÁöÑÊ≠£ÂàôË°®ËææÂºèÔºàÊàñÁªôÂÆöÁöÑÊ≠£ÂàôË°®ËææÂºèÊòØÂê¶ÂåπÈÖçÁâπÂÆöÁöÑÂ≠óÁ¨¶‰∏≤Ôºâ„ÄÇ ¬∂Âü∫Êú¨ËØ≠Ê≥ï ¬∂re.match ‰ªéÂ§¥ÂåπÈÖç ÂéüÂûã: match(pattern,string,flags=0) ÂèÇÊï∞Ôºö patter:ÂåπÈÖçÁöÑÊ≠£ÂàôË°®ËææÂºè string:Ë¶ÅÂåπÈÖçÁöÑÂ≠óÁ¨¶‰∏≤ flags:Ê†áÂøó‰ΩçÔºåÊéßÂà∂Ê≠£ÂàôË°®ËææÂºèÂåπÈÖçÊñπÂºèÊúâÂ¶Ç‰∏ãÔºö 123456re.I ‰ΩøÂåπÈÖçÂØπÂ§ßÂ∞èÂÜô‰∏çÊïèÊÑüre.L ÂÅöÊú¨Âú∞ÂåñËØÜÂà´Ôºàlocale-awareÔºâÂåπÈÖçre.M Â§öË°åÂåπÈÖçÔºåÂΩ±Âìç ^ Âíå $re.S ‰Ωø . ÂåπÈÖçÂåÖÊã¨Êç¢Ë°åÂú®ÂÜÖÁöÑÊâÄÊúâÂ≠óÁ¨¶re.U Ê†πÊçÆUnicodeÂ≠óÁ¨¶ÈõÜËß£ÊûêÂ≠óÁ¨¶„ÄÇËøô‰∏™Ê†áÂøóÂΩ±Âìç \w, \W, \b, \B.re.X ËØ•Ê†áÂøóÈÄöËøáÁªô‰∫à‰Ω†Êõ¥ÁÅµÊ¥ªÁöÑÊ†ºÂºè‰ª•‰æø‰Ω†Â∞ÜÊ≠£ÂàôË°®ËææÂºèÂÜôÂæóÊõ¥Êòì‰∫éÁêÜËß£„ÄÇ ÂäüËÉΩÔºö ‰ªéÂ§¥ÂºÄÂßãÂåπÈÖçËøîÂõûÁ¨¨‰∏Ä‰∏™ÂåπÈÖçÂØπË±°ÔºåÂåπÈÖçÂ§±Ë¥•ËøîÂõûNone Demo: 12print(re.match('www', 'www.Darr_en1.com').group()) #wwwprint(re.match('arr', 'www.Darr_en1.com').group()) #AttributeError: 'NoneType' object has no attribute 'group' ¬∂re.search ÂåπÈÖçÂåÖÂê´ ÂéüÂûã: search(pattern,string,flags=0) ÂäüËÉΩÔºö Êâ´ÊèèÊï¥‰∏™Â≠óÁ¨¶‰∏≤ËøîÂõûÁ¨¨‰∏Ä‰∏™ÂåπÈÖçÂØπË±°ÔºåÂåπÈÖçÂ§±Ë¥•ËøîÂõûNone Demo: 12print(re.search('www', 'www.Darr_en1.com').group()) #wwwprint(re.search('arr', 'www.Darr_en1.com').group()) #arr ¬∂re.compile È¢ÑÁºñËØë ÂéüÂûã: compile(pattern,flags=0) ÂäüËÉΩÔºö ÊääÊ≠£ÂàôË°®ËææÂºèÁºñËØëÊàê‰∏Ä‰∏™Ê≠£ÂàôÂØπË±° ¬∂Âú®Áúã„ÄäpythonÊ†∏ÂøÉÁºñÁ®ã„ÄãÔºàÁ¨¨3ÁâàÔºâÂØπ‰∫éÁºñËØëÁöÑËØ¥Ê≥ïÔºåÊ∑±Êúâ‰Ωì‰ºöÔºå‰ª•‰∏ãÊëòÂΩïÔºö ÁºñËØëÊ≠£ÂàôË°®ËææÂºèÔºàÁºñËØëËøòÊòØ‰∏çÁºñËØëÔºüÔºâ Âú® Core Python Programming ÊàñËÄÖÂç≥Â∞ÜÂá∫ÁâàÁöÑ Core Python Language Fundamentals ÁöÑÊâßË°åÁéØÂ¢ÉÁ´†ËäÇ‰∏≠Ôºå‰ªãÁªç‰∫ÜPython‰ª£Á†ÅÊúÄÁªàÂ¶Ç‰ΩïË¢´ÁºñËØëÊàêÂ≠óËäÇÁ†ÅÔºåÁÑ∂ÂêéÂú®Ëß£ÈáäÂô®‰∏äÊâßË°å„ÄÇÁâπÂà´ÊòØÔºåÊàë‰ª¨ÊåáÂÆö eval()ÊàñËÄÖ execÔºàÂú® 2.x ÁâàÊú¨‰∏≠ÊàñËÄÖÂú® 3.x ÁâàÊú¨ÁöÑ exec()‰∏≠ÔºâË∞ÉÁî®‰∏Ä‰∏™‰ª£Á†ÅÂØπË±°ËÄå‰∏çÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÊÄßËÉΩ‰∏ä‰ºöÊúâÊòéÊòæÊèêÂçá„ÄÇËøôÊòØÁî±‰∫éÂØπ‰∫éÂâçËÄÖËÄåË®ÄÔºåÁºñËØëËøáÁ®ã‰∏ç‰ºöÈáçÂ§çÊâßË°å„ÄÇÊç¢Âè•ËØùËØ¥Ôºå‰ΩøÁî®È¢ÑÁºñËØëÁöÑ‰ª£Á†ÅÂØπË±°ÊØîÁõ¥Êé•‰ΩøÁî®Â≠óÁ¨¶‰∏≤Ë¶ÅÂø´ÔºåÂõ†‰∏∫Ëß£ÈáäÂô®Âú®ÊâßË°åÂ≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÁöÑ‰ª£Á†ÅÂâçÈÉΩÂøÖÈ°ªÊääÂ≠óÁ¨¶‰∏≤ÁºñËØëÊàê‰ª£Á†ÅÂØπË±°„ÄÇ ÂêåÊ†∑ÁöÑÊ¶ÇÂøµ‰πüÈÄÇÁî®‰∫éÊ≠£ÂàôË°®ËææÂºè‚ÄîÂú®Ê®°ÂºèÂåπÈÖçÂèëÁîü‰πãÂâçÔºåÊ≠£ÂàôË°®ËææÂºèÊ®°ÂºèÂøÖÈ°ªÁºñËØëÊàêÊ≠£ÂàôË°®ËææÂºèÂØπË±°„ÄÇÁî±‰∫éÊ≠£ÂàôË°®ËææÂºèÂú®ÊâßË°åËøáÁ®ã‰∏≠Â∞ÜËøõË°åÂ§öÊ¨°ÊØîËæÉÊìç‰ΩúÔºåÂõ†Ê≠§Âº∫ÁÉàÂª∫ËÆÆ‰ΩøÁî®È¢ÑÁºñËØë„ÄÇËÄå‰∏îÔºåÊó¢ÁÑ∂Ê≠£ÂàôË°®ËææÂºèÁöÑÁºñËØëÊòØÂøÖÈúÄÁöÑÔºåÈÇ£‰πà‰ΩøÁî®È¢ÑÁºñËØëÊù•ÊèêÂçáÊâßË°åÊÄßËÉΩÊó†ÁñëÊòØÊòéÊô∫‰πã‰∏æ„ÄÇre.compile()ËÉΩÂ§üÊèê‰æõÊ≠§ÂäüËÉΩ„ÄÇ ÂÖ∂ÂÆûÊ®°ÂùóÂáΩÊï∞‰ºöÂØπÂ∑≤ÁºñËØëÁöÑÂØπË±°ËøõË°åÁºìÂ≠òÔºåÊâÄ‰ª•‰∏çÊòØÊâÄÊúâ‰ΩøÁî®Áõ∏ÂêåÊ≠£ÂàôË°®ËææÂºèÊ®°ÂºèÁöÑ search()Âíå match()ÈÉΩÈúÄË¶ÅÁºñËØë„ÄÇÂç≥‰ΩøËøôÊ†∑Ôºå‰Ω†‰πüËäÇÁúÅ‰∫ÜÁºìÂ≠òÊü•ËØ¢Êó∂Èó¥ÔºåÂπ∂‰∏î‰∏çÂøÖÂØπ‰∫éÁõ∏ÂêåÁöÑÂ≠óÁ¨¶‰∏≤ÂèçÂ§çËøõË°åÂáΩÊï∞Ë∞ÉÁî®„ÄÇÂú®‰∏çÂêåÁöÑ Python ÁâàÊú¨‰∏≠ÔºåÁºìÂ≠ò‰∏≠Â∑≤ÁºñËØëËøáÁöÑÊ≠£ÂàôË°®ËææÂºèÂØπË±°ÁöÑÊï∞ÁõÆÂèØËÉΩ‰∏çÂêåÔºåËÄå‰∏îÊ≤°ÊúâÊñáÊ°£ËÆ∞ÂΩï„ÄÇpurge()ÂáΩÊï∞ËÉΩÂ§üÁî®‰∫éÊ∏ÖÈô§Ëøô‰∫õÁºìÂ≠ò„ÄÇ Demo: 12re_obj = re.compile("www")print(re_obj.match('www.Darr_en1.com').group()) #www ¬∂re.findall ÂåπÈÖçÂåÖÂê´ËøîÂõûÂàóË°® ÂéüÂûã: findall(pattern,string,flags=0) ÂäüËÉΩÔºö Êâ´ÊèèÊï¥‰∏™Â≠óÁ¨¶‰∏≤ËøîÂõûÁªìÊûúÂàóË°®ÔºåÂåπÈÖçÂ§±Ë¥•ËøîÂõûNone Demo: 12mail='&lt;Darr_en101@mail.com&gt; &lt;Darr_en102@mail.com&gt; Darr_en103@mail.com'print(re.findall(r'(\w+@m....[a-z]&#123;3&#125;)',mail)) #['Darr_en101@mail.com', 'Darr_en102@mail.com', 'Darr_en103@mail.com'] ¬∂re.finditer ÂåπÈÖçÂåÖÂê´ËøîÂõûËø≠‰ª£Âô® ÂéüÂûã: findall(pattern,string,flags=0) ÂäüËÉΩÔºö Êâ´ÊèèÊï¥‰∏™Â≠óÁ¨¶‰∏≤ËøîÂõûËø≠‰ª£Âô®ÔºåÂèØÈò≤Ê≠¢ÂÜÖÂ≠òËøáÂ§ßÁé∞Ë±° Demo: 12mail='&lt;Darr_en101@mail.com&gt; &lt;Darr_en102@mail.com&gt; Darr_en103@mail.com'print(next(re.finditer(r'(\w+@m....[a-z]&#123;3&#125;)',mail)).group()) #Darr_en101@mail.com ¬∂re.split ‰ª•ÂåπÈÖçÂà∞ÁöÑÂ≠óÁ¨¶ÂΩìÂÅöÂàóË°®ÂàÜÈöîÁ¨¶ ÂéüÂûã: split(pattern, string, maxsplit=0, flags=0) ÂèÇÊï∞Ôºö maxsplitÔºöÊúÄÂ§ßÂàÜÂâ≤Â≠óÁ¨¶‰∏≤ÔºåÈªòËÆ§‰∏∫0ÔºåË°®Á§∫ÊØè‰∏™ÂåπÈÖçÈ°πÈÉΩÂàÜÂâ≤ Demo: 123str ="Darr_en1 is so cool"print(re.split(r' +',str)) #['Darr_en1', 'is', 'so', 'cool']print(str.split(' ')) #['Darr_en1', '', '', '', '', 'is', 'so', 'cool'] ¬∂re.sub ÊõøÊç¢Â≠óÁ¨¶‰∏≤ÁöÑÂåπÈÖçÈ°π ÂéüÂûãÔºö sub(pattern, repl, string, count=0) ÂèÇÊï∞Ôºö rep1:ÊõøÊç¢ÂêéÁöÑÂ≠óÁ¨¶‰∏≤ countÔºöÊõøÊç¢‰∏™Êï∞,ÈªòËÆ§‰∏∫0ÔºåË°®Á§∫ÊØè‰∏™ÂåπÈÖçÈ°πÈÉΩÊõøÊç¢ ÂäüËÉΩÔºö ÊõøÊç¢Â≠óÁ¨¶‰∏≤ÁöÑÂåπÈÖçÈ°πÔºåËøîÂõûstr Demo: 123str="Darr_en1 is so cool"print(re.sub(r'\s','-',str)) #Darr_en1-is-so-coolprint(re.sub(r'\s','-',str,2)) #Darr_en1-is-so cool ¬∂re.subn ÊõøÊç¢Â≠óÁ¨¶‰∏≤ÁöÑÂåπÈÖçÈ°π ÂéüÂûãÔºö subn(pattern, repl, string, count=0) ÂèÇÊï∞Ôºö rep1:ÊõøÊç¢ÂêéÁöÑÂ≠óÁ¨¶‰∏≤ countÔºöÊõøÊç¢‰∏™Êï∞,ÈªòËÆ§‰∏∫0ÔºåË°®Á§∫ÊØè‰∏™ÂåπÈÖçÈ°πÈÉΩÊõøÊç¢ ÂäüËÉΩÔºö ÊõøÊç¢Â≠óÁ¨¶‰∏≤ÁöÑÂåπÈÖçÈ°πÔºåËøîÂõûtuple,Á¨¨‰∏Ä‰∏™ÂÄº‰∏∫Ë¢´ÊõøÊç¢ÁöÑstrÔºåÁ¨¨‰∫å‰∏™ÂÄº‰∏∫Ë¢´ÊõøÊç¢Ê¨°Êï∞ Demo: 123str="Darr_en1 is so cool"print(re.subn(r'\s','-',str)) #('Darr_en1-is-so-cool', 3)print(re.subn(r'\s','-',str,2)) #('Darr_en1-is-so cool', 2) ¬∂group() groups() ÂàÜÁªÑ ÂäüËÉΩÔºö ÈÄöËøá()Êù•ËøõË°åÂàÜÁªÑÔºågroup(n)ËøîÂõûÁ¨¨n‰∏™ÂÄº,groups()ËøîÂõûtuple DemoÔºö 12345678str="Darr_en1-is-so-cool"print(re.findall(r'(\w+)(-)',str)) #[('Darr_en1', '-'), ('is', '-'), ('so', '-')]print(re.findall(r'\w+-',str)) #['Darr_en1-', 'is-', 'so-']print(re.match(r'(\w+)(-)',str).group()) # Darr_en1-print(re.match(r'(\w+)(-)',str).group(0)) # Darr_en1-print(re.match(r'(\w+)(-)',str).group(1)) # Darr_en1print(re.match(r'(\w+)(-)',str).group(2)) # -print(re.match(r'(\w+)(-)',str).groups()) # ('Darr_en1', '-') ¬∂Â∏∏Áî®Ê≠£ÂàôË°®ËææÂºèÁ¨¶Âè∑ ¬∂Âçï‰∏™Â≠óÁ¨¶ 12&apos;.&apos; ÂåπÈÖçÈô§\n‰πãÂ§ñÁöÑ‰ªªÊÑè‰∏Ä‰∏™Â≠óÁ¨¶ÔºåËã•ÊåáÂÆöflag DOTALL,ÂàôÂåπÈÖç‰ªªÊÑèÂ≠óÁ¨¶ÔºåÂåÖÊã¨Êç¢Ë°å&apos;[]&apos; ÂåπÈÖçÊã¨Âè∑ÂÜÖÁöÑÊâÄÊúâÂ≠óÁ¨¶,Á¨¨‰∏Ä‰∏™Â≠óÁ¨¶^‰∏∫ÂèñÂèç ¬∂È¢ÑÂÆö‰πâÂ≠óÁ¨¶ÈõÜ 123456&apos;\d&apos; ÂåπÈÖçÊï∞Â≠ó[0-9]&apos;\D&apos; ÂåπÈÖçÈùûÊï∞Â≠ó,Âç≥[^0-9]&apos;\w&apos; ÂåπÈÖçÂçïËØçÔºåÂç≥[A-Za-z0-9_]&apos;\W&apos; ÂåπÈÖçÈùûÂçïËØç,Âç≥[^A-Za-z0-9_]&apos;\s&apos; ÂåπÈÖçÁ©∫Ê†º„ÄÅ\t„ÄÅ\n„ÄÅ\r , Âç≥[&lt;Á©∫Ê†º&gt;\f\n\r\t],re.search(&quot;\s+&quot;,&quot;ab\tc1\n3&quot;).group() ÁªìÊûú &apos;\t&apos;&apos;\S&apos; ÂåπÈÖçÈùûÁ©∫Ê†º„ÄÅ\t„ÄÅ\n„ÄÅ\r , Âç≥[^&lt;Á©∫Ê†º&gt;\f\n\r\t] ¬∂ÈîöÂ≠óÁ¨¶ÔºàËæπÁïåÂ≠óÁ¨¶Ôºâ 123456&apos;^&apos; ÂåπÈÖçÂ≠óÁ¨¶ÂºÄÂ§¥ÔºåËã•ÊåáÂÆöflags MULTILINE,ËøôÁßç‰πüÂèØ‰ª•ÂåπÈÖç‰∏ä(r&quot;^a&quot;,&quot;\nabc\neee&quot;,flags=re.MULTILINE)&apos;\A&apos; ÂåπÈÖçÂ≠óÁ¨¶ÂºÄÂ§¥ÔºåÂêå$Âå∫Âà´ÊòØÔºåÂè™ÂåπÈÖçÊï¥‰∏™Â≠óÁ¨¶‰∏≤ÂºÄÂ§¥ÔºåÂú®re.M‰∏ãÂåπÈÖçÁ¨¨‰∏ÄË°åÂºÄÂ§¥&apos;$&apos; ÂåπÈÖçÂ≠óÁ¨¶ÁªìÂ∞æÔºåÊàñe.search(&quot;foo$&quot;,&quot;bfoo\nsdfsf&quot;,flags=re.MULTILINE).group()‰πüÂèØ‰ª•&apos;\Z&apos; ÂåπÈÖçÂ≠óÁ¨¶ÁªìÂ∞æÔºåÂêå$Âå∫Âà´ÊòØÔºåÂè™ÂåπÈÖçÊï¥‰∏™Â≠óÁ¨¶‰∏≤ÁªìÂ∞æÔºåÂú®re.M‰∏ãÂåπÈÖçÊúÄÂêé‰∏ÄË°åÁªìÂ∞æ&apos;\b&apos; ÂåπÈÖçÂçïËØçËæπÁïåÔºåÂç≥ÂåπÈÖç\WÂíå\w‰πãÈó¥ÁöÑ‰ΩçÁΩÆ&apos;\B&apos; ÂåπÈÖçÈùûÂçïËØçËæπÁïå ¬∂ÈáèÊï∞ËØç(ÂåπÈÖçÂ§ö‰∏™Â≠óÁ¨¶) 123456789&apos;*&apos; ÂåπÈÖç*Âè∑ÂâçÁöÑÂ≠óÁ¨¶0Ê¨°ÊàñÂ§öÊ¨°Ôºåre.findall(&quot;ab*&quot;,&quot;cabb3abcbbac&quot;) ÁªìÊûú‰∏∫[&apos;abb&apos;, &apos;ab&apos;, &apos;a&apos;]&apos;+&apos; ÂåπÈÖçÂâç‰∏Ä‰∏™Â≠óÁ¨¶1Ê¨°ÊàñÂ§öÊ¨°Ôºåre.findall(&quot;ab+&quot;,&quot;ab+cd+abb+bba&quot;) ÁªìÊûú[&apos;ab&apos;, &apos;abb&apos;]&apos;?&apos; ÂåπÈÖçÂâç‰∏Ä‰∏™Â≠óÁ¨¶1Ê¨°Êàñ0Ê¨°&apos;&#123;m&#125;&apos; ÂåπÈÖçÂâç‰∏Ä‰∏™Â≠óÁ¨¶mÊ¨°&apos;&#123;n,m&#125;&apos; ÂåπÈÖçÂâç‰∏Ä‰∏™Â≠óÁ¨¶nÂà∞mÊ¨°Ôºåre.findall(&quot;ab&#123;1,3&#125;&quot;,&quot;abb abc abbcbbb&quot;) ÁªìÊûú&apos;abb&apos;, &apos;ab&apos;, &apos;abb&apos;]&apos;&#123;m,&#125;&apos; ÂåπÈÖçÂâç‰∏ÄÂ§ñÂ≠óÁ¨¶Ëá≥Â∞ë mÊ¨° Ëá≥Â§öÊó†ÈôêÊ¨°Ôºõ&apos;&#123;,n&#125;&apos; ÂåπÈÖçÂâç‰∏Ä‰∏™Â≠óÁ¨¶ 0 Âà∞ nÊ¨°&apos;|&apos; ÂåπÈÖç|Â∑¶Êàñ|Âè≥ÁöÑÂ≠óÁ¨¶Ôºåre.search(&quot;abc|ABC&quot;,&quot;ABCBabcCD&quot;).group() ÁªìÊûú&apos;ABC&apos;&apos;(...)&apos; ÂàÜÁªÑÂåπÈÖçÔºåre.search(&quot;(abc)&#123;2&#125;a(123|456)c&quot;, &quot;abcabca456c&quot;).group() ÁªìÊûú abcabca456c ¬∂Ë¥™Â©™ÂåπÈÖç ÈùûË¥™Â©™ÂåπÈÖç 123456789101112131415Ë¥™Â©™Ê®°ÂºèÂú®Êï¥‰∏™Ë°®ËææÂºèÂåπÈÖçÊàêÂäüÁöÑÂâçÊèê‰∏ãÔºåÂ∞ΩÂèØËÉΩÂ§öÁöÑÂåπÈÖç„ÄÇÈùûË¥™Â©™Ê®°ÂºèÂú®Êï¥‰∏™Ë°®ËææÂºèÂåπÈÖçÊàêÂäüÁöÑÂâçÊèê‰∏ãÔºåÂ∞ΩÂèØËÉΩÂ∞ëÁöÑÂåπÈÖç„ÄÇÂ±û‰∫éË¥™Â©™Ê®°ÂºèÁöÑÈáèËØçÔºå‰πüÂè´ÂÅöÂåπÈÖç‰ºòÂÖàÈáèËØçÔºåÂåÖÊã¨Ôºö‚Äú&#123;m,n&#125;‚Äù„ÄÅ‚Äú&#123;m,&#125;‚Äù„ÄÅ‚Äú?‚Äù„ÄÅ‚Äú*‚ÄùÂíå‚Äú+‚Äù„ÄÇÂ±û‰∫éÈùûË¥™Â©™Ê®°ÂºèÁöÑÈáèËØçÔºå‰πüÂè´ÂÅöÂøΩÁï•‰ºòÂÖàÈáèËØçÔºåÂåÖÊã¨Ôºö‚Äú&#123;m,n&#125;?‚Äù„ÄÅ‚Äú&#123;m,&#125;?‚Äù„ÄÅ‚Äú??‚Äù„ÄÅ‚Äú*?‚ÄùÂíå‚Äú+?‚Äù„ÄÇ‰∏æ‰æãÔºöÊ∫êÂ≠óÁ¨¶‰∏≤Ôºöaa&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;ccÊ≠£ÂàôË°®ËææÂºè‰∏ÄÔºö&lt;div&gt;.*&lt;/div&gt;ÂåπÈÖçÁªìÊûú‰∏ÄÔºö&lt;div&gt;test1&lt;/div&gt;bb&lt;div&gt;test2&lt;/div&gt;Ê≠£ÂàôË°®ËææÂºè‰∫åÔºö&lt;div&gt;.*?&lt;/div&gt;ÂåπÈÖçÁªìÊûú‰∫åÔºö&lt;div&gt;test1&lt;/div&gt;,&lt;div&gt;test2&lt;/div&gt;]]></content>
      <categories>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>re</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo blogÈ´òÁ∫ßÈÖçÁΩÆ]]></title>
    <url>%2F2018%2F11%2F28%2Fhexo_advanced_configuration%2F</url>
    <content type="text"><![CDATA[ÈÄöËøáhexoÂàõÂª∫ÂÆåÁÆÄÂçïblogÔºåÊòØ‰∏çÊòØËøòËßâÂæóÁº∫ÁÇπÂï•Âë¢ÔºüÈÇ£Â∞±ËÆ©Êàë‰ª¨ËøõÂÖ•È´òÁ∫ßÈÖçÁΩÆÊää„ÄÇ Êú¨blog‰ΩøÁî®‰∏ªÈ¢ò‰∏∫NexT6.5.0‰ºöÂíåiissnanÁöÑÁâàÊú¨Êúâ‰∫õËÆ∏‰∏ç‰∏ÄÊ†∑„ÄÇ Â¶ÇÊûú‰∏ç‰ºöÊê≠Âª∫blog,ÂèØ‰ª•ÂèÇËÄÉuchuhimoËÄÅÂì•ÁöÑÊñáÁ´†Â¶Ç‰Ωï‰ΩøÁî® Hexo Âíå GitHub Pages Êê≠Âª∫Ëøô‰∏™ÂçöÂÆ¢ÔºåÊØîËæÉËØ¶ÁªÜÔºåÊàëÂ∞±‰∏çÈáçÂ§çÈÄ†ËΩÆÂ≠ê‰∫Ü„ÄÇ ¬∂ÊñáÁ´†‰ª£Á†ÅÊ†∑Âºè‰øÆÊîπ Ë°åÂÜÖ‰ª£Á†Å ‰øÆÊîπthemes\next-reloaded\source\css\_custom\custom.stylÊñá‰ª∂Ôºö 12345678code &#123; color: #c7254e; background: #f9f2f4; border: 1px solid #d6d6d6; padding:1px 4px; word-break: break-all; border-radius:4px;&#125; Âå∫Âùó‰ª£Á†Å ‰øÆÊîπthemes\next-reloaded\config.ymlÊñá‰ª∂Ôºö 12# Ê†∑ÂºèÁßçÁ±ªÔºö normal | night | night eighties | night blue | night brighthighlight_theme: night ¬∂ÊñáÁ´†ÁªìÊùüËØ≠ËÆæÁΩÆ Ê∑ªÂä†template themes\next-reloaded\layout\_macro‰∏≠Êñ∞Âª∫ passage-end-tag.swig,ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö 1234567&lt;div&gt; &#123;% if not is_index %&#125; &lt;div style="text-align:center;color: #ccc;font-size:14px;"&gt; -------------Êú¨ÊñáÁªìÊùü ÊÑüË∞¢ÊÇ®ÁöÑÈòÖËØª------------- &lt;/div&gt; &#123;% endif %&#125;&lt;/div&gt; ÂØºÂÖ•template Âú®themes\next-reloaded\layout\_macro\post.swigÊñá‰ª∂‰∏≠,Ê∑ªÂä† 12345678&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include 'passage-end-tag.swig' %&#125; &#123;% endif %&#125;&lt;/div&gt;&#123;#####################&#125;&#123;### END POST BODY ###&#125;&#123;#####################&#125; ÈÖçÁΩÆ Âú®themes\next-reloaded\_config.ymlÊ∑ªÂä†Ôºö 12passage_end_tag: enabled: true ¬∂ÊñáÁ´†Â∫ïÈÉ®Ê†áÁ≠æ‰øÆÊîπ ‰øÆÊîπthemes\next-reloaded\layout\_macro\post.swig,searchrel=&quot;tag&quot;&gt;#,Â∞Ü #Êõ¥Êîπ‰∏∫&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt; ¬∂Ëá™ÂÆö‰πâÊñáÁ´†ÁöÑÈªòËÆ§Â§¥ÈÉ®‰ø°ÊÅØ ÂàõÂª∫Êñ∞ÁöÑÈ°µÈù¢hexo new &quot;name&quot; Êü•Áúãsource\_posts\name.mdÔºö 12345---title: namedate: 2018-11-28 10:53:42 tags: --- Ê∑ªÂä†scaffolds/post.mdÔºö 12345678910---title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;tags: #Ê†áÁ≠æcategories: #ÂàÜÁ±ªcopyright: true #ÁâàÊùÉÂ£∞Êòépermalink: 01 #ÊñáÁ´†ÈìæÊé•top: 0 #ÁΩÆÈ°∂‰ºòÂÖàÁ∫ßpassword: #ÂØÜÁ†Å‰øùÊä§--- ¬∂ÊêúÁ¥¢ÂäüËÉΩ ÂÆâË£Ö 1npm install hexo-generator-searchdb --save ÈÖçÁΩÆ ‰øÆÊîπthemes\next-reloaded\_config.yml: 1234local_search: enable: true trigger: auto top_n_per_article: 1 Âú®_config.yml‰∏≠ÔºåÊ∑ªÂä†Ôºö 12345search: path: search.xml field: post format: html limit: 10000 ¬∂ËøûÊé•Ê†∑ÂºèÁæéÂåñ Ê∑ªÂä†themes\next-reloaded\source\css\_custom\custom.styl: 12345678910.post-body a&#123; color: #0593d3; border-bottom: none; border-bottom: 1px solid #0593d3; &amp;:hover &#123; color: #fc6423; border-bottom: none; border-bottom: 1px solid #fc6423; &#125;&#125; ¬∂ÊñáÁ´†Ê∑ªÂä†Èò¥ÂΩ±ÊïàÊûú Ê∑ªÂä†themes\next-reloaded\source\css\_custom\custom.styl: 1234567.post &#123; margin-top: 60px; margin-bottom: 60px; padding: 25px; -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5); -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5); &#125; ¬∂Ê∑ªÂä†Âä®ÊÄÅËÉåÊôØ ÊâìÂºÄ\themes\next-reloaded\layout\_layout.swigÔºåÂú®&lt; /body&gt;ÂâçÊ∑ªÂä†‰ª£Á†ÅÔºö 123&#123;% if theme.canvas_nest %&#125;&lt;script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"&gt;&lt;/script&gt;&#123;% endif %&#125; Ê∑ªÂä†themes\next-reloaded\_config.yml: 123456# --------------------------------------------------------------# background settings# --------------------------------------------------------------# add canvas-nest effect# see detail from https://github.com/hustcc/canvas-nest.jscanvas_nest: true ÈÖçÁΩÆÈ°πËØ¥Êòé color ÔºöÁ∫øÊù°È¢úËâ≤, ÈªòËÆ§: '0,0,0'Ôºõ‰∏â‰∏™Êï∞Â≠óÂàÜÂà´‰∏∫(R,G,B) opacity: Á∫øÊù°ÈÄèÊòéÂ∫¶Ôºà0~1Ôºâ, ÈªòËÆ§: 0.5 count: Á∫øÊù°ÁöÑÊÄªÊï∞Èáè, ÈªòËÆ§: 150 zIndex: ËÉåÊôØÁöÑz-indexÂ±ûÊÄßÔºåcssÂ±ûÊÄßÁî®‰∫éÊéßÂà∂ÊâÄÂú®Â±ÇÁöÑ‰ΩçÁΩÆ, ÈªòËÆ§: -1 ¬∂Ê∑ªÂä†ÁôæÂ∫¶ÂàÜ‰∫´ÂäüËÉΩ Ê∑ªÂä†themes\next-reloaded\_config.yml: 123baidushare: type: slide baidushare: true ¬∂Â∞èËêåÁâ© install Êé®Ëçê‰ΩøÁî®cnpm npm install --save hexo-helper-live2d ÈÄâÊã©Â∞èËêåÁâ© ÂèØ‰ª•Êü•Áúãhexo-helper-live2d 12345678910111213141516171819202122live2d-widget-model-chitoselive2d-widget-model-epsilon2_1live2d-widget-model-gflive2d-widget-model-haru/01 (use npm install --save live2d-widget-model-haru)live2d-widget-model-haru/02 (use npm install --save live2d-widget-model-haru)live2d-widget-model-harutolive2d-widget-model-hibikilive2d-widget-model-hijikilive2d-widget-model-izumilive2d-widget-model-koharulive2d-widget-model-mikulive2d-widget-model-ni-jlive2d-widget-model-nicolive2d-widget-model-nietzschelive2d-widget-model-nipsilonlive2d-widget-model-nitolive2d-widget-model-shizukulive2d-widget-model-tororolive2d-widget-model-tsumikilive2d-widget-model-unitychanlive2d-widget-model-wankolive2d-widget-model-z16 ÊâæÂà∞Ëá™Â∑±ÂøÉ‰ª™ÁöÑinstall„ÄÇ exampleÔºönpm install live2d-widget-model-haruto ÈÖçÁΩÆ 1234567891011121314151617# ÂÆ†Áâ©live2d: enable: true scriptFrom: local pluginRootPath: live2dw/ pluginJsPath: lib/ pluginModelPath: assets/ tagMode: false log: false model: use: live2d-widget-model-haruto display: position: right width: 150 height: 300 mobile: show: true ¬∂Ê∑ªÂä†ÁâàÊùÉ‰ø°ÊÅØ Ê∑ªÂä†Ê†ºÂºè Âú®themes\next-reloaded\layout\_macro\post.swig,post-footerÊâÄÂú®ÁöÑÊ†áÁ≠æ‰∏ãÔºåÊ∑ªÂä†‰ª•‰∏ãÂÜÖÂÆπÔºö 12345678910111213141516171819&lt;footer class="post-footer"&gt; ÂéüÊúâÂÜÖÂÆπ&lt;div&gt; &#123;# Ê≠§Â§ÑÂà§Êñ≠ÊòØÂê¶Âú®Á¥¢ÂºïÂàóË°®‰∏≠ #&#125; &#123;% if not is_index %&#125;&lt;ul class="post-copyright"&gt; &lt;li class="post-copyright-author"&gt; &lt;strong&gt;Êú¨Êñá‰ΩúËÄÖÔºö&lt;/strong&gt;&#123;&#123; theme.author &#125;&#125; &lt;/li&gt; &lt;li class="post-copyright-link"&gt; &lt;strong&gt;Êú¨ÊñáÈìæÊé•Ôºö&lt;/strong&gt; &lt;a href="&#123;&#123; url_for(page.path) &#125;&#125;" title="&#123;&#123; page.title &#125;&#125;"&gt;&#123;&#123; page.path &#125;&#125;&lt;/a&gt; &lt;/li&gt; &lt;li class="post-copyright-license"&gt; &lt;strong&gt;ÁâàÊùÉÔºö &lt;/strong&gt; Êú¨Á´ôÊñáÁ´†ÂùáÈááÁî® &lt;a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank"&gt;CC BY-NC-SA 3.0 CN&lt;/a&gt; ËÆ∏ÂèØÂçèËÆÆÔºåËØ∑ÂãøÁî®‰∫éÂïÜ‰∏öÔºåËΩ¨ËΩΩÊ≥®ÊòéÂá∫Â§ÑÔºÅ &lt;/li&gt;&lt;/ul&gt;&#123;% endif %&#125;&lt;/div&gt; ÊòæÁ§∫Ê†ºÂºè Ê∑ªÂä†themes\next-reloaded\source\css\_custom\custom.styl: 1234567.post-copyright &#123; margin: 1em 0 0; padding: 0.5em 1em; border-left: 3px solid #ff1700; background-color: #f9f9f9; list-style: none;&#125;]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Á¨¨‰∏ÄÁØáÂçöÂÆ¢]]></title>
    <url>%2F2018%2F11%2F27%2FfirstBlog%2F</url>
    <content type="text"><![CDATA[‰Ωú‰∏∫‰∏Ä‰∏™Á®ãÂ∫èÂëòÔºåÊÄé‰πàÂèØ‰ª•Ê≤°Êúâ‰∏Ä‰∏™Â±û‰∫éËá™Â∑±ÁöÑÂçöÂÆ¢ÁΩëÁ´ôÂë¢ÔºüÂõ†‰∏∫ÊúÄËøëÈÉΩÂú®‰ªé‰∫ãpythonÂ∑•‰ΩúÔºåÂ∞±ÊÉ≥Áî®DjangoÂú®‰∫ëÊúçÂä°Âô®‰∏äÊê≠Âª∫‰∏Ä‰∏™blogÔºåÊü•ÈòÖÁöÑÊó∂ÂÄôÂèëÁé∞ÂèØ‰ª•Âú®github‰∏äÊê≠Âª∫blogÔºåÂäüËÉΩÁâπÂà´ÂÆåÂñÑÔºåÊê≠Âª∫ËøáÁ®ã‰πüÈùûÂ∏∏ÁÆÄÂçïÔºàÊúÄÈáçË¶ÅÁöÑËé´Ëøá‰∫éÂÖçË¥πÂï¶ÔºâÔºåÊâÄ‰ª•ÊúÄÂêéÈÄâÁî®hexoÂú®github‰∏äÊê≠Âª∫‰∏™‰∫∫ÂçöÂÆ¢„ÄÇ ‰πãÂâçÂú®Â≠¶‰π†ÊàñËÄÖÂ∑•‰ΩúËøáÁ®ã‰∏≠ÔºåÂØπ‰∫éÂ≠¶Âà∞ÁöÑÁü•ËØÜ‰∏ÄËà¨ÈÉΩ‰ºöÂÜôÂà∞ÊúâÈÅì‰∫ëÁ¨îËÆ∞„ÄÇ‰ªäÂêé‰ºöÊää‰∏Ä‰∫õËßâÂæóÂ•ΩÁöÑÊñáÁ´†ÊàñËÄÖÊòØÊñ∞Â≠¶‰π†ÁöÑÁü•ËØÜÊèêÁÇºÂá∫Êù•ÔºåÂàÜ‰∫´Âà∞ÊàëÁöÑblog‰∏≠„ÄÇ ÈÄöËøáÂçöÂÆ¢ÁöÑÊñπÂºèÊù•ËÆ∞ÂΩïËá™Â∑±ÁöÑÂ≠¶‰π†ËøáÁ®ãÔºåÁúãÁùÄÂ∞±ÂæàÊúâÊÑèËØÜÂë¢„ÄÇ]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
</search>
